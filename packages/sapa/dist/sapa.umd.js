var Js=Object.defineProperty;var Pt=Object.getOwnPropertySymbols;var Qs=Object.prototype.hasOwnProperty,ei=Object.prototype.propertyIsEnumerable;var _e=(s,f,g)=>f in s?Js(s,f,{enumerable:!0,configurable:!0,writable:!0,value:g}):s[f]=g,He=(s,f)=>{for(var g in f||(f={}))Qs.call(f,g)&&_e(s,g,f[g]);if(Pt)for(var g of Pt(f))ei.call(f,g)&&_e(s,g,f[g]);return s};var U=(s,f,g)=>(_e(s,typeof f!="symbol"?f+"":f,g),g),$e=(s,f,g)=>{if(!f.has(s))throw TypeError("Cannot "+g)};var m=(s,f,g)=>($e(s,f,"read from private field"),g?g.call(s):f.get(s)),R=(s,f,g)=>{if(f.has(s))throw TypeError("Cannot add the same private member more than once");f instanceof WeakSet?f.add(s):f.set(s,g)},B=(s,f,g,$)=>($e(s,f,"write to private field"),$?$.call(s,g):f.set(s,g),g);var Ge=(s,f,g)=>($e(s,f,"access private method"),g);(function(s,f){typeof exports=="object"&&typeof module!="undefined"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(s=typeof globalThis!="undefined"?globalThis:s||self,f(s.sapa={}))})(this,function(s){var K,P,W,Z,V,he,j,J,Ke,H;"use strict";function f(n,e=()=>!0){let t=n,r=[];do{if(t instanceof Object===!1)break;const o=Object.getOwnPropertyNames(t).filter(e);r.push.apply(r,o)}while(t=Object.getPrototypeOf(t));return r}function g(n,e=0){if(e===0)return n;var t=void 0;return function(r,i,o,a,c){t&&window.clearTimeout(t),t=window.setTimeout(function(){n(r,i,o,a,c)},e||300)}}function $(n,e){var t=void 0;return function(r,i,o,a,c){t||(t=window.setTimeout(function(){n(r,i,o,a,c),t=null},e||300))}}function We(n,e,t){return(...r)=>{t.every(o=>e[o].apply(e,r))&&n.apply(e,r)}}function Ve(n,e){return(...t)=>{n.requestAnimationFrameId&&cancelAnimationFrame(n.requestAnimationFrameId),n.requestAnimationFrameId=requestAnimationFrame(()=>{n.apply(e,t)})}}function wt(n,e){Object.keys(n).forEach((t,r)=>{e(t,n[t],r)})}function je(n,e){return Object.keys(n).map((t,r)=>e(t,n[t],r))}function Dt(n,e,t=""){return je(n,e).join(t)}function Ut(n,e,t){var r=ze(n[e],e);return E(t)?t(r):r}function ze(n,e){return typeof n=="undefined"?e:n}function z(n){return typeof n=="undefined"}function _(n){return!z(n)}function Bt(n){return typeof n=="boolean"}function N(n){return typeof n=="string"}function _t(n){return!N(n)}function Ee(n,e,t=0,r={}){if(t>5)throw console.error(n,e),new Error(["isEqual \uC744 \uC624\uB798 \uC2E4\uD589\uD558\uC600\uC2B5\uB2C8\uB2E4."]);const i=Object.keys(n),o=Object.keys(e);return i.length!==o.length?!1:i.every(a=>{if(r[a])return!0;const c=n[a],l=e[a];return X(c)&&X(l)?Ee(c,l,t+1,r):c===l})}function k(n){return Array.isArray(n)}function X(n){return typeof n=="object"&&!Array.isArray(n)&&!Ce(n)&&!N(n)&&n!==null}function E(n){return typeof n=="function"}function Ce(n){return typeof n=="number"}function Xe(n){return n===0}function Ht(n){return!Xe(n)}const $t=n=>JSON.parse(JSON.stringify(n));function Gt(n){if(!z(n))return $t(n)}function Kt(n){return Object.keys(n).forEach(e=>{Array.isArray(n[e])&&(n[e]=n[e].join(", "))}),n}function qe(...n){const e=[];return n.filter(Boolean).forEach(t=>{k(t)?e.push(qe(...t)):X(t)?Object.keys(t).filter(r=>Boolean(t[r])).forEach(r=>{e.push(r)}):N(t)&&e.push(t)}),e.join(" ")}const Wt={checked:!0,disabled:!0,selected:!0,readonly:!0,required:!0,multiple:!0,open:!0,hidden:!0,spellcheck:!0,autofocus:!0,autoplay:!0,controls:!0,loop:!0,muted:!0,default:!0,defer:!0,async:!0,allowfullscreen:!0,allowtransparency:!0,allowpaymentrequest:!0},v=3,Ye=8;function xe(n){return Wt[n]}const Vt=(n,e,t)=>{_(t)?(n.setAttribute(e,e),n[e]=t):(n.removeAttribute(e),n[e]=void 0)},jt=(n,e,t)=>{xe(e)?Vt(n,e,t):e==="style"?n.style.cssText=t:n.setAttribute(e,t)},zt=(n,e)=>{xe(e)?(n.removeAttribute(e),n[e]=!1):e&&n.removeAttribute(e)},Xt=(n,e,t,r)=>{z(t)?zt(n,e):(!r||t!==r)&&jt(n,e,t)},Ze=(n,e={},t={})=>{const r=[],i=Object.keys(e),o=Object.keys(t);if(i.length===0&&o.length===0)return;r.push.apply(r,i),r.push.apply(r,o),new Set(r).forEach(c=>{Xt(n,c,e[c],t[c])})};function qt(n,e){return n.nodeType===v&&n.textContent!==e.textContent||n.nodeName!==e.nodeName}function Je(n){return n.nodeType===Ye?!0:n.nodeType!==v&&n.getAttribute("data-domdiff-pass")==="true"}function Qe(n){return n.nodeType!==v&&n.getAttribute("refclass")}function Q(n){var e={};const t=n.length;for(let r=0;r<t;r++){const i=n[r],o=i.name,a=i.value;o.startsWith("on")||(e[o]=a)}return e}function Yt(n,e,t,r,i={}){const o=e.nodeType,a=t.nodeType;return o===v&&a!==v||o!==v&&a===v?(n.insertBefore(t.cloneNode(!0),e),n.removeChild(e)):o===v&&a===v?e.textContent=t.textContent:Qe(t)?E(i.checkRefClass)&&i.checkRefClass(e,t)&&e.replaceWith(t.cloneNode(!0)):e.replaceWith(t.cloneNode(!0)),!0}function xt(n,e,t,r,i={}){if(!(i.checkPassed&&i.checkPassed(e,t))&&(Ze(e,Q(t.attributes),Q(e.attributes)),!(!e.hasChildNodes()&&!t.hasChildNodes())))for(var o=ee(e),a=ee(t),c=Math.max(o.length,a.length),l=0;l<c;l++)et(e,o[l],a[l],l,i)}function et(n,e,t,r,i={}){if(!e){n.appendChild(t.cloneNode(!0));return}if(!t){n.removeChild(e);return}if(Je(t)||Je(e))return;if(qt(t,e)||Qe(t)){Yt(n,e,t,r,i);return}const o=t.nodeType;o!==v&&o!==Ye&&t.toString()!=="[object HTMLUnknownElement]"&&xt(n,e,t,r,i)}const ee=n=>{var e=n.firstChild;if(!e)return[];var t=[];do t.push(e),e=e.nextSibling;while(e);return t},Zt={checkPassed:void 0,keyField:"key",removedElements:[]};function q(n,e,t={}){if(!n||!e)throw new Error("A and B must be defined");t=Object.assign({},Zt,t),n=n.el||n,e=e.el||e;var r=ee(n),i=ee(e);n.nodeType!==11&&e.nodeType!==11&&Ze(n,Q(e.attributes),Q(n.attributes));var o=Math.max(r.length,i.length);if(o!==0)if(r.length===0&&i.length>0){var a=document.createDocumentFragment();i.forEach(l=>a.appendChild(l)),n.appendChild(a)}else if(r.length>0&&i.length===0)n.textContent="";else for(var c=0;c<o;c++)et(n,r[c],i[c],c,t)}const tt=/[xy]/g;function Te(){var n=new Date().getTime(),e="xxx12-xx-34xx".replace(tt,function(t){var r=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(t=="x"?r:r&3|8).toString(16)});return e}function te(){var n=new Date().getTime(),e="idxxxxxxx".replace(tt,function(t){var r=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(t=="x"?r:r&3|8).toString(16)});return e}const ne={},re={},nt={},rt=new Set,M=new Map,G=new Map,st="v:";function se(n,e=""){const t=`${st}${te()}`;return M.set(t,n),e&&(G.has(e)||G.set(e,new Set),G.get(e).add(t)),t}function Jt(n){G.has(n)&&(G.get(n).forEach(e=>{M.delete(e)}),G.delete(n))}function it(n,e=!0){if(N(n)===!1)return n;let t=n;return M.has(n)&&(t=M.get(n),e&&M.delete(n)),t}function at(n){return M.has(n)?M.get(n):n}function Qt(n){return M.has(n)}function en(n){return Object.entries(n).map(([e,t])=>`${e}=${se(t)}`).join(" ")}function ot(n={}){Object.keys(n).forEach(e=>{ne[e]=n[e]})}function ct(n){ne[n.name]&&(ne[n.name]=n)}function tn(n,e){nt[n]=e}function lt(n){return nt[n]}function nn(n){return ne[lt(n)||n]}function ut(n){rt.add(n)}function ht(){return[...rt]}function rn(n){ct(n),ht().forEach(e=>{e.hmr()})}function sn(n){Object.keys(n).forEach(e=>{re[e]=n[e]})}function an(n){return re[n]}function ft(n,e={}){return[...Object.keys(re).map(t=>{const r=re[t];return new r(n)}),...Object.keys(e).map(t=>{const r=e[t];return new r(n)})]}class d{constructor(e,t,r){if(typeof e!="string")e instanceof d?this.el=e.el:this.el=e;else{var i=document.createElement(e);t&&(i.className=t),r=r||{},Object.assign(i,r),this.el=i}}static create(e,t,r){return new d(e,t,r)}static createText(e){return new d(document.createTextNode(e))}static createByHTML(e){var t=d.create("div");return t.html(e).firstChild}static getScrollTop(){return Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)}static getScrollLeft(){return Math.max(window.pageXOffset,document.documentElement.scrollLeft,document.body.scrollLeft)}static parse(e){var t=window.DOMParser();return t.parseFromString(e,"text/htmll")}static body(){return d.create(document.body)}get tagName(){return this.el.tagName}get exists(){return Boolean(this.el)}setAttr(e){return Object.keys(e).forEach(t=>{this.attr(t,e[t])}),this}setAttrNS(e,t="http://www.w3.org/2000/svg"){return Object.keys(e).forEach(r=>{this.attr(r,e[r],t)}),this}setProp(e){return Object.keys(e).forEach(t=>{this.el[t]!=e[t]&&(this.el[t]=e[t])}),this}data(e,t){if(arguments.length===1){const r=this.attr("data-"+e);return it(r,!1)}else if(arguments.length===2)return this.attr("data-"+e,t);return this}attr(...e){return e.length==1?E(this.el.getAttribute)&&this.el.getAttribute(e[0]):(this.el.getAttribute(e[0])!=e[1]&&this.el.setAttribute(e[0],e[1]),this)}attrNS(e,t,r="http://www.w3.org/2000/svg"){return arguments.length==1?this.el.getAttributeNS(r,e):(this.el.getAttributeNS(r,e)!=t&&this.el.setAttributeNS(r,e,t),this)}attrKeyValue(e){return{[this.el.getAttribute(e)]:this.val()}}get attributes(){try{return[...this.el.attributes]}catch{const r=this.el.attributes.length,i=[];for(var e=0;e<r;e++)i.push(this.el.attributes[`${e}`]);return i}}attrs(...e){return e.map(t=>this.el.getAttribute(t))}styles(...e){return e.map(t=>this.el.style[t])}removeAttr(e){return this.el.removeAttribute(e),this}removeStyle(e){return this.el.style.removeProperty(e),this}get isFragment(){return this.el.nodeType===11}get isTemplate(){return this.el.nodeType===1&&this.el.tagName==="TEMPLATE"}get content(){return this.isTemplate?this.el.content:this.el}is(e){return e instanceof d?this.el===e.el:this.el===e}isTag(e){return this.el.tagName.toLowerCase()===e.toLowerCase()}closest(e){for(var t=this,r=!1;!(r=t.hasClass(e));)if(t.el.parentNode)t=d.create(t.el.parentNode);else return null;return r?t:null}path(){if(!this.el)return[];let e=[this],t=this.parent();if(!t.el)return e;for(;t&&(e.unshift(t),t=t.parent(),!!t.el););return e}get $parent(){return this.parent()}parent(){return d.create(this.el.parentNode)}hasParent(){return!!this.el.parentNode}get isUnlinked(){return!this.el.parentNode}removeClass(...e){return this.el.classList.remove(...e),this}updateClass(e){return this.el.className=e,this}replaceClass(e,t){return this.el.classList.replace(e,t),this}hasClass(e){return this.el.classList?this.el.classList.contains(e):!1}addClass(...e){return this.el.classList.add(...e),this}onlyOneClass(e){var t=this.parent();t.children().forEach(r=>{r.removeClass(e)}),this.addClass(e)}toggleClass(e,t){return this.el.classList.toggle(e,t),this}outerHTML(){return this.isTextNode?this.text():this.el.outerHTML}html(e){try{return typeof e=="undefined"?this.el.innerHTML:(typeof e=="string"?Object.assign(this.el,{innerHTML:e}):this.empty().append(e),this)}catch(t){return console.log(t,e),this}}htmlDiff(e,t={}){q(this,e,t)}updateDiff(e,t="div",r={}){q(this,d.create(t).html(e),r)}updateSVGDiff(e,t="div",r={}){q(this,d.create(t).html(`<svg>${e}</svg>`).firstChild.firstChild,r)}getById(e){return this.el.getElementById(e)}find(e,t=this.el){if(!this.isTextNode)return t.querySelector(e)}$(e){var t=this.find(e,this.isTemplate?this.el.content:this.el);return t?d.create(t):null}findAll(e,t=this.el){return this.isTextNode?[]:Array.from(t.querySelectorAll(e))}$$(e){var t=this.findAll(e,this.isTemplate?this.el.content:this.el);return t.map(r=>d.create(r))}empty(){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild);return this}append(e){return e?(k(e)?this.el.append(...e.map(t=>t.el||t)):typeof e=="string"?this.el.appendChild(document.createTextNode(e)):this.el.appendChild(e.el||e),this):this}prepend(e){return typeof e=="string"?this.el.prepend(document.createTextNode(e)):this.el.prepend(e.el||e),this}prependHTML(e){var t=d.create("div").html(e);return this.prepend(t.createChildrenFragment()),t}appendHTML(e){var t=d.create("div").html(e);return this.append(t.createChildrenFragment()),t}createChildrenFragment(){const e=this.childNodes;var t=document.createDocumentFragment();return e.forEach(r=>t.appendChild(r.el)),t}static createFragment(e=[]){var t=document.createDocumentFragment();return e.forEach(r=>t.appendChild(r)),t}appendTo(e){var t=e.el?e.el:e;return t.appendChild(this.el),this}remove(){return this.el.parentNode&&this.el.parentNode.removeChild(this.el),this}removeChild(e){return this.el.removeChild(e.el||e),this}text(e){if(typeof e=="undefined")return this.el.textContent;var t=e;return e instanceof d&&(t=e.text()),this.el.textContent!==t&&(this.el.textContent=t),this}css(e,t){if(typeof e!="undefined"&&typeof t!="undefined")e.indexOf("--")===0&&typeof t!="undefined"?this.el.style.setProperty(e,t):this.el.style[e]=t;else if(typeof e!="undefined"){if(typeof e=="string")return window.getComputedStyle(this.el)[e];Object.entries(e).forEach(([r,i])=>{r.indexOf("--")===0&&typeof i!="undefined"?this.el.style.setProperty(r,i):this.el.style[r]=i})}return this}getComputedStyle(...e){var t=window.getComputedStyle(this.el),r={};return e.forEach(i=>{r[i]=t[i]}),r}getStyleList(...e){for(var t={},r=this.el.style.length,i=0;i<r;i++){var o=this.el.style[i];t[o]=this.el.style[o]}return e.forEach(a=>{t[a]=this.css(a)}),t}cssText(e){return typeof e=="undefined"?this.el.style.cssText:(e!=this.el.tempCssText&&(this.el.style.cssText=e,this.el.tempCssText=e),this)}cssArray(e){return e[0]&&(this.el.style[e[0]]=e[1]),e[2]&&(this.el.style[e[2]]=e[3]),e[4]&&(this.el.style[e[4]]=e[5]),e[6]&&(this.el.style[e[6]]=e[7]),e[8]&&(this.el.style[e[8]]=e[9]),this}cssFloat(e){return parseFloat(this.css(e))}cssInt(e){return parseInt(this.css(e))}px(e,t){return this.css(e,`${t}px`)}rect(){return this.el.getBoundingClientRect()}bbox(){return this.el.getBBox()}isSVG(){return this.el._cachedIsSVG||(this.el._cachedIsSVG={value:this.el.tagName.toLowerCase()==="svg"}),this.el._cachedIsSVG.value}offsetRect(){if(this.isSVG()){const t=this.parent().rect(),r=this.rect();return{x:r.x-t.x,y:r.y-t.y,width:r.width,height:r.height}}const e=this.el;return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}offsetClientRect(){if(this.isSVG()){const r=this.parent().rect(),i=this.rect();return{x:i.x-r.x,y:i.y-r.y,width:i.width,height:i.height}}const e=this.parent().rect(),t=this.rect();return{x:t.x-e.x,y:t.y-e.y,width:t.width,height:t.height}}offset(){var e=this.rect(),t=d.getScrollTop(),r=d.getScrollLeft();return{top:e.top+t,left:e.left+r}}offsetLeft(){return this.offset().left}offsetTop(){return this.offset().top}position(){return this.el.style.top?{top:parseFloat(this.css("top")),left:parseFloat(this.css("left"))}:this.rect()}size(){return[this.width(),this.height()]}width(){return this.el.offsetWidth||this.rect().width}contentWidth(){return this.width()-this.cssFloat("padding-left")-this.cssFloat("padding-right")}height(){return this.el.offsetHeight||this.rect().height}contentHeight(){return this.height()-this.cssFloat("padding-top")-this.cssFloat("padding-bottom")}val(e){if(typeof e=="undefined")return this.el.value;if(typeof e!="undefined"){var t=e;e instanceof d&&(t=e.val()),this.el.value=t}return this}matches(e){return this.el&&this.el.matches?this.el.matches(e)?this:this.parent().matches(e):null}get value(){return this.el.value}set value(e){this.el.value=e}get naturalWidth(){return this.el.naturalWidth}get naturalHeight(){return this.el.naturalHeight}get files(){return this.el.files?[...this.el.files]:[]}get isTextNode(){return this.el.nodeType===3}realVal(){switch(this.el.nodeType){case"INPUT":var e=this.attr("type");return e=="checkbox"||e=="radio"?this.checked():this.el.value;case"SELECT":case"TEXTAREA":return this.el.value}return""}int(){return parseInt(this.val(),10)}float(){return parseFloat(this.val())}show(e="block"){return this.el.style.display=e!="none"?e:"block",this}hide(){return this.el.style.display="none",this}isHide(){return this.el.style.display==="none"}isShow(){return!this.isHide()}toggle(e){var t=this.isHide();return arguments.length==1?e?this.show():this.hide():t?this.show():this.hide()}get totalLength(){return this.el.getTotalLength()}scrollIntoView(){this.el.scrollIntoView()}addScrollLeft(e){return this.el.scrollLeft+=e,this}addScrollTop(e){return this.el.scrollTop+=e,this}setScrollTop(e){return this.el.scrollTop=e,this}setScrollLeft(e){return this.el.scrollLeft=e,this}get scrollTop(){return this.el===document.body?d.getScrollTop():this.el.scrollTop}get scrollLeft(){return this.el===document.body?d.getScrollLeft():this.el.scrollLeft}get scrollHeight(){return this.el.scrollHeight}get scrollWidth(){return this.el.scrollWidth}on(e,t,r,i){return this.el.addEventListener(e,t,r,i),this}off(e,t){return this.el.removeEventListener(e,t),this}getElement(){return this.el}createChild(e,t="",r={},i={}){let o=d.create(e,t,r);return o.css(i),this.append(o),o}get firstChild(){return d.create(this.el.firstElementChild)}get first(){return d.create(this.el.firstChild)}children(){var e=this.el.firstElementChild;if(!e)return[];var t=[];do t.push(d.create(e)),e=e.nextElementSibling;while(e);return t}hasChild(e){const t=e.el||e;return this.el===t?!1:this.el.contains(t)}get childNodes(){const e=[];if(this.el.hasChildNodes()){const t=this.el.childNodes;for(let r=0;r<t.length;r++)e.push(d.create(t[r]))}return e}childLength(){return this.el.childNodes.length}replace(e){return this.el.parentNode&&this.el.parentNode.replaceChild(e.el||e,this.el),this}replaceChild(e,t){return this.el.replaceChild(t.el||t,e.el||e),this}checked(e=!1){return arguments.length==0?!!this.el.checked:(this.el.checked=!!e,this)}click(){return this.el.click(),this}focus(){return this.el.focus(),this}select(){if(this.attr("contenteditable")==="true"){var e=document.createRange();e.selectNodeContents(this.el);var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}else this.el.select();return this}blur(){return this.el.blur(),this}toDataURL(e="image/png",t=1){return this.el.toDataURL(e,t)}fullscreen(){var e=this.el;e.requestFullscreen?e.requestFullscreen():e.wekitRequestFullscreen&&e.wekitRequestFullscreen()}toggleFullscreen(){this.el===document.fullscreenElement?document.exitFullscreen():this.fullscreen()}}class dt{constructor(e){this.id=te(),this.cachedCallback={},this.callbacks={},this.editor=e}hasCallback(e,t){var r=this.getCachedCallbacks(e);return r.some(i=>i.originalCallback===t)}getCallbacks(e){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e]}setCallbacks(e,t=[]){this.callbacks[e]=t}debug(...e){this.editor&&this.editor.context.config.get("debug.mode")&&console.debug(...e)}on(e,t,r,i=0,o=0,a=!1,c=!1,l=[],T=!1){var p=t;return i>0?p=g(t,i):o>0&&(p=$(t,o)),l.length&&(p=We(p,r,l)),T&&(p=Ve(p,r,t.name)),this.getCallbacks(e).push({event:e,callback:p,context:r,originalCallback:t,enableAllTrigger:a,enableSelfTrigger:c}),()=>{this.off(e,t)}}off(e,t){this.debug("off message event",e),arguments.length==1?this.setCallbacks(e):arguments.length==2&&this.setCallbacks(e,this.getCallbacks(e).filter(r=>r.originalCallback!==t))}offAll(e){Object.keys(this.callbacks).forEach(t=>{this.setCallbacks(t,this.getCallbacks(t).filter(r=>r.context!==e))}),this.debug("off all message",e.sourceName)}getCachedCallbacks(e){return this.getCallbacks(e)}sendMessage(e,t,...r){this.sendMessageList(e,[[t,...r]])}runMessage(e,t){const r=e.callback.apply(e.context,t);if(_(r)){if(r===!1)return;if(E(r)){r();return}}}sendMessageList(e,t=[]){window.Promise.resolve().then(()=>{t.forEach(([r,...i])=>{var o=this.getCachedCallbacks(r);if(o&&o.length){const a=o.filter(l=>!l.enableSelfTrigger).filter(l=>l.enableAllTrigger||l.originalCallback.source!==e);let c=a.length;for(;c--;){const l=a[c];this.runMessage(l,i)}}else this.debug(`message event ${r} is not exist.`)})})}nextSendMessage(e,t,...r){window.Promise.resolve().then(()=>{t(...r)})}triggerMessage(e,t,...r){window.Promise.resolve().then(()=>{var i=this.getCachedCallbacks(t);i?i.filter(a=>a.originalCallback.source===e).forEach(a=>{a.callback.apply(a.context,r)}):this.debug(t," is not valid event")})}emit(e,...t){E(e)?e(...t):k(e)?this.sendMessageList(this.source,e):this.sendMessage(this.source,e,...t)}nextTick(e){this.nextSendMessage(this.source,e)}trigger(e,...t){E(e)?e(...t):this.triggerMessage(this.source,e,...t)}}const y={NODE:8,TEXT:3,FRAGMENT:11,COMPONENT:100,ELEMENT:101,COMMENT:102},on={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontSize:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,width:!0,maxWidth:!0,maxHeight:!0,height:!0,top:!0,left:!0,right:!0,bottom:!0,border:!0,padding:!0,margin:!0,paddingLeft:!0,paddingRight:!0,paddingTop:!0,paddingBottom:!0,marginLeft:!0,marginRight:!0,marginTop:!0,marginBottom:!0,gap:!0,columnGap:!0,rowGap:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be={},cn=/([A-Z])/g,ln=n=>{if(be[n])return be[n];const e=n.replace(cn,"-$1").toLowerCase();return be[n]=e,e};function un(n,e){return typeof e=="number"&&on[n]&&(e=e+"px"),e}function hn(n){return ln(n)}function gt(n){const e={};return Object.keys(n).forEach(t=>{e[hn(t)]=un(t,n[t])}),e}const fn={svg:!0,g:!0,path:!0,rect:!0,circle:!0,ellipse:!0,line:!0,polyline:!0,polygon:!0,text:!0,tspan:!0,textPath:!0,tref:!0,defs:!0,clipPath:!0,mask:!0,pattern:!0,image:!0,linearGradient:!0,radialGradient:!0,stop:!0,animate:!0,animateMotion:!0,animateColor:!0,animateTransform:!0,mpath:!0,set:!0,use:!0,desc:!0,metadata:!0,title:!0,marker:!0,symbol:!0,view:!0,foreignObject:!0,switch:!0,link:!0};function dn(n){return!!fn[n]}const gn="<",mn=d.create("div"),pn=document.createTextNode("");let ie={},ye=0,Ae={};function En(n){if(!Ae[n]){const e=dn(n)?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n);Ae[n]=e}return Ae[n].cloneNode(!1)}function Cn(n){const e=pn.cloneNode();return e.textContent=n,e}function Tn(n,e,t){n.setAttribute(e,t)}function bn(n,e,t){n[e.toLowerCase()]=t}function yn(n,e,t){e.indexOf("--")===0?typeof t=="undefined"?n.style.removeProperty(e):n.style.setProperty(e,t):n.style[e]=t}function An(n){const e=gt(n);return Object.keys(e).map(t=>`${t}: ${e[t]};`).join(" ")}function vn(n){return ye>2e3&&(ye=0,ie={}),ie[n]||(ye++,ie[n]=mn.html(n).first.el),ie[n].cloneNode(!0)}class L{constructor(e,t,r,i,o){this.type=e,this.tag=t,this.nodeName=t==null?void 0:t.toUpperCase(),this.props=r,this.children=i,this.Component=o,this.initializeProps(),this.initializeChildren()}clone(){return new L(this.type,this.tag,He({},this.props),this.children.map(e=>e.clone()),this.Component)}find(e){return this.props.content.find(e)}runMounted(){this.mounted&&requestAnimationFrame(()=>{this.mounted()},0)}get stringifyStyle(){return this.tagProps.style}initializeProps(){const e=Object.assign({},this.props);if(!this.Component)X(e.style)&&(e.style=An(e.style)),this.tagProps=e;else{const t=Object.keys(e).length?se(e):void 0,r={refClass:this.Component.name,ref:e.ref?e.ref:void 0};t&&(r[t]=""),this.tagProps=r}}initializeChildren(){k(this.children)&&(this.children=this.children.map(e=>{if(N(e))if(this.props.enableHtml){if(e.indexOf(gn)===-1)return Y(e);{const t=vn(e);return(t==null?void 0:t.nodeType)===3?Y(t.textContent):Sn(t)}}else return Y(e);else if(Ce(e))return Y(e);return e}),this.props.content=this.children,this.props.contentChildren=this.children)}makeChildren(e,t){const r=this.el,i=this.children;if(i&&i.length){const o=document.createDocumentFragment();i.forEach(a=>{a instanceof L||a.makeElement?o.appendChild(a.makeElement(e,t).el):k(a)?a.forEach(c=>{c&&o.appendChild(c.makeElement(e,t).el)}):E(a)?o.appendChild(a()):a instanceof HTMLElement?o.appendChild(a):o.appendChild(Object.prototype.toString.call(null,a))}),r.appendChild(o),i.forEach(a=>{k(a)?a.forEach(c=>{c&&c.runMounted()}):a&&a.runMounted()})}}createElement(){return En(this.tag)}makeElement(e=!1,t={}){if(this.el)return this;const r=this.createElement(),i=this.tagProps;return i&&Object.keys(i).forEach(o=>{const a=i[o];if(o==="style")if(N(a))r.style.cssText=a;else{const c=gt(a);Object.entries(c).forEach(([l,T])=>{yn(r,l,T)})}else o&&a!==void 0&&(o.startsWith("on")?bn(r,o,a):Tn(r,o,a));o==="ref"&&a&&(this.ref=a,E(t.registerRef)&&t.registerRef(a,r))}),this.el=r,this.makeChildren(e,t),this}}class ve extends L{constructor(e){super(y.TEXT,null,{}),this.value=e}clone(){return new ve(this.value)}get textContent(){return this.value}runMounted(){}createElement(){return Cn(this.value)}makeElement(){return this.el?this:(this.el=this.createElement(),this)}}class Oe extends L{constructor(e={},t){super(y.FRAGMENT,"fragment",e||{},t)}clone(){return new Oe(this.props,this.children.map(e=>e.clone()))}makeElement(e=!1,t={}){if(this.el)return this;const r=document.createDocumentFragment();return this.el=r,this.makeChildren(e,t),this}}class Re extends L{constructor(e={},t,r){super(y.COMPONENT,"object",e||{},t),this.Component=r,this.instance=null}clone(){return new Re(this.props,this.children.map(e=>e.clone()),this.Component)}mounted(){var e;(e=this.instance)==null||e.onMounted()}render(e){const t=this.Component,r=this.props;this.instance=e.context.createInstanceForComponent(t,null,r),this.instance.render()}makeElement(e,t={}){if(this.el)return this;this.render(t),this.el=this.instance.$el.el;const r=this.props.ref||this.instance.id;return E(t.registerChildComponent)&&t.registerChildComponent(this.el,this.instance,r),this}}class Ne extends L{constructor(e){super(y.ELEMENT,null,{}),this.el=e,this.outerHTML=e.outerHTML,this.pass=!0}clone(){return new Ne(this.el)}makeElement(){return this}}function On({tag:n,props:e,children:t,Component:r}){return new L(y.NODE,n,e,t,r)}function Rn({props:n,children:e,Component:t}){return new Re(n,e,t)}function Nn({props:n,children:e,Component:t}){return new Oe(n,e,t)}function Y(n){return new ve(n)}function Sn(n){return new Ne(n)}function kn(n,e={}){return N(n)&&(n=Y(n)),d.create(n.makeElement(!0,e).el)}const Mn=new Map(Object.entries({checked:!0,disabled:!0,selected:!0,readonly:!0,required:!0,multiple:!0,open:!0,hidden:!0,spellcheck:!0,autofocus:!0,autoplay:!0,controls:!0,loop:!0,muted:!0,default:!0,defer:!0,async:!0,allowfullscreen:!0,allowtransparency:!0,allowpaymentrequest:!0})),Ln={content:!0,contentChildren:!0},Se=3,mt="style",ke="on";function pt(n){return Mn.has(n)}const I={setBooleanProp(n,e,t){_(t)?(n.setAttribute(e,e),n[e]=t):(n.removeAttribute(e),n[e]=void 0)},setProp(n,e,t){pt(e)?this.setBooleanProp(n,e,t):e.startsWith(ke)?n[e.toLowerCase()]=t:e===mt?n.style.cssText=t:(n.setAttribute(e,t),n[e]=t)},removeProp(n,e){pt(e)?(n.removeAttribute(e),n[e]=!1):e&&(n.removeAttribute(e),n[e]=void 0)},updateProp(n,e,t,r){z(t)?this.removeProp(n,e):(!r||t!=r)&&this.setProp(n,e,t)},replaceWith(n,e,t){const r=e.makeElement(!0,t).el;n.replaceWith(r),e.runMounted()},replaceText(n,e){n.textContent!=e.textContent&&(n.textContent=e.textContent)},addNewVNode(n,e,t,r){n.insertBefore(t.makeElement(!0,r).el,e),n.removeChild(e),t.runMounted()},appendChild(n,e,t){n.appendChild(e.makeElement(!0,t).el),e.runMounted()},removeChild(n,e){n.removeChild(e)}},ae={changed(n,e){return n.type===y.TEXT&&n.textContent!==e.textContent||n.nodeName!==e.nodeName},hasPassed(n){return n.pass},hasRefClass(n){return n.Component}},In=(n,e={},t={})=>{const r=[],i=Object.keys(e),o=Object.keys(t);if(i.length===0&&o.length===0)return;r.push.apply(r,i),r.push.apply(r,o),new Set(r).forEach(c=>{Ln[c]||I.updateProp(n,c,e[c],t[c])})};function Fn(n){const e=n.props||{},t={},r=Object.keys(e);if(!r.length)return t;for(let i=0,o=r.length;i<o;i++){const a=r[i];a.startsWith(ke)?t[a]=e[a]:a===mt?t[a]=n.stringifyStyle:t[a]=e[a]}return t}function Pn(n,e,t){var r={};const i=e.length;for(let o=0;o<i;o++){const a=e[o],c=a.name,l=a.value;r[c]=l}return Object.keys(t).forEach(o=>{const a=o.startsWith(ke)?o.toLowerCase():o;r[a]||(r[o]=n[a])}),r}function wn(n,e,t,r,i={}){const o=e.nodeType,a=t.type;return o===Se&&a!==y.TEXT||o!==Se&&a===y.TEXT?I.addNewVNode(n,e,t,i):o===Se&&a===y.TEXT?I.replaceText(e,t):ae.hasRefClass(t)?E(i.checkRefClass)&&i.checkRefClass(e,t)&&(I.replaceWith(e,t,i),E(i.registerChildComponent)&&i.registerChildComponent(t.el,t)):I.replaceWith(e,t,i),!0}function Dn(n,e,t={}){if(!(t.checkPassed&&t.checkPassed(n,e))){{const l=Fn(e);In(n,l,Pn(n,n.attributes,l))}if(!(!n.hasChildNodes()&&!e.children.length)){var r=Un(n),i=Bn(e),o=Math.max(r.length,i.length);if(o!==0)if(r.length===0&&i.length>0){var a=document.createDocumentFragment();i.forEach(l=>a.appendChild(l.makeElement(!0,t).el)),n.appendChild(a)}else if(r.length>0&&i.length===0)n.textContent="";else for(var c=0;c<o;c++)Et(n,r[c],i[c],-1,t)}}}function Et(n,e,t,r,i={}){if(!e&&t){I.appendChild(n,t,i);return}if(!t&&e){I.removeChild(n,e,i);return}if(!t.props.pass){if(ae.hasPassed(t)){e.outerHTML!==t.outerHTML&&q(e,t.el,i);return}if(ae.changed(t,e)||ae.hasRefClass(t)){wn(n,e,t,-1,i);return}}const o=t.type;o!==y.TEXT&&o!==y.COMMENT&&Dn(e,t,i)}const Un=n=>{var e=n.firstChild;if(!e)return[];var t=[];do t[t.length]=e,e=e.nextSibling;while(e);return t},Bn=n=>n.children.length?n.children.map(t=>t.type===y.FRAGMENT?t.children:t).flat():[],_n={checkPassed:void 0,keyField:"key",removedElements:[]};function Hn(n,e,t){if(t=Object.assign({},_n,t),n.nodeType!==11){Et(n.parentElement,n,e,-1,t);return}console.warn("fdjskalfdsf",n,e)}const Me=/^@magic:([a-zA-Z][a-zA-Z0-9]*)[\W]{1}(.*)*$/g,Le="@magic:",F="|",Ct=/(([\$a-z_\-]+)\([^\(\)]*\)|([a-z_\-]+))/gi,Ie="(",Tt=")",oe={KEYWORD:"keyword",FUNCTION:"function",VALUE:"value"};class A{constructor(e){this.context=e.context,this.originalMethod=e.originalMethod,this.method=e.method,this.args=e.args,this.pipes=e.pipes,this.keys=e.keys,this.__cache=new Map}setCache(e,t){this.__cache.set(e,t)}hasCache(e){return this.__cache.has(e)}getCache(e){return this.__cache.get(e)}hasKeyword(e){if(this.hasCache(e))return this.getCache(e);let t=!1;return this.pipes.forEach(r=>{switch(r.type){case oe.KEYWORD:r.value===e&&(t=!0);break}}),this.setCache(e,t),t}hasFunction(e){if(this.hasCache(e))return this.getCache(e);let t=!!this.getFunction(e);return this.setCache(e,t),t}getFunction(e){return this.functions.find(t=>t.func===e)}getFunctionList(e){return this.functions.filter(t=>t.func===e)}get originalCallback(){return this.context[this.originalMethod]}get keywords(){return this.keys[oe.KEYWORD].map(e=>e.value)}get functions(){return this.keys[oe.FUNCTION]}get values(){return this.keys[oe.VALUE].map(e=>e.value)}execute(...e){return this.originalCallback.call(this.context,...e)}executeWithContext(e,...t){return this.originalCallback.call(e,...t)}static make(e,...t){return`${Le}${e} ${t.join(F)}`}static check(e){return e.match(Me)!==null}static parse(e,t={}){const r=e.match(Me);if(!r)return;const i=r[0].split(Le)[1].split(F).map(C=>C.trim());let[o,...a]=i;const[c,...l]=o.split(" "),T=a.map(C=>this.parsePipe(C)).filter(C=>C.value),p={function:[],keyword:[],value:[]};return T.forEach(C=>{C.type==="function"?p.function.push(C):C.type==="keyword"?p.keyword.push(C):p.value.push(C)}),new A({context:t,originalMethod:e,method:c,args:l,pipes:T,keys:p})}static parsePipe(e){const t=e.match(Ct);if(!t)return{type:"value",value:e};const[r]=t;if(r.includes(Ie)){const[i,o]=r.split(Ie),[a]=o.split(Tt);return{type:"function",value:r,func:i,args:a.split(",").map(c=>c.trim()).filter(Boolean)}}return{type:"keyword",value:t[0]}}}const bt=(n,e=F)=>` ${e} ${n}`,$n="ME@",yt=(...n)=>n.join(F),Fe=(...n)=>$n+yt(...n),Gn=Fe,Kn=Fe,ce=":",At=" ",Wn={},u=(...n)=>{var e=n.join(ce);return(...t)=>{const[r,...i]=t;return A.make("domevent",[e,r].join(" "),...i)}},le=(...n)=>A.make("subscribe",...n),Vn=(...n)=>A.make("callback",...n),jn=(...n)=>A.make("observer",...n),h=(n,e=F)=>bt(n,e),Pe=(n,e=F)=>h(`after(${n})`,e),zn=(n,e=F)=>h(`before(${n})`,e),Xn=h,qn=h,Yn=h("ArrowUp"),xn=h("ArrowDown"),Zn=h("ArrowLeft"),Jn=h("ArrowRight"),Qn=h("Enter"),er=h("Space"),tr=h("Escape"),nr=h("Backspace"),rr=h("Delete"),sr=h("Equal"),ir=h("Minus"),ar=h("BracketRight"),or=h("BracketLeft"),cr=h("isAltKey"),lr=h("isShiftKey"),ur=h("isMetaKey"),hr=h("isCtrlKey"),fr=h("hasMouse"),dr=h("hasTouch"),gr=h("hasPen"),mr=h("self"),vt=h("isMouseLeftButton"),pr=h("isMouseRightButton"),Er=h("fit"),Cr=h("passive"),Tr=h("domdiff"),Ot=(n=100)=>h(`debounce(${n})`),br=(n=300)=>h(`delay(${n})`),yr=Ot(1e3),Ar=(n=100)=>h(`throttle(${n})`),Rt=h("allTrigger()"),Nt=h("selfTrigger()"),vr=h("frame()"),Or=n=>h(`params(${se(n)})`),Rr=h("capture()"),Nr=Pe("preventDefault"),Sr=Pe("stopPropagation"),kr=le,Mr=(...n)=>le(...n,Rt),Lr=(...n)=>le(...n,Nt),Ir=(n,...e)=>le(`config:${n}`,...e),St=Vn,Fr=St("requestAnimationFrame"),Pr=jn,b=u,wr=u("click"),Dr=u("dblclick"),Ur=u("mousedown"),Br=u("mouseup"),_r=u("mousemove"),Hr=u("mouseover"),$r=u("mouseout"),Gr=u("mouseenter"),Kr=u("mouseleave"),Wr=u("touchstart"),Vr=u("touchmove"),jr=u("touchend"),zr=u("keydown"),Xr=u("keyup"),qr=u("keypress"),Yr=u("drag"),xr=u("dragstart"),Zr=u("drop"),Jr=u("dragover"),Qr=u("dragenter"),es=u("dragleave"),ts=u("dragexit"),ns=u("dragout"),rs=u("dragend"),ss=u("contextmenu"),is=u("change"),as=u("input"),os=u("focus"),cs=u("focusin"),ls=u("focusout"),us=u("blur"),hs=u("paste"),fs=u("resize"),ds=u("scroll"),gs=u("submit"),ms=(...n)=>b("pointerdown")(...n)+vt,ps=b("pointerover"),Es=b("pointerenter"),Cs=b("pointerout"),Ts=b("pointerleave"),bs=b("pointermove"),ys=b("pointerup"),As=b("change","input"),vs=b("wheel","mousewheel","DOMMouseScroll"),Os=u("animationstart"),Rs=u("animationend"),Ns=u("animationiteration"),Ss=u("transitionstart"),ks=u("transitionend"),Ms=u("transitionrun"),Ls=u("transitioncancel"),Is=b("doubletab"),Fs=b("popstate"),Ps=b("orientationchange"),ws=b("hashchange"),Ds=(n="$el")=>A.make("load",n),Us=n=>Wn[n]||"",Bs=n=>function(){return this.prevState[n]!=this.state[n]},_s=()=>!0,Hs=(n="$el")=>A.make("bind",n);function $s(n){let e=n.deltaX,t=n.deltaY;return e===0&&n.shiftKey&&([t,e]=[e,t]),n.deltaMode===window.WheelEvent.DOM_DELTA_LINE?t*=8:n.deltaMode===window.WheelEvent.DOM_DELTA_PAGE&&(t*=24),[kt(e,24),kt(t,24),0]}function kt(n,e){return Math.sign(n)*Math.min(e,Math.abs(n))}var we={addDomEvent(n,e,t,r=!1){n&&n.addEventListener(e,t,r)},removeDomEvent(n,e,t){n&&n.removeEventListener(e,t)},pos(n){return n.touches&&n.touches[0]?n.touches[0]:n},posXY(n){var e=this.pos(n);return{x:e.pageX,y:e.pageY}}};class De{constructor(e,t={}){this.context=e,this.options=t}initialize(){}load(){}refresh(){}render(){}getRef(e){return this.context.getRef(e)}run(){}destroy(){}}const Gs={touchstart:!0,touchmove:!0,mousedown:!0,mouseup:!0,mousemove:!0},Ks={doubletab:"touchend"},Ws={doubletab:!0},Vs={self(n){return n&&n.$dt&&n.$dt.is(n.target)},isAltKey(n){return n.altKey},isCtrlKey(n){return n.ctrlKey},isShiftKey(n){return n.shiftKey},isMetaKey(n){return n.metaKey||n.key=="Meta"||n.code.indexOf("Meta")>-1},isMouseLeftButton(n){return n.buttons===1},isMouseRightButton(n){return n.buttons===2},hasMouse(n){return n.pointerType==="mouse"},hasTouch(n){return n.pointerType==="touch"},hasPen(n){return n.pointerType==="pen"},preventDefault(n){return n.preventDefault(),!0},stopPropagation(n){return n.stopPropagation(),!0}};class js extends De{initialize(){var e,t;this.destroy(),!(this._domEvents&&this.context.notEventRedefine)&&((!this._domEvents||this._domEvents.length===0||this._bindings.length===0)&&(this._domEvents=this.context.filterMethodes("domevent")),!((e=this._bindings)!=null&&e.length)&&((t=this._domEvents)==null?void 0:t.length)&&this._domEvents.forEach(r=>this.parseDomEvent(r)))}destroy(){this.context.notEventRedefine||this.removeEventAll()}getCallback(e){return this.context[e]||Vs[e]}removeEventAll(){this.getBindings().forEach(e=>{this.removeDomEvent(e)}),this.initBindings()}removeDomEvent({eventName:e,dom:t,callback:r}){we.removeDomEvent(t,e,r)}getBindings(){return this._bindings||this.initBindings(),this._bindings}addBinding(e){this.getBindings().push(e)}initBindings(){this._bindings=[]}matchPath(e,t){return e?e.matches(t)?e:this.matchPath(e.parentElement,t):null}hasDelegate(e,t){return this.matchPath(e.target||e.srcElement,t.delegate)}makeCallback(e,t,r){return e.delegate?this.makeDelegateCallback(e,t,r):this.makeDefaultCallback(e,t,r)}makeDefaultCallback(e,t,r){return i=>{var o=this.runEventCallback(i,e,t,r);if(_(o))return o}}makeDelegateCallback(e,t,r){return i=>{const o=this.hasDelegate(i,e);if(o){i.$dt=d.create(o);var a=this.runEventCallback(i,e,t,r);if(_(a))return a}}}runEventCallback(e,t,r,i){const o=this.context;if(e.xy=we.posXY(e),t.beforeMethods.length&&t.beforeMethods.every(c=>this.getCallback(c.target).call(o,e,c.param)),this.checkEventType(e,t)){var a=i(e,e.$dt,e.xy);return a!==!1&&t.afterMethods.length&&t.afterMethods.forEach(c=>this.getCallback(c.target).call(o,e,c.param)),a}}checkEventType(e,t){const r=this.context;var i=!0;t.codes.length&&(i=(e.code?t.codes.indexOf(e.code.toLowerCase())>-1:!1)||(e.key?t.codes.indexOf(e.key.toLowerCase())>-1:!1));var o=!0;return t.checkMethodList.length&&(o=t.checkMethodList.every(a=>{var c=this.getCallback(a);return E(c)&&c?c.call(r,e):_(c)?!!c:!0})),i&&o}getDefaultDomElement(e){const t=this.context;let r;return e?r=t.refs[e]||t[e]||window[e]:r=t.el||t.$el||t.$root,r instanceof d?r.getElement():r}getRealEventName(e){return Ks[e]||e}getCustomEventName(e){return Ws[e]?e:""}getDefaultEventObject(e,t,r,i,o){var me,pe;const a={eventName:this.getRealEventName(e),customEventName:this.getCustomEventName(e),callback:o},[,,...c]=i.args;a.dom=this.getDefaultDomElement(t),a.delegate=c.join(At),a.beforeMethods=[],a.afterMethods=[],a.codes=[],a.checkMethodList=[];const l=i.getFunction("debounce"),T=i.getFunction("throttle");if(l){var p=+(((me=l.args)==null?void 0:me[0])||0);a.callback=g(o,p)}else if(T){var C=+(((pe=T.args)==null?void 0:pe[0])||0);a.callback=$(o,C)}const de=i.getFunctionList("after"),ge=i.getFunctionList("before");return de.length&&de.forEach(w=>{var O=w.args[0].split(" "),[D,S]=O;a.afterMethods.push({target:D,param:S})}),ge.length&&ge.forEach(w=>{var O=w.args[0].split(" "),[D,S]=O;a.beforeMethods.push({target:D,param:S})}),i.keywords.forEach(w=>{const O=w;this.getCallback(O)?a.checkMethodList.push(O):a.codes.push(O.toLowerCase())}),a}addDomEvent(e,t,r){e.callback=this.makeCallback(e,t,r),this.addBinding(e);var i=!1;t.hasKeyword("capture")&&(i=!0),Gs[e.eventName]&&(i={passive:!0,capture:i}),e.dom&&we.addDomEvent(e.dom,e.eventName,e.callback,i)}makeCustomEventCallback(e,t,r){var a;if(e.customEventName==="doubletab"){var i=300,o=t.getFunction("delay");return o&&(i=+(((a=o.args)==null?void 0:a[0])||0)),(...c)=>{this.doubleTab?(window.performance.now()-this.doubleTab.time<i&&r(...c),this.doubleTab=null):this.doubleTab={time:window.performance.now()}}}return r}bindingDomEvent([e,t,...r],i,o){let a=this.getDefaultEventObject(e,t,r,i,o);a.callback=this.makeCustomEventCallback(a,i,a.callback),this.addDomEvent(a,i,a.callback)}getEventNames(e){let t=[];return e.split(ce).forEach(r=>{var i=r.split(ce);t.push.apply(t,i)}),t}parseDomEvent(e){const t=this.context;var r=e.args;if(r){var i=this.getEventNames(r[0]),o=t[e.originalMethod].bind(t);for(let a=0,c=i.length;a<c;a++)r[0]=i[a],this.bindingDomEvent(r,e,o)}}}class zs extends De{initialize(){var e,t;this._observers&&this.context.notEventRedefine||((!this._observers||this._observers.length===0)&&(this._observers=this.context.filterMethodes("observer")),!((e=this._bindings)!=null&&e.length)&&((t=this._observers)==null?void 0:t.length)&&this._observers.forEach(r=>this.parseObserver(r)))}destroy(){this.context.notEventRedefine||this.removeEventAll()}removeEventAll(){this.getBindings().forEach(e=>{this.disconnectObserver(e)}),this.initBindings()}disconnectObserver(e){e==null||e.disconnect()}getBindings(){return this._bindings||this.initBindings(),this._bindings}addBinding(e){this.getBindings().push(e)}initBindings(){this._bindings=[]}addObserver(e){this.addBinding(e)}getDefaultDomElement(e){const t=this.context;let r;return e?r=t.refs[e]||t[e]||window[e]:r=t.el||t.$el||t.$root,r instanceof d?r.getElement():r}createObserver(e,t){var T;const[r,i]=e.args||["intersection"],o=this.getDefaultDomElement(i),a=e.getFunction("params"),c=at((T=a==null?void 0:a.args)==null?void 0:T[0]);let l;switch(r){case"intersection":c.root&&(c.root=this.getDefaultDomElement(c.root)),l=new window.IntersectionObserver(t,c||{}),l.observe(o);break;case"mutation":l=new window.MutationObserver(t),l.observe(o,c||{attributes:!0,characterData:!0,childList:!0});break;case"performance":l=new window.PerformanceObserver(t),l.observe(c||{entryTypes:["paint"]});break}return l}bindingObserver(e,t){this.addObserver(this.createObserver(e,t))}parseObserver(e){const t=this.context;var r=t[e.originalMethod].bind(t);this.bindingObserver(e,r)}}class Xs extends De{initialize(){var e,t;this._callbacks||(this._callbacks=this.context.filterMethodes("subscribe")),!((e=this._bindings)!=null&&e.length)&&((t=this._callbacks)==null?void 0:t.length)&&this._callbacks.forEach(r=>this.parseSubscribe(r))}destroy(){this.context.notEventRedefine||this.context.$store.offAll(this.context)}getCallback(e){return this.context[e]}getBindings(){return this._bindings||this.initBindings(),this._bindings}addBinding(e){this.getBindings().push(e)}initBindings(){this._bindings=[]}createLocalCallback(e,t){var r=t.bind(this.context);return r.displayName=`${this.context.sourceName}.${e}`,r.source=this.context.source,r}parseSubscribe(e){var w,O;const t=e.args.join(" "),r=[],i=[];let o=0,a=0,c=!1,l=!1,T=!1;const p=e.getFunction("debounce"),C=e.getFunction("throttle"),de=e.getFunction("allTrigger"),ge=e.getFunction("selfTrigger"),me=e.getFunction("frame");p&&(o=+(((w=p.args)==null?void 0:w[0])||0)),C&&(a=+(((O=C.args)==null?void 0:O[0])||0)),de&&(c=!0),ge&&(l=!0),me&&(T=!0),e.keywords.forEach(D=>{const S=D;this.context[S]?r.push(S):i.push(S)});const pe=this.context[e.originalMethod];[...i,t].filter(Boolean).forEach(D=>{var S=this.createLocalCallback(D,pe);this.context.$store.on(D,S,this.context,o,a,c,l,r,T)}),this.addBinding(e)}}class qs{constructor(){R(this,K,{});this.handlers=this.initializeHandler()}initializeHandler(e={}){return ft(this,e)}loadHandlerCache(e){return m(this,K)[e]||(m(this,K)[e]=this.handlers.filter(t=>t[e])),m(this,K)[e]}async runHandlers(e="run",...t){await Promise.all(this.loadHandlerCache(e).map(async r=>{await r[e](...t)}))}}K=new WeakMap;const Be=class extends qs{constructor(t,r){super();R(this,J);R(this,P,{});R(this,W,void 0);R(this,Z,!1);R(this,V,{});R(this,he,{});R(this,j,new WeakMap);U(this,"registerRef",(t,r)=>{this.refs[t]=r});U(this,"registerChildComponent",(t,r,i)=>{m(this,j).has(t)||(m(this,he)[i]=t,m(this,j).set(t,r))});U(this,"checkRefClass",(t,r)=>{const i=r.props;if(this.children[i.ref]){const a=this.children[i.ref];return Ge(this,J,Ke).call(this,a,i),!1}let o=this.getTargetInstance(t);return o?o instanceof r.Component?o.isForceRender(i)?!0:(Ge(this,J,Ke).call(this,o,i),!1):!0:!1});U(this,"onUpdated",()=>{const t=this.createFunction("updated");t&&t()});U(this,"useMounted",t=>this.createFunction("mounted",t));U(this,"useUpdated",t=>this.createFunction("updated",t));U(this,"useDestroyed",t=>this.createFunction("destroyed",t));this.refs={},this.children={},this.id=Te(),this.initializeProperty(t,r),this.initComponents()}initializeHandler(){return super.initializeHandler({DomEventHandler:js,ObserverHandler:zs,StoreHandler:Xs})}get target(){return this.$el.el}checkProps(t={}){return t}initializeProperty(t,r={}){this.opt=t||{},this.parent=this.opt,this.source=Te(),this.sourceName=this.constructor.name,this.props=r}setServer(t=!0){B(this,Z,t)}get isServer(){var t;return((t=this.parent)==null?void 0:t.isServer)||m(this,Z)}initComponents(){this.childComponents=this.components()}createFunction(t,r){return E(r)&&!m(this,V)[t]&&(m(this,V)[t]=r),m(this,V)[t]}runFunction(t,r){const i=this.createFunction(t,r);if(!(i!=null&&i.running))return E(i)&&(i.running||(i.running=!0,i.call(this))),i}initState(){return{}}setState(t={},r=!0){B(this,P,Object.assign({},m(this,P),t)),r&&this.refresh()}toggleState(t,r=!0){this.setState({[t]:!m(this,P)[t]},r)}changedProps(t){const r=this.props;return!Ee(r,t,0)}_reload(t){this.changedProps(t)&&(this.props=t,this.refresh())}checkLoad(t){window.requestAnimationFrame(()=>{this.render(t)})}get state(){return m(this,P)}get ref(){return this.props.ref}get isPreLoaded(){return!0}getTargetInstance(t){const r=m(this,j).get(t);if(r)return r;let i=Object.keys(this.children).find(a=>{var c;return(c=this.children[a].$el)==null?void 0:c.is(t)});return this.children[i]}isForceRender(){return!1}async render(t){if(!this.isPreLoaded){this.checkLoad(t);return}const r=this.template();if(this.$el)Hn(this.$el.el,r,{checkRefClass:this.checkRefClass,context:this,registerRef:this.registerRef,registerChildComponent:this.registerChildComponent}),requestAnimationFrame(this.onUpdated);else{const i=this.parseMainTemplate(r);this.$el=i,this.refs.$el=this.$el,t&&t.hasChild(this.$el)===!1&&t.append(this.$el),await this._afterLoad()}return this}get html(){return this.$el.outerHTML()}initialize(){B(this,P,this.initState())}components(){return He({},this.parent.childComponents)}getRef(...t){const r=t.join("");return this.refs[r]}get vNodeOptions(){return{context:this,registerRef:this.registerRef,registerChildComponent:this.registerChildComponent}}parseMainTemplate(t){return kn(t,this.vNodeOptions)}createFunctionComponent(t,r,i=Be){class o extends i{template(){return t.call(this,this.props)}}return new o(this,r)}createInstanceForComponent(t,r,i){return t.__proto__.name===""&&E(t)?this.createFunctionComponent(t,i):new t(this,i)}refresh(){this.render()}async _afterLoad(){this.runHandlers("initialize")}template(){return null}destroy(){console.warn("deprecated destory"),this.eachChildren(t=>{t.destroy()}),this.runHandlers("destroy"),this.$el&&this.$el.remove(),this.$el=null,this.refs={},this.children={},this.onDestroyed()}collectMethodes(t=!1){return(!m(this,W)||t)&&B(this,W,f(this,r=>A.check(r)).map(r=>A.parse(r,this))),m(this,W)}filterMethodes(t,r=!1){return this.collectMethodes(r).filter(i=>i.method===t)}getChildContent(t,r=""){var i;return((i=this.getChild(t))==null?void 0:i.props.content)||r}getChild(t){return this.props.contentChildren.find(t)}onMounted(){const t=this.createFunction("mounted");t&&t()}onDestroyed(){const t=this.createFunction("destroyed");t&&t()}};let Ue=Be;P=new WeakMap,W=new WeakMap,Z=new WeakMap,V=new WeakMap,he=new WeakMap,j=new WeakMap,J=new WeakSet,Ke=function(t,r){t._reload(r)};const fe=class extends Ue{constructor(t,r={}){super(t,r);R(this,H,void 0);r.store?B(this,H,r.store):this.parent.$store||B(this,H,new dt),this.created(),this.initialize()}currentContext(){return this.contexts[this.contexts.length-1]}setStore(t){B(this,H,t)}get $store(){return m(this,H)||this.parent.$store}async created(){}createLocalCallback(t,r){var i=r.bind(this);return i.displayName=`${this.sourceName}.${t}`,i.source=this.source,i}emit(t,...r){this.$store.source=this.source,this.$store.sourceContext=this,this.$store.emit(t,...r)}nextTick(t,r=0){window.setTimeout(()=>{this.$store.nextTick(t)},r)}trigger(t,...r){this.$store.source=this.source,this.$store.trigger(t,...r)}broadcast(t,...r){Object.keys(this.children).forEach(i=>{this.children[i].trigger(t,...r),this.children[i].broadcast(t,...r)})}on(t,r,i=0,o=0,a=!1,c=!1,l=!1){this.$store.on(t,r,this.source,i,o,a,c,[],l)}off(t,r){this.$store.off(t,r,this.source)}subscribe(t,r=0,i=0){const o=`subscribe.${te()}`,a=this.createLocalCallback(o,t);return this.$store.on(o,a,this,r,i,!1,!0),o}useSubscribe(t,r,i=0,o=0,a=!1){const c=this.createFunction(t,r);this.$store.hasCallback(t,c)===!1&&this.$store.on(t,c,this,i,o,!1,a)}useSubscribeSelf(t,r,i=0,o=0){return this.useSubscribe(t,r,i,o,!0)}createFunctionComponent(t,r,i=fe){return super.createFunctionComponent(t,r,i)}static createElementInstance(t,r){if(t.__proto__.name===""){class i extends fe{template(){return t.call(this,this.props)}}return new i(r,r)}else return new t(r,r)}};let x=fe;H=new WeakMap;const Ys=(n,e={})=>{const t=d.create(e.container||document.body),r=x.createElementInstance(n,e);return r.render(t),ut(r),r};async function xs(n,e){const t=x.createElementInstance(n,e);return t.setServer(!0),(await t.render()).html}function ue(n,e={},t=[]){return t=t.flat(1/0),Rn({props:e||{},children:t,Component:n})}function Mt(n,e={},t=[]){return t=t.flat(1/0),Nn({props:e||{},children:t,Component:n})}function Lt(...n){return n.map(e=>{let t,r={},i=[];return N(e)?t=e:k(e)&&([t,r={},i=[]]=e),i.length?ue(t,r||{},Lt(i)):ue(t,r)})}function It(n,e,t=[]){return t=t.flat(1/0),On({tag:n,props:e,children:t})}function Zs(n,e={},...t){if(t=t.filter(Boolean),n===Ft)return Mt(n,e,t);if(e=e||{},typeof n!="string"){const r=n.name;return ot({[r]:n}),ue(n,e,t)}else return It(n,e,t)}const Ft=new Object;s.AFTER=Pe,s.ALL_TRIGGER=Rt,s.ALT=cr,s.ANIMATIONEND=Rs,s.ANIMATIONITERATION=Ns,s.ANIMATIONSTART=Os,s.ARROW_DOWN=xn,s.ARROW_LEFT=Zn,s.ARROW_RIGHT=Jn,s.ARROW_UP=Yn,s.BACKSPACE=nr,s.BEFORE=zn,s.BIND=Hs,s.BIND_CHECK_DEFAULT_FUNCTION=_s,s.BIND_CHECK_FUNCTION=Bs,s.BLUR=us,s.BRACKET_LEFT=or,s.BRACKET_RIGHT=ar,s.BaseStore=dt,s.CALLBACK=St,s.CAPTURE=Rr,s.CHANGE=is,s.CHANGEINPUT=As,s.CHECKER=h,s.CLICK=wr,s.COMMAND=Gn,s.CONFIG=Ir,s.CONTEXTMENU=ss,s.CONTROL=hr,s.CUSTOM=b,s.D1000=yr,s.DEBOUNCE=Ot,s.DELAY=br,s.DELETE=rr,s.DOMDIFF=Tr,s.DOUBLECLICK=Dr,s.DOUBLETAB=Is,s.DRAG=Yr,s.DRAGEND=rs,s.DRAGENTER=Qr,s.DRAGEXIT=ts,s.DRAGLEAVE=es,s.DRAGOUT=ns,s.DRAGOVER=Jr,s.DRAGSTART=xr,s.DROP=Zr,s.Dom=d,s.DomDiff=q,s.ENTER=Qn,s.EQUAL=sr,s.ESCAPE=tr,s.EVENT=Fe,s.FIT=Er,s.FOCUS=os,s.FOCUSIN=cs,s.FOCUSOUT=ls,s.FRAME=vr,s.FUNC_END_CHARACTER=Tt,s.FUNC_REGEXP=Ct,s.FUNC_START_CHARACTER=Ie,s.FragmentInstance=Ft,s.HASHCHANGE=ws,s.IF=Xn,s.INPUT=as,s.KEY=qn,s.KEYDOWN=zr,s.KEYPRESS=qr,s.KEYUP=Xr,s.LEFT_BUTTON=vt,s.LOAD=Ds,s.MAGIC_METHOD=Le,s.MAGIC_METHOD_REG=Me,s.META=ur,s.MINUS=ir,s.MOUSE=fr,s.MOUSEDOWN=Ur,s.MOUSEENTER=Gr,s.MOUSELEAVE=Kr,s.MOUSEMOVE=_r,s.MOUSEOUT=$r,s.MOUSEOVER=Hr,s.MOUSEUP=Br,s.MagicMethod=A,s.NAME_SAPARATOR=ce,s.OBSERVER=Pr,s.ON=Kn,s.ORIENTATIONCHANGE=Ps,s.PARAMS=Or,s.PASSIVE=Cr,s.PASTE=hs,s.PEN=gr,s.PIPE=yt,s.POINTEREND=ys,s.POINTERENTER=Es,s.POINTERLEAVE=Ts,s.POINTERMOVE=bs,s.POINTEROUT=Cs,s.POINTEROVER=ps,s.POINTERSTART=ms,s.POPSTATE=Fs,s.PREVENT=Nr,s.RAF=Fr,s.RESIZE=fs,s.RIGHT_BUTTON=pr,s.SAPARATOR=At,s.SCROLL=ds,s.SELF=mr,s.SELF_TRIGGER=Nt,s.SHIFT=lr,s.SPACE=er,s.SPLITTER=F,s.STOP=Sr,s.SUBMIT=gs,s.SUBSCRIBE=kr,s.SUBSCRIBE_ALL=Mr,s.SUBSCRIBE_SELF=Lr,s.THROTTLE=Ar,s.TOUCH=dr,s.TOUCHEND=jr,s.TOUCHMOVE=Vr,s.TOUCHSTART=Wr,s.TRANSITIONCANCEL=Ls,s.TRANSITIONEND=ks,s.TRANSITIONRUN=Ms,s.TRANSITIONSTART=Ss,s.UIElement=x,s.VARIABLE_SAPARATOR=st,s.WHEEL=vs,s.classnames=qe,s.clone=Gt,s.collectProps=f,s.combineKeyArray=Kt,s.createComponent=ue,s.createComponentFragment=Mt,s.createComponentList=Lt,s.createElement=It,s.createElementJsx=Zs,s.createHandlerInstance=ft,s.debounce=g,s.defaultValue=ze,s.get=Ut,s.getRef=Us,s.getRootElementInstanceList=ht,s.getVariable=at,s.hasVariable=Qt,s.ifCheck=We,s.initializeGroupVariables=Jt,s.isArray=k,s.isBoolean=Bt,s.isEqual=Ee,s.isFunction=E,s.isNotString=_t,s.isNotUndefined=_,s.isNotZero=Ht,s.isNumber=Ce,s.isObject=X,s.isString=N,s.isUndefined=z,s.isZero=Xe,s.keyEach=wt,s.keyMap=je,s.keyMapJoin=Dt,s.makeEventChecker=bt,s.makeRequestAnimationFrame=Ve,s.normalizeWheelEvent=$s,s.recoverVariable=it,s.registAlias=tn,s.registElement=ot,s.registHandler=sn,s.registRootElementInstance=ut,s.renderRootElementInstance=rn,s.renderToString=xs,s.replaceElement=ct,s.retriveAlias=lt,s.retriveElement=nn,s.retriveHandler=an,s.spreadVariable=en,s.start=Ys,s.throttle=$,s.uuid=Te,s.uuidShort=te,s.variable=se,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
