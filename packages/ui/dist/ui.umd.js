(function(s,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("@elf/sapa")):typeof define=="function"&&define.amd?define(["exports","@elf/sapa"],e):(s=typeof globalThis!="undefined"?globalThis:s||self,e(s.ui={},s.sapa))})(this,function(s,e){"use strict";var W=Object.defineProperty,j=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var T=(s,e,d)=>e in s?W(s,e,{enumerable:!0,configurable:!0,writable:!0,value:d}):s[e]=d,r=(s,e)=>{for(var d in e||(e={}))N.call(e,d)&&T(s,d,e[d]);if(J)for(var d of J(e))P.call(e,d)&&T(s,d,e[d]);return s},m=(s,e)=>j(s,B(e));var d="";const M={width:!0,height:!0,top:!0,left:!0,right:!0,bottom:!0,maxWidth:!0,maxHeight:!0,minWidth:!0,minHeight:!0,margin:!0,marginTop:!0,marginRight:!0,marginBottom:!0,marginLeft:!0,padding:!0,paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,border:!0,borderTop:!0,borderRight:!0,borderBottom:!0,borderLeft:!0,borderWidth:!0,borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0};function S(n,t){return typeof t=="number"&&M[n]&&(t=t+"px"),t}function a(n,t){const o={};return Object.keys(n).forEach(l=>{o[t[l]||l]=S(l,n[l])}),o}class g extends e.UIElement{template(){const{type:t,size:o,disabled:l,shape:i,style:u={}}=this.props,c={class:e.classnames(["elf--button",{primary:t==="primary",secondary:t==="secondary",outline:t==="outline"},{"elf--button-lg":o==="large","elf--button-sm":o==="small"},{"elf--button-shape-circle":i==="circle","elf--button-shape-round":i==="round"}]),disabled:l?"disabled":void 0,style:r({},a(u,{borderColor:"--elf--button-border-color",backgroundColor:"--elf--button-background",disabledColor:"--elf--button-disabled-color",color:"--elf--button-color",fontSize:"--elf--button-font-size",fontWeight:"--elf--button-font-weight",height:"--elf--button-height",padding:"--elf--button-padding",borderRadius:"--elf--button-border-radius"}))};return e.createElementJsx("button",m(r({},c),{onClick:this.props.onClick}),e.createElementJsx("span",null,this.props.content||""))}}class O extends e.UIElement{template(){const{type:t,icon:o,content:l="",size:i,disabled:u,shape:c,style:f={}}=this.props,h={class:e.classnames(["elf--icon-button",{primary:t==="primary",secondary:t==="secondary",outline:t==="outline"},{"elf--icon-button-lg":i==="large","elf--icon-button-sm":i==="small"},{"elf--icon-button-shape-circle":c==="circle","elf--icon-button-shape-round":c==="round"}]),disabled:u?"disabled":void 0,style:r({},a(f,{borderColor:"--elf--icon-button-border-color",backgroundColor:"--elf--icon-button-background",disabledColor:"--elf--icon-button-disabled-color",color:"--elf--icon-button-color",fontSize:"--elf--icon-button-font-size",fontWeight:"--elf--icon-button-font-weight",height:"--elf--icon-button-height",padding:"--elf--icon-button-padding",borderRadius:"--elf--icon-button-border-radius"}))};return e.createElementJsx("button",m(r({type:"button"},h),{onClick:this.props.onClick}),o||l||"")}}const b={DIVIDER:"divider",GROUP:"group",MENU:"menu",ITEM:"item",CUSTOM:"custom"};function w(n=[]){return n.map((t,o)=>{const l=`${t.type||"item"}${o}`;return e.isString(t)&&t==="-"?e.createElementJsx(p,{ref:l}):t.type===b.CUSTOM?e.createElementJsx($,r({ref:l},t)):t.type===b.GROUP?e.createElementJsx(U,r({ref:l},t)):t.type===b.DIVIDER?e.createElementJsx(p,r({ref:l},t)):e.createElementJsx(D,r({ref:l},t))})}function p({dashed:n=!1}){return e.createElementJsx("li",{class:"divider",dashed:n})}function $({render:n}){return e.createElementJsx("li",{class:"custom"},n==null?void 0:n(this))}function U({title:n=""}){return e.createElementJsx("li",{class:"section-title"},n)}class D extends e.UIElement{initState(){const{title:t="",hover:o=!1,shortcut:l,icon:i,items:u=[],selectable:c,selected:f,selectedIcon:h="\u2713"}=this.props;return{title:t,hover:o,shortcut:l,icon:i,items:u,selectable:c,selected:f,selectedIcon:h}}template(){const{title:t="",shortcut:o,icon:l,items:i=[],hover:u,selected:c,selectable:f,selectedIcon:h}=this.state;return e.createElementJsx("li",{class:e.classnames({hover:u})},f?e.createElementJsx("span",{class:"selected-icon"},c?h:void 0):null,t?e.createElementJsx("div",{class:"menu-title"},t):void 0,o?e.createElementJsx("div",{class:"shortcut"},o):void 0,l?e.createElementJsx("div",{class:"icon"},l):void 0,i.length>0?e.createElementJsx(x,{items:i}):void 0)}checkClickable(){const{type:t=b.ITEM,items:o=[]}=this.props;return t===b.ITEM&&o.length===0}[e.CLICK("$el")+e.IF("checkClickable")+e.PREVENT+e.STOP](t){const{selectable:o=!1,onClick:l}=this.props;o&&this.setSelected(!this.selected),e.isFunction(l)&&l(t,this)}setSelected(t=!1){this.setState({selected:t})}get selected(){return this.state.selected}}class x extends e.UIElement{template(){const{style:t={},type:o="menu",x:l=0,y:i=0,direction:u="left"}=this.props;let c=r({},t);l!==0&&(c=m(r({},c),{left:l+"px"})),i!==0&&(c=m(r({},c),{top:i+"px"}));const f={class:e.classnames("elf--menu",{"elf--menu-contextmenu":o==="contextmenu",left:u==="left",center:u==="center",right:u==="right"}),style:r({},a(c,{left:"--elf--menu-left",top:"--elf--menu-top",backgroundColor:"--elf--menu-background",color:"--elf--menu-color",fontSize:"--elf--menu-font-size",fontWeight:"--elf--menu-font-weight",height:"--elf--menu-height",padding:"--elf--menu-padding",borderRadius:"--elf--menu-border-radius",borderColor:"--elf--menu-border-color",boxShadow:"--elf--menu-box-shadow",width:"--elf--menu-width",maxWidth:"--elf--menu-max-width",sectionTitleColor:"--elf--menu-section-title-color",sectionTitleBackgroundColor:"--elf--menu-section-title-background-color",dividerColor:"--elf--menu-divider-color",directionLeft:"--elf--menu-direction-left"}))};return e.createElementJsx("menu",m(r({},f),{onContextMenu:h=>h.preventDefault()}),w(this.props.items||[]))}}class R extends e.UIElement{initState(){const{visible:t=!1,style:o={},center:l}=this.props;return{visible:t,style:o,center:l}}close(){const{onClose:t}=this.props;e.isFunction(t)&&t(this)}ok(){const{onOk:t}=this.props;e.isFunction(t)&&t(this)}cancel(){const{onCancel:t}=this.props;e.isFunction(t)&&t(this)}makeDefaultTools(){const{footer:t,cancelText:o="Cancel",okText:l="OK"}=this.props;return t?"":[e.createElementJsx(g,{onClick:()=>this.cancel()},o),e.createElementJsx(g,{type:"primary",onClick:()=>this.ok()},l)]}template(){const{style:t={},visible:o,center:l}=this.state,i={class:e.classnames("elf--dialog",{visible:o,center:l}),style:r({},a(t,{position:"--elf--dialog-position",backgroundColor:"--elf--dialog-background",color:"--elf--dialog-color",fontSize:"--elf--dialog-font-size",fontWeight:"--elf--dialog-font-weight",height:"--elf--dialog-height",padding:"--elf--dialog-padding",borderRadius:"--elf--dialog-border-radius",borderColor:"--elf--dialog-border-color",boxShadow:"--elf--dialog-box-shadow",width:"--elf--dialog-width"}))};return e.createElementJsx("div",r({},i),e.createElementJsx("div",{class:"elf--dialog-title"},e.createElementJsx("div",{class:"elf--dialog-title-text"},"Dialog"),e.createElementJsx("div",{class:"elf--dialog-title-tools",ref:"$tools"},this.props.tools||void 0),e.createElementJsx("div",{class:"elf--dialog-title-close",ref:"$close"},"\xD7")),e.createElementJsx("div",{class:"elf--dialog-content"},e.createElementJsx("div",{class:"elf--dialog-text"},this.props.content||""),e.createElementJsx("div",{class:"elf--dialog-content-tools"},this.props.footer?this.props.footer:this.makeDefaultTools())))}[e.CLICK("$close")](){this.close()}}const C={MENU:"menu",ITEM:"item",CUSTOM:"custom"};function z(n=[]){return n.map((t,o)=>{const l=`${t.type}-${o}`;return t.type===C.CUSTOM?e.createElementJsx(y,r({ref:l},t)):t.type===C.MENU?e.createElementJsx(k,r({ref:l},t)):e.createElementJsx(E,r({ref:l},t))})}class E extends e.UIElement{initialize(){super.initialize();const t=this.props.events||[];t.length&&t.forEach(o=>{this.on(o,()=>{this.refresh()})})}initState(){const{title:t="",icon:o,selected:l}=this.props;return{title:t,icon:o,selected:l}}template(){const{title:t="",icon:o}=this.state;return e.createElementJsx("div",{class:e.classnames("elf--tools-item",{selected:this.selected?!0:void 0}),onClick:this.props.onClick},e.createElementJsx("button",{type:"button"},o?e.createElementJsx("span",{class:"icon"},o):t?e.createElementJsx("span",{class:"menu-title"},t):void 0))}setSelected(t=!1){this.setState({selected:t})}get selected(){return e.isFunction(this.state.selected)?this.state.selected():this.state.selected}set selected(t){this.setSelected(t)}}class y extends E{template(){var t,o;return e.createElementJsx("div",{class:"elf--tools-item custom"},(o=(t=this.props).render)==null?void 0:o.call(t))}}class k extends E{initState(){const{title:t="",icon:o,selected:l,opened:i,items:u,direction:c}=this.props;return{title:t,icon:o,selected:l,opened:i,items:u,direction:c}}template(){const{title:t="",icon:o,items:l=[],opened:i=!1,direction:u="left"}=this.state,c=l.length>0;return e.createElementJsx("div",{class:e.classnames("elf--tools-item",{selected:this.selected?!0:void 0,"has-items":c})},e.createElementJsx("button",{type:"button"},o?e.createElementJsx("span",{class:"icon"},o):t?e.createElementJsx("span",{class:"menu-title"},t):void 0,c?e.createElementJsx("span",{class:e.classnames("arrow",{opened:i})},e.createElementJsx("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e.createElementJsx("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}))):void 0),i?e.createElementJsx("div",{class:"menu-area"},e.createElementJsx("div",{class:"arrow"}),e.createElementJsx(x,{ref:"$menu",items:l,direction:u,style:{top:"calc(100% + 5px)"}})):void 0)}runCallback(t,o){e.isFunction(t)&&t(o,this)}open(){this.setState({opened:!0})}close(){this.setState({opened:!1})}toggle(){this.setState({opened:!this.state.opened})}checkClickable(t){return!e.Dom.create(t.target).closest("menu-area")}checkTriggerClick(){const{trigger:t="click"}=this.props;return t==="click"}checkTriggerOver(){return this.props.trigger==="hover"}[e.POINTEROVER("$el")+e.IF("checkTriggerOver")](){this.open()}checkNotInMenu(t){const o=e.Dom.create(t.target).closest("elf--tools-item");return o?this.$el.is(o)===!1:!0}[e.POINTERLEAVE("$el")+e.IF("checkTriggerOver")](t){this.close()}[e.CLICK("document")+e.IF("checkClickable")+e.IF("checkNotInMenu")](t){this.close()}[e.CLICK("$el")+e.IF("checkClickable")+e.IF("checkTriggerClick")](t){e.Dom.create(t.target).hasClass("arrow")?(this.toggle(),this.state.opened?this.runCallback(this.props.onOpen,t):this.runCallback(this.props.onClose,t)):(this.close(),this.runCallback(this.props.onClick,t))}}class v extends e.UIElement{template(){const{style:t={}}=this.props,o={class:e.classnames("elf--tools"),style:r({},a(t,{backgroundColor:"--elf--tools-background",color:"--elf--tools-color",height:"--elf--tools-height"}))};return e.createElementJsx("div",m(r({},o),{onContextMenu:l=>l.preventDefault()}),z(this.props.items))}}function F(n=[]){return n.map((t,o)=>{const l=`${t.type||"item"}${o}`;return e.createElementJsx(I,r({ref:l},t))})}class I extends e.UIElement{template(){const{items:t,style:o}=this.props;return e.createElementJsx("div",{class:"elf--toolbar-item"},e.createElementJsx(v,{ref:"$tools",items:t,style:o}))}}class L extends e.UIElement{template(){const{style:t={},align:o,items:l=[]}=this.props,i={class:e.classnames("elf--toolbar",{[o]:!0}),style:r({},a(t,{backgroundColor:"--elf--toolbar-background",color:"--elf--toolbar-color",height:"--elf--toolbar-height",align:"--elf--toolbar-align"}))};return e.createElementJsx("div",m(r({},i),{onContextMenu:u=>u.preventDefault()}),F(l))}}s.Button=g,s.Dialog=R,s.IconButton=O,s.Menu=x,s.Toolbar=L,s.ToolbarItem=I,s.Tools=v,s.ToolsCustomItem=y,s.ToolsMenuItem=k,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
