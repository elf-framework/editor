(function(h,t){typeof exports=="object"&&typeof module!="undefined"?t(exports,require("@elf-framework/sapa"),require("@elf-framework/color")):typeof define=="function"&&define.amd?define(["exports","@elf-framework/sapa","@elf-framework/color"],t):(h=typeof globalThis!="undefined"?globalThis:h||self,t(h.ui={},h.sapa,h.color))})(this,function(h,t,f){"use strict";var zt=Object.defineProperty;var Gt=(h,t,f)=>t in h?zt(h,t,{enumerable:!0,configurable:!0,writable:!0,value:f}):h[t]=f;var E=(h,t,f)=>(Gt(h,typeof t!="symbol"?t+"":t,f),f);var Wt="";const F="add/body/first/mousemove",B="add/body/mousemove",P="add/body/mouseup",J="body/move/event",Ce=(i="move")=>t.AFTER(`bodyMouseFirstMove ${i}`),xe=(i="move")=>t.AFTER(`bodyMouseMove ${i}`),Ee=(i="end")=>t.AFTER(`bodyMouseUp ${i}`),ke={width:!0,height:!0,top:!0,left:!0,right:!0,bottom:!0,maxWidth:!0,maxHeight:!0,minWidth:!0,minHeight:!0,margin:!0,marginTop:!0,marginRight:!0,marginBottom:!0,marginLeft:!0,padding:!0,paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,border:!0,borderTop:!0,borderRight:!0,borderBottom:!0,borderLeft:!0,borderWidth:!0,borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0,gap:!0};function Se(i,o){return typeof o=="number"&&ke[i]&&(o=o+"px"),o}function g(i,o={}){const e={};return Object.keys(i).forEach(s=>{e[o[s]||s]=Se(s,i[s])}),e}const Ie={borderColor:"--elf--alert-border-color",backgroundColor:"--elf--alert-background-color",selectedBackgroundColor:"--elf--alert-selected-background-color",disabledColor:"--elf--alert-disabled-color",color:"--elf--alert-color",fontSize:"--elf--alert-font-size",fontWeight:"--elf--alert-font-weight",height:"--elf--alert-height",padding:"--elf--alert-padding",borderRadius:"--elf--alert-border-radius"};class H extends t.UIElement{template(){const{type:o="default",title:e="",content:s="",style:l={},closable:r=!1,onClose:n=void 0,delay:c=0,...a}=this.props,[d,u]=t.useState(c),[m,p]=t.useState(!1);this.state.hideCallback=t.useCallback((b=0)=>{u(b)},[u]);const y={class:t.classnames(["elf--alert",{[o]:!0},{hide:m}]),style:{...g(l,Ie),transition:`opacity ${d}ms ease-in-out`,opacity:m?0:1},...a};return t.createElementJsx("div",{...y,onContextMenu:b=>b.preventDefault(),onTransitionEnd:()=>{this.props.onHide&&this.props.onHide(),this.destroy(!0)}},e?t.createElementJsx("div",{class:"elf--alert-title"},e):null,s?t.createElementJsx("div",{class:"elf--alert-content"},s):null,r?t.createElementJsx("div",{class:"elf--alert-close",onClick:()=>{p(!0),d===0&&(this.props.onHide&&this.props.onHide(),this.destroy(!0))}},"\xD7"):null)}hide(o=0){var e;(e=this.state)==null||e.hideCallback(o)}}function Je({content:i=void 0,delay:o=0,title:e=void 0,closable:s=!1,options:l={},style:r={}}){return t.potal(t.createElementJsx(H,{title:e,delay:o,closable:s,style:r},i),l)}const _={},we=/([A-Z])/g,z={alignContent:"alignContent",alignItems:"alignItems",alignSelf:"alignSelf",area:"gridArea",autoColumns:"gridAutoColumns",autoFlow:"gridAutoFlow",autoRows:"gridAutoRows",backgroundColor:"backgroundColor",backgroundImage:"backgroundImage",basis:"flexBasis",border:"border",borderRadius:"borderRadius",bottom:"bottom",boxShadow:"boxShadow",color:"color",column:"gridColumn",columnEnd:"gridColumnEnd",columnGap:"columnGap",columnSpan:"gridColumn",columnStart:"gridColumnStart",direction:"flexDirection",display:"display",flex:"flex",fontFamily:"fontFamily",fontSize:"fontSize",fontStyle:"fontStyle",fontWeight:"fontWeight",gap:"gap",grow:"flexGrow",height:"height",justifyContent:"justifyContent",left:"left",letterSpacing:"letterSpacing",lineHeight:"lineHeight",margin:"margin",marginBlock:"marginBlock",marginBlockEnd:"marginBlockEnd",marginBlockStart:"marginBlockStart",marginBottom:"marginBlockEnd",marginInline:"marginInline",marginInlineEnd:"marginInlineEnd",marginInlineStart:"marginInlineStart",marginLeft:"marginInlineStart",marginRight:"marginInlineEnd",marginTop:"marginBlockStart",maxHeight:"maxHeight",maxWidth:"maxWidth",minHeight:"minHeight",minWidth:"minWidth",objectFit:"objectFit",objectPosition:"objectPosition",opacity:"opacity",order:"order",overflow:"overflow",padding:"padding",paddingBlock:"paddingBlock",paddingBlockEnd:"paddingBlockEnd",paddingBlockStart:"paddingBlockStart",paddingBottom:"paddingBlockEnd",paddingInline:"paddingInline",paddingInlineEnd:"paddingInlineEnd",paddingInlineStart:"paddingInlineStart",paddingLeft:"paddingInlineStart",paddingRight:"paddingInlineEnd",paddingTop:"paddingBlockStart",position:"position",resize:"resize",right:"right",row:"gridRow",rowEnd:"gridRowEnd",rowGap:"rowGap",rowSpan:"gridRow",rowStart:"gridRowStart",shrink:"flexShrink",templateAreas:"gridTemplateAreas",templateColumns:"gridTemplateColumns",templateRows:"gridTemplateRows",textAlign:"textAlign",textDecoration:"textDecoration",textTransform:"textTransform",top:"top",transform:"transform",transformOrigin:"transformOrigin",width:"width",whiteSpace:"whiteSpace",wrap:"flexWrap"},Oe=i=>{if(_[i])return _[i];const o=i.replace(we,"-$1").toLowerCase();return _[i]=o,o};function v(i,o={}){const e={};return Object.keys(o).forEach(s=>{e[s]=i+"-"+Oe(s)}),e}function w(i){const o={},e={};return Object.keys(i).forEach(s=>{z[s]?o[z[s]]=i[s]:e[s]=i[s]}),{style:o,noneStyle:e}}const Me={borderColor:"--elf--button-border-color",backgroundColor:"--elf--button-background-color",selectedBackgroundColor:"--elf--button-selected-background-color",disabledColor:"--elf--button-disabled-color",color:"--elf--button-color",fontSize:"--elf--button-font-size",fontWeight:"--elf--button-font-weight",height:"--elf--button-height",padding:"--elf--button-padding",borderRadius:"--elf--button-border-radius"};class O extends t.UIElement{template(){const{type:o,size:e,disabled:s,selected:l,shape:r,quiet:n=void 0,outline:c=void 0,style:a={},onClick:d,content:u,...m}=this.props,{style:p}=w(m),y={class:t.classnames(["elf--button",{selected:l,outline:c,quiet:n,[o]:!0},{large:e==="large",small:e==="small"},{"elf--button-shape-circle":r==="circle","elf--button-shape-round":r==="round"}]),disabled:s?"disabled":void 0,style:g({...a,...p},Me)};return t.createElementJsx("button",{...y,onClick:d},t.createElementJsx("span",null,u||""))}}const $e=v("--elf--button-group",{backgroundColor:!0,color:!0,height:!0,hoverColor:!0,borderColor:!0,boxShadow:!0});class Te extends t.UIElement{template(){const{disabled:o,style:e={},content:s,...l}=this.props,{style:r}=w(l),n={class:t.classnames(["elf--button-group"]),disabled:o?"disabled":void 0,style:g({...e,...r},$e)};return t.createElementJsx("div",{...n},s)}}const Ue={borderColor:"--elf--link-button-border-color",backgroundColor:"--elf--link-button-background",disabledColor:"--elf--link-button-disabled-color",color:"--elf--link-button-color",fontSize:"--elf--link-button-font-size",fontWeight:"--elf--link-button-font-weight",padding:"--elf--link-button-padding"};class Re extends t.UIElement{template(){const{disabled:o,style:e={},content:s,onClick:l,href:r}=this.props,n={class:t.classnames(["elf--link-button"]),disabled:o?"disabled":void 0,style:{...g(e,Ue)}};return t.createElementJsx("a",{...n,onClick:l,href:r||"#"},t.createElementJsx("span",null,s||""))}}const De={borderColor:"--elf--icon-button-border-color",backgroundColor:"--elf--icon-button-background",disabledColor:"--elf--icon-button-disabled-color",color:"--elf--icon-button-color",fontSize:"--elf--icon-button-font-size",fontWeight:"--elf--icon-button-font-weight",height:"--elf--icon-button-height",padding:"--elf--icon-button-padding",borderRadius:"--elf--icon-button-border-radius"};class G extends t.UIElement{template(){const{type:o,icon:e,content:s="",size:l,disabled:r,shape:n,style:c={}}=this.props,a={class:t.classnames(["elf--icon-button",{primary:o==="primary",secondary:o==="secondary",outline:o==="outline"},{"elf--icon-button-lg":l==="large","elf--icon-button-sm":l==="small"},{"elf--icon-button-shape-circle":n==="circle","elf--icon-button-shape-round":n==="round"}]),disabled:r?"disabled":void 0,style:{...g(c,De)}};return t.createElementJsx("button",{type:"button",...a,onClick:this.props.onClick},e||s||"")}}const Fe={borderColor:"--elf--button-border-color",backgroundColor:"--elf--button-background-color",disabledColor:"--elf--button-disabled-color",color:"--elf--button-color",fontSize:"--elf--button-font-size",fontWeight:"--elf--button-font-weight",height:"--elf--button-height",padding:"--elf--button-padding",borderRadius:"--elf--button-border-radius"};class Be extends t.UIElement{template(){const{type:o,size:e,disabled:s,shape:l,destructive:r=!1,style:n={},onClick:c,content:a,...d}=this.props,{style:u}=w(d),m={class:t.classnames(["elf--button",{primary:o==="primary",secondary:o==="secondary",outline:o==="outline"},r?"destructive":"",{large:e==="large",small:e==="small"},{"elf--button-shape-circle":l==="circle","elf--button-shape-round":l==="round"}]),disabled:s?"disabled":void 0,style:g({...n,...u},Fe)};return t.createElementJsx("button",{...m,onClick:c},t.createElementJsx("span",null,a||""))}}const W={borderColor:"--elf--radio-border-color",backgroundColor:"--elf--radio-background",disabledColor:"--elf--radio-disabled-color",color:"--elf--radio-color",fontSize:"--elf--radio-font-size",fontWeight:"--elf--radio-font-weight",height:"--elf--radio-height",padding:"--elf--radio-padding",borderRadius:"--elf--radio-border-radius"};class Y extends t.UIElement{template(){const{disabled:o,style:e={},value:s,content:l,name:r,checked:n=!1,onChange:c}=this.props,a={class:t.classnames(["elf--radio",{disabled:o}]),style:{...g(e,W)}};return t.createElementJsx("div",{...a},t.createElementJsx("label",null,t.createElementJsx("input",{ref:"$input",type:"radio",value:s,name:r,disabled:o?"disabled":void 0,checked:n?"checked":void 0,onChange:d=>c==null?void 0:c(d,s)}),l))}}class Pe extends t.UIElement{template(){const{disabled:o,style:e={},name:s,value:l,onChange:r,content:n}=this.props,c={class:t.classnames(["elf--radio-group"]),disabled:o?"disabled":void 0,style:{...g(e,W)}};return t.createElementJsx("div",{...c},n.map((a,d)=>t.createElementJsx(Y,{ref:`$${d}`,name:s,value:a.props.value,onChange:(u,m)=>{this.setState({value:m},!1),r(u,m)},checked:a.props.value===l,disabled:o},a.props.content)))}get value(){return this.state.value||this.props.value}set value(o){this.setState({value:o})}}const X={borderColor:"--elf--checkbox-border-color",backgroundColor:"--elf--checkbox-background",disabledColor:"--elf--checkbox-disabled-color",color:"--elf--checkbox-color",fontSize:"--elf--checkbox-font-size",fontWeight:"--elf--checkbox-font-weight",height:"--elf--checkbox-height",padding:"--elf--checkbox-padding",borderRadius:"--elf--checkbox-border-radius"};class q extends t.UIElement{template(){const{disabled:o,style:e={},value:s,content:l,name:r,checked:n=!1,onChange:c}=this.props,a={class:t.classnames(["elf--checkbox",{disabled:o}]),style:{...g(e,X)}};return t.createElementJsx("div",{...a},t.createElementJsx("label",null,t.createElementJsx("input",{ref:"$input",type:"checkbox",value:s,name:r,disabled:o?"disabled":void 0,checked:n?"checked":void 0,onChange:d=>c==null?void 0:c(d,s)}),l))}get checked(){return this.refs.$input.checked()}get value(){return this.props.value}}class _e extends t.UIElement{initState(){return{value:this.props.value||[]}}template(){const{disabled:o,style:e={},value:s,options:l=[],onChange:r}=this.props,n={class:t.classnames(["elf--check-group"]),disabled:o?"disabled":void 0,style:{...g(e,X)}};return t.createElementJsx("div",{...n},l.map((c,a)=>t.createElementJsx(q,{ref:`$${a}`,value:c.value,onChange:d=>{r(d,this.getValues())},checked:s.includes(c.value),disabled:o},c.label)))}getValues(){const o=[];return this.eachChildren(e=>{e.checked&&o.push(e.value)}),o}get disabled(){return this.props.disabled}get value(){return this.getValues()}set value(o=[]){this.setState({values:o})}}const Ae={color:"--elf--divider-color",margin:"--elf--divider-margin"};class Le extends t.UIElement{template(){const{style:o={},type:e="default",margin:s="10px 0"}=this.props,l={class:t.classnames("elf--divider",{[e]:!0}),style:{...g({...o,margin:s},Ae)}};return t.createElementJsx("div",{...l},t.createElementJsx("div",{className:"elf--divider-inner"}))}}const M={DIVIDER:"divider",GROUP:"group",MENU:"menu",ITEM:"item",CUSTOM:"custom"};function Ve(i=[],o){return i.map((e,s)=>{const l=`${e.type||"item"}${s}`;return t.isString(e)&&e==="-"?t.createElementJsx(Z,{ref:l,rootClose:o}):t.isFunction(e)?t.createElementJsx(Q,{ref:`custom${s}`,render:e,rootClose:o}):e.type===M.CUSTOM?t.createElementJsx(Q,{ref:l,...e,rootClose:o}):e.type===M.GROUP?t.createElementJsx(Ke,{ref:l,...e,rootClose:o}):e.type===M.DIVIDER?t.createElementJsx(Z,{ref:l,...e,rootClose:o}):t.createElementJsx(Ne,{ref:l,...e,rootClose:o})})}function Z({dashed:i=!1}){return t.createElementJsx("li",{class:"divider",dashed:i})}function Q({render:i,rootClose:o}){return t.createElementJsx("li",{class:"custom"},i==null?void 0:i({rootClose:o}))}function Ke({title:i=""}){return t.createElementJsx("li",{class:"section-title"},i)}class Ne extends t.UIElement{initState(){const{title:o="",hover:e=!1,shortcut:s,icon:l,items:r=[],disabled:n=!1,selectable:c,selected:a,selectedIcon:d="\u2713",closable:u=!0,rootClose:m}=this.props;return{title:o,hover:e,shortcut:s,icon:l,items:r,selectable:c,selected:a,selectedIcon:d,disabled:n,closable:u,rootClose:m}}template(){const{title:o="",shortcut:e,icon:s="\u25B6",items:l=[],hover:r,selected:n,selectable:c,selectedIcon:a,disabled:d,rootClose:u}=this.state,m=l.length>0,p=t.isFunction(n)?n():n;return t.createElementJsx("li",{class:t.classnames({hover:r}),disabled:d?!0:void 0},c?t.createElementJsx("span",{class:"selected-icon"},p?a:void 0):null,o?t.createElementJsx("div",{class:"menu-title"},o):void 0,e?t.createElementJsx("div",{class:"shortcut"},e):void 0,s&&m?t.createElementJsx("div",{class:"icon"},s):void 0,l.length>0?t.createElementJsx(R,{items:l,rootClose:u}):void 0)}checkClickable(){if(this.state.disabled)return!1;const{type:o=M.ITEM,items:e=[]}=this.props;return o===M.ITEM&&e.length===0}[t.CLICK("$el")+t.IF("checkClickable")+t.PREVENT+t.STOP](o){var r,n;const{selectable:e=!1,onClick:s,closable:l=!0}=this.props;e&&this.setSelected(!this.selected),t.isFunction(s)&&s(o,this),l&&((n=(r=this.props).rootClose)==null||n.call(r))}setSelected(o=!1){this.setState({selected:o})}get selected(){return this.state.selected}}const je={left:"--elf--menu-left",top:"--elf--menu-top",backgroundColor:"--elf--menu-background",color:"--elf--menu-color",fontSize:"--elf--menu-font-size",fontWeight:"--elf--menu-font-weight",height:"--elf--menu-height",padding:"--elf--menu-padding",borderRadius:"--elf--menu-border-radius",borderColor:"--elf--menu-border-color",boxShadow:"--elf--menu-box-shadow",width:"--elf--menu-width",maxWidth:"--elf--menu-max-width",sectionTitleColor:"--elf--menu-section-title-color",sectionTitleBackgroundColor:"--elf--menu-section-title-background-color",dividerColor:"--elf--menu-divider-color",directionLeft:"--elf--menu-direction-left",itemPadding:"--elf--menu-item-padding"};class R extends t.UIElement{initState(){return{intersectionLeft:0}}template(){let{style:o={},type:e="menu",x:s=0,y:l=0,direction:r="left",items:n=[],rootClose:c,autoPosition:a=!1}=this.props,d={...o};if(s!==0&&(d={...d,left:s}),l!==0&&(d={...d,top:l}),a){const m=n.findIndex(p=>p.selectable&&p.selected);d={...d,top:-1*(m*24+8)}}const u={"data-direction":r,class:t.classnames("elf--menu",{"elf--menu-contextmenu":e==="contextmenu"}),style:{...g(d,je)}};return t.createElementJsx("menu",{...u,onContextMenu:m=>m.preventDefault()},Ve(n,c))}[t.OBSERVER("intersection")+t.PARAMS({root:document.body})](o=[]){const e=o.find(s=>s.isIntersecting&&s.intersectionRatio<1);if(e){const{left:s,right:l}=e.boundingClientRect,{left:r,right:n}=e.intersectionRect;let c="left";n!=l&&r!=s?c="center":n!=l&&(c="right"),this.$el.attr("data-direction",c)}}}function ee(){return t.createElementJsx("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},t.createElementJsx("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}))}class A extends t.UIElement{template(){const{icon:o,content:e,items:s,menuStyle:l={},disabled:r=void 0,autoPosition:n=!1}=this.props,{isOpen:c}=this.state,a=c&&s;return t.createElementJsx("div",{class:"elf--option-menu",disabled:r},t.createElementJsx("div",{class:"content",onClick:()=>{this.setState({isOpen:!this.state.isOpen})}},o?t.createElementJsx("div",{class:"elf--option-menu-icon"},o):void 0,t.createElementJsx("div",{class:"text"},e),t.createElementJsx("div",{class:"arrow"},t.createElementJsx(ee,null))),a?t.createElementJsx("div",{class:"menu-area"},t.createElementJsx(R,{autoPosition:n,rootClose:()=>{this.close()},style:l,items:s})):void 0)}close(){this.setState({isOpen:!1})}checkClickable(o){return!t.Dom.create(o.target).closest("menu-area")}checkNotInMenu(o){const e=t.Dom.create(o.target).closest("elf--option-menu");return e?this.$el.is(e)===!1:!0}[t.CLICK("document")+t.IF("checkClickable")+t.IF("checkNotInMenu")](){this.close()}}class He extends t.UIElement{initState(){return{value:this.props.value}}template(){const{disabled:o,style:e={},selectedValue:s,options:l=[],onChange:r}=this.props,n={class:"elf--option-strip",disabled:o?"disabled":void 0,style:{...g(e,{})}};return t.createElementJsx("div",{...n},l.map(c=>t.createElementJsx("button",{type:"button",class:t.classnames("elf--option-strip-item",{selected:s===c.value}),onClick:()=>r==null?void 0:r(c.value)},c.icon)))}}const ze={position:"--elf--dialog-position",backgroundColor:"--elf--dialog-background",color:"--elf--dialog-color",fontSize:"--elf--dialog-font-size",fontWeight:"--elf--dialog-font-weight",height:"--elf--dialog-height",padding:"--elf--dialog-padding",borderRadius:"--elf--dialog-border-radius",borderColor:"--elf--dialog-border-color",boxShadow:"--elf--dialog-box-shadow",width:"--elf--dialog-width"};class Ge extends t.UIElement{initState(){const{visible:o=!1,style:e={},center:s}=this.props;return{visible:o,style:e,center:s}}close(){const{onClose:o}=this.props;t.isFunction(o)&&o(this)}ok(){const{onOk:o}=this.props;t.isFunction(o)&&o(this)}cancel(){const{onCancel:o}=this.props;t.isFunction(o)&&o(this)}makeDefaultTools(){const{footer:o,cancelText:e="Cancel",okText:s="OK"}=this.props;return o?"":[t.createElementJsx(O,{onClick:()=>this.cancel()},e),t.createElementJsx(O,{type:"primary",onClick:()=>this.ok()},s)]}template(){const{style:o={},visible:e,center:s}=this.state,l={class:t.classnames("elf--dialog",{visible:e,center:s}),style:{...g(o,ze)}};return t.createElementJsx("div",{...l},t.createElementJsx("div",{class:"elf--dialog-title"},t.createElementJsx("div",{class:"elf--dialog-title-text"},"Dialog"),t.createElementJsx("div",{class:"elf--dialog-title-tools",ref:"$tools"},this.props.tools||void 0),t.createElementJsx("div",{class:"elf--dialog-title-close",ref:"$close"},"\xD7")),t.createElementJsx("div",{class:"elf--dialog-content"},t.createElementJsx("div",{class:"elf--dialog-text"},this.props.content||""),t.createElementJsx("div",{class:"elf--dialog-content-tools"},this.props.footer?this.props.footer:this.makeDefaultTools())))}[t.CLICK("$close")](){this.close()}}class $ extends t.UIElement{template(){const{style:o={},class:e="",content:s,stack:l,wrap:r=!1}=this.props,n={class:t.classnames("elf--flex",e,{stack:l,wrap:r}),style:{...g(o,{})}};return t.createElementJsx("div",{...n},s)}}class We extends ${template(){const{style:o={},content:e}=this.props;return t.createElementJsx($,{stack:!0,style:o},e)}}const te={MENU:"menu",ITEM:"item",CUSTOM:"custom"};function Ye(i=[]){return i.map((o,e)=>{const s=`${o.type}-${e}`;return o.type===te.CUSTOM?t.createElementJsx(oe,{ref:s,...o}):o.type===te.MENU?t.createElementJsx(se,{ref:s,...o}):t.createElementJsx(L,{ref:s,...o})})}class L extends t.UIElement{initialize(){super.initialize();const o=this.props.events||[];o.length&&o.forEach(e=>{this.on(e,()=>{this.refresh()})})}initState(){const{title:o="",icon:e,selected:s}=this.props;return{title:o,icon:e,selected:s}}template(){const{title:o="",icon:e}=this.state;return t.createElementJsx("div",{class:t.classnames("elf--tools-item",{selected:this.selected?!0:void 0}),onClick:this.props.onClick},t.createElementJsx("button",{type:"button"},t.createElementJsx($,{style:{columnGap:4}},[e?t.createElementJsx("span",{class:"icon"},t.isFunction(e)?e():e):void 0,o?t.createElementJsx("span",{class:"menu-title"},t.isFunction(o)?o():o):void 0].filter(Boolean))))}setSelected(o=!1){this.setState({selected:o})}get selected(){return t.isFunction(this.state.selected)?this.state.selected():this.state.selected}set selected(o){this.setSelected(o)}}class oe extends L{template(){var o,e;return t.createElementJsx("div",{class:"elf--tools-item custom"},(e=(o=this.props).render)==null?void 0:e.call(o))}}class se extends L{initState(){const{title:o="",icon:e,selected:s,disabled:l,opened:r,items:n,direction:c,menuStyle:a}=this.props;return{title:o,icon:e,selected:s,opened:r,items:n,direction:c,disabled:l,menuStyle:a,rootClose:this.close.bind(this)}}template(){const{title:o="",icon:e,disabled:s,selected:l,items:r=[],opened:n=!1,direction:c="left",menuStyle:a}=this.state,d=r.length>0,u=l?t.isFunction(l)?l():l:void 0;return t.createElementJsx("div",{class:t.classnames("elf--tools-item",{selected:u,"has-items":d}),disabled:s},t.createElementJsx("button",{type:"button"},t.createElementJsx($,{style:{columnGap:4}},[e?t.createElementJsx("span",{class:"icon"},t.isFunction(e)?e():e):void 0,o?t.createElementJsx("span",{class:"menu-title"},t.isFunction(o)?o():o):void 0].filter(Boolean)),d?t.createElementJsx("span",{class:t.classnames("arrow",{opened:n})},t.createElementJsx(ee,null)):void 0),n&&!s?t.createElementJsx("div",{class:"menu-area",style:{backgroundColor:"yellow"}},t.createElementJsx("div",{class:"background","data-direction":c}),t.createElementJsx("div",{class:"arrow"}),t.createElementJsx(R,{ref:"$menu",items:r,direction:c,rootClose:this.state.rootClose,style:{...a||{},top:"calc(100% + 5px)"}})):void 0)}runCallback(o,e){t.isFunction(o)&&o(e,this)}open(){this.state.opened||this.setState({rect:this.$el.rect(),opened:!0})}close(){this.state.opened&&this.setState({opened:!1})}toggle(){this.state.opened?this.close():(this.setState({rect:this.$el.rect()},!1),this.open())}checkClickable(o){return!t.Dom.create(o.target).closest("menu-area")}checkTriggerClick(){const{trigger:o="click",onClick:e}=this.props;return o==="click"||o==="hover"&&t.isFunction(e)}checkTriggerOver(){return this.props.trigger==="hover"}[t.POINTEROVER("$el")+t.IF("checkTriggerOver")](){this.open()}checkNotInMenu(o){const e=t.Dom.create(o.target).closest("elf--tools-item");return e?this.$el.is(e)===!1:!0}[t.POINTERLEAVE("$el")+t.IF("checkTriggerOver")](){this.close()}[t.CLICK("document")+t.IF("checkClickable")+t.IF("checkNotInMenu")](){this.close()}[t.CLICK("$el")+t.IF("checkClickable")+t.IF("checkTriggerClick")](o){t.Dom.create(o.target).hasClass("arrow")?(this.toggle(),this.state.opened?this.runCallback(this.props.onOpen,o):this.runCallback(this.props.onClose,o),this.runCallback(this.props.onClick,o)):(this.close(),this.runCallback(this.props.onClick,o))}}const Xe=v("--elf--tools",{backgroundColor:!0,color:!0,height:!0});class le extends t.UIElement{template(){const{style:o={}}=this.props,e={class:t.classnames("elf--tools"),style:{...g(o,Xe)}};return t.createElementJsx("div",{...e,onContextMenu:s=>s.preventDefault()},Ye(this.props.items))}}function qe(i=[]){return i.map((o,e)=>{const s=`${o.type||"item"}${e}`;return t.createElementJsx(re,{ref:s,...o})})}class re extends t.UIElement{template(){const{items:o,style:e}=this.props;return t.createElementJsx("div",{class:"elf--toolbar-item"},t.createElementJsx(le,{ref:"$tools",items:o,style:e}))}}const Ze=v("--elf--toolbar",{backgroundColor:!0,color:!0,height:!0,align:!0});class Qe extends t.UIElement{template(){const{style:o={},align:e,items:s=[]}=this.props,l={class:t.classnames("elf--toolbar",{[e]:!0}),style:{...g(o,Ze)}};return t.createElementJsx("div",{...l,onContextMenu:r=>r.preventDefault()},qe(s))}}const et={backgroundColor:"--elf--notification-background",color:"--elf--notification-color",height:"--elf--notification-height",hoverColor:"--elf--notification-hover-color",borderColor:"--elf--notification-border-color",boxShadow:"--elf--notification-box-shadow",toolsBorderColor:"--elf--notification-tools-border-color",toolsBorderRadius:"--elf--notification-tools-border-radius"};class tt extends t.UIElement{template(){const{style:o={},icon:e,content:s,tools:l,direction:r="top-left"}=this.props,n={class:t.classnames("elf--notification",`elf--notification-direction-${r}`),style:{...g(o,et)}};return t.createElementJsx("div",{...n,onContextMenu:c=>c.preventDefault()},e?t.createElementJsx("div",{class:"elf--notification-icon"},e):void 0,t.createElementJsx("div",{class:"elf--notification-content"},t.createElementJsx("div",{class:"elf--notification-text"},s)),t.createElementJsx("div",{class:"elf--notification-tools"},l||[]))}}const ot=v("--elf--visual-bell",{backgroundColor:!0,color:!0,height:!0,hoverColor:!0,borderColor:!0,boxShadow:!0,toolsBorderColor:!0,toolsBorderRadius:!0,hgap:!0,vgap:!0});class ne extends t.UIElement{template(){const{style:o={},content:e,delay:s=0,direction:l="bottom"}=this.props,[r,n]=t.useState(s),[c,a]=t.useState(!1);this.state.hideCallback=t.useCallback((u=0)=>{n(u)},[n]);const d={class:t.classnames("elf--visual-bell",`elf--visual-bell-direction-${l}`,{hide:c}),style:{...g(o,ot),transition:`opacity ${r}ms ease-in-out`,opacity:c?0:1}};return t.useEffect(()=>{r>0&&(c||this.props.onShow&&this.props.onShow(),setTimeout(()=>{c||a(!0)},r))},[r,c]),t.createElementJsx("div",{class:"elf--visual-bell",...d,onContextMenu:u=>u.preventDefault(),onTransitionEnd:()=>{this.props.onHide&&this.props.onHide(),this.destroy(!0)}},t.createElementJsx("div",{class:"elf--visual-bell-content"},t.createElementJsx("div",{class:"elf--visual-bell-text"},e)),t.createElementJsx("div",{class:"elf--visual-bell-tools"},this.props.tools||[]))}hide(o=0){var e;(e=this.state)==null||e.hideCallback(o)}}function st({content:i="",delay:o=0,direction:e="bottom",tools:s=[],options:l={},style:r={}}){return t.potal(t.createElementJsx(ne,{delay:o,direction:e,tools:s,style:r},i),l)}const lt=v("--elf--tooltip",{backgroundColor:!0,color:!0,height:!0,hoverColor:!0,borderColor:!0,boxShadow:!0,toolsBorderColor:!0,toolsBorderRadius:!0,hgap:!0,vgap:!0,delay:!0});class rt extends t.UIElement{initState(){return{trigger:this.props.trigger||"hover",show:this.props.show||!1}}template(){const{style:o={},message:e="",content:s,position:l="bottom"}=this.props,{show:r}=this.state,n={class:t.classnames("elf--tooltip",`elf--tooltip-position-${l}`),style:{...g(o,lt)}};return t.createElementJsx("div",{class:"elf--tooltip",...n},t.createElementJsx("div",{class:"elf--tooltip-content"},s),r||this.props.show?t.createElementJsx("div",{class:"elf--tooltip-message"},t.createElementJsx("div",{class:"arrow"}),t.createElementJsx("div",{class:"elf--toolltip-message-content"},e)):void 0)}open(){this.setState({show:!0})}close(){this.setState({show:!1})}toggle(){this.setState({show:!this.state.show})}checkClickable(o){return!t.Dom.create(o.target).closest("elf--tooltip")}checkTriggerClick(){return this.state.trigger==="click"}checkTriggerOver(){return this.state.trigger==="hover"}[t.POINTERENTER("$el")+t.IF("checkTriggerOver")](){this.open()}checkNotInTooltip(o){const e=t.Dom.create(o.target).closest("elf--tooltip");return e?this.$el.is(e)===!1:!0}[t.POINTERLEAVE("$el")+t.IF("checkTriggerOver")](){this.close()}[t.CLICK("$el")+t.IF("checkClickable")+t.IF("checkTriggerClick")](){this.toggle()}}const nt={backgroundColor:"--elf--panel-background",color:"--elf--panel-color",height:"--elf--panel-height",hoverColor:"--elf--panel-hover-color",borderColor:"--elf--panel-border-color",boxShadow:"--elf--panel-box-shadow",padding:"--elf--panel-padding",borderRadius:"--elf--panel-border-radius"};class it extends t.UIElement{template(){const{style:o={},content:e,theme:s,title:l="",tools:r=[],mode:n,footer:c}=this.props,a={class:t.classnames("elf--panel",`elf--panel-mode-${n}`),"data-theme":s,style:{...g(o,nt)}};return t.createElementJsx("div",{...a},l?t.createElementJsx("div",{class:"elf--panel-title"},t.createElementJsx("div",{class:"elf--panel-title-text"},l),r?t.createElementJsx("div",{class:"elf--panel-title-tools"},r||[]):void 0):void 0,t.createElementJsx("div",{class:"elf--panel-content"},e),c?t.createElementJsx("div",{class:"elf--panel-footer"},c):void 0)}}const ct=v("--elf--tabstrip",{backgroundColor:!0,color:!0,height:!0,width:!0,hoverColor:!0,borderColor:!0,hgap:!0,vgap:!0,delay:!0});class ie extends t.UIElement{template(){var n;const{style:o={},items:e=[],fitted:s,align:l="left"}=this.props,r={class:t.classnames("elf--tabstrip",{"is-fitted":s}),style:{...g(o,ct)}};return t.createElementJsx("div",{...r},t.createElementJsx("div",{class:t.classnames("elf--tabstrip-content",{[`align-${l}`]:!0})},e.map(c=>{const a=!!c.selected,d=!!c.disabled,u=c.selectedStyle||{},m=c.style||{};return t.createElementJsx("div",{class:t.classnames("elf--tabstrip-item",{selected:a,disabled:d}),style:a?u:m},t.createElementJsx("div",{onClick:c.onClick},c.title))})),(n=this.props.tools)!=null&&n.length?t.createElementJsx("div",{class:"elf--tabstrip-tools"},this.props.tools.map(c=>t.createElementJsx("div",{class:"elf--tabstrip-tool"},c))):void 0)}}const at=v("--elf--tab",{backgroundColor:!0,color:!0,height:!0,width:!0,hoverColor:!0,borderColor:!0});function ce({selected:i,content:o}){return t.createElementJsx("div",{class:t.classnames("elf--tab-content-item",{selected:i})},o)}class dt extends t.UIElement{initState(){return{activeKey:this.props.activeKey}}changeActiveKey(o){const{onChange:e}=this.props;this.setState({activeKey:o}),t.isFunction(e)&&e(o)}template(){const{style:o={},content:e,full:s,fitted:l,align:r="left"}=this.props,{activeKey:n}=this.state,c={class:t.classnames("elf--tab",{full:s}),style:g(o,at)};return t.createElementJsx("div",{...c},t.createElementJsx("div",{class:"elf--tab-header"},t.createElementJsx(ie,{fitted:l,align:r,items:e.map(a=>{const{title:d,key:u,onClick:m,disabled:p,style:y,selectedStyle:b}=a.props;return{title:d,style:y,disabled:p,selectedStyle:b,selected:u===n,onClick:()=>{this.changeActiveKey(u),m&&m()}}})})),t.createElementJsx("div",{class:"elf--tab-body"},e.map(a=>{const{key:d,content:u,disabled:m}=a.props,p=d===n;return t.createElementJsx(ce,{key:d,selected:p,disabled:m},u)})))}}class ut extends t.UIElement{template(){const{style:o={},content:e,wrap:s=!1}=this.props,l={class:t.classnames("elf--layout",{stack:this.props.stack,wrap:s}),style:{...g(o,{backgroundColor:"--elf--layout-background-color",gap:"--elf--layout-gap"})}};return t.createElementJsx("div",{...l},e)}}function ae(i){if(typeof i=="number"?i=Array.from({length:i},()=>1):Array.isArray(i)===!1&&(i=[i]),i.length!==0)return i.map(o=>t.isNumber(o)?`${o}fr`:o).join(" ")}class D extends t.UIElement{template(){const{class:o="",style:e={},columns:s=[],rows:l=[],gap:r,columnGap:n,rowGap:c,content:a,...d}=this.props,{style:u,noneStyle:m}=w(d),p={class:t.classnames("elf--grid",o),style:{gridTemplateColumns:ae(s),gridTemplateRows:ae(l),gap:r,columnGap:n,rowGap:c,...g({...e,...u},{})},...m};return t.createElementJsx("div",{...p},a)}}const ht=v("--elf--input-editor",{borderColor:!0,backgroundColor:!0,disabledColor:!0,color:!0,fontSize:!0,fontWeight:!0,height:!0,padding:!0,borderRadius:!0,placeholderColor:!0,emptyColor:!0});class de extends t.UIElement{initState(){const{style:o={},type:e="text",autoFocus:s=!1,focused:l,hover:r=!1,value:n,placeholder:c,disabled:a}=this.props;return{style:o,type:e,autoFocus:s,hover:r||!1,focused:l||!1,placeholder:c,value:n,disabled:a}}template(){const{icon:o,tools:e}=this.props,{style:s={},type:l="text",focused:r=!1,hover:n=!1,value:c,placeholder:a,disabled:d}=this.state,u={class:t.classnames(["elf--input-editor",{focused:r,hover:n,disabled:d,icon:o}]),style:{...g(s,ht)}},m={onInput:this.props.onInput,onChange:this.props.onChange,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp,onKeyPress:this.props.onKeyPress,onSelect:this.props.onSelect,onPaste:this.props.onPaste,onCut:this.props.onCut,onCopy:this.props.onCopy},p={type:l,disabled:d,placeholder:a||"",value:c||""};return t.createElementJsx("div",{...u},o?t.createElementJsx("div",{class:"elf--input-editor-icon"},o):void 0,t.createElementJsx("div",{class:"elf--input-area"},t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",{ref:"$input",...p,...m}))),e||void 0)}onMounted(){this.state.autoFocus&&setTimeout(()=>{this.refs.$input.focus(),this.refs.$input.select()},10)}runCallback(o,e){t.isFunction(o)&&o(e,this)}[t.FOCUSIN("$input")](o){this.setState({focused:!0}),this.runCallback(this.props.onFocus,o)}[t.FOCUSOUT("$input")](o){this.setState({focused:!1}),this.runCallback(this.props.onBlur,o)}get value(){return this.refs.$input.value}set value(o){this.refs.$input.value=o}get selectedValue(){return document.getSelection().toString()}}function V({color:i}){const o=f.parse(i),{r:e,g:s,b:l}=o;return t.createElementJsx("div",{class:"elf--color-view"},t.createElementJsx("div",{class:"elf--color-view-color",style:{backgroundColor:f.format({r:e,g:s,b:l},"rgb")}}),t.createElementJsx("div",{class:"elf--color-view-opacity-pattern"},t.createElementJsx("div",{class:"elf--color-view-opacity",style:{backgroundColor:f.format(o,"rgb")}})))}const mt=v("--elf--input-paint",{borderColor:!0,backgroundColor:!0,disabledColor:!0,color:!0,fontSize:!0,fontWeight:!0,height:!0,padding:!0,borderRadius:!0,placeholderColor:!0,emptyColor:!0});class ue extends t.UIElement{constructor(){super(...arguments);E(this,"keyup",e=>{switch(e.preventDefault(),e.key){case"ArrowUp":this.increaseOpacity(e);break;case"ArrowDown":this.decreaseOpacity(e);break}})}initState(){const{style:e={},autoFocus:s=!1,focused:l,hover:r=!1,value:n,placeholder:c,disabled:a,hasOpacity:d=!0}=this.props,u=f.parse(n);return{style:e,autoFocus:s,hover:r||!1,focused:l||!1,placeholder:c,value:n,parsedColor:u,disabled:a,hasOpacity:d}}template(){const{icon:e,hideColorView:s=!1}=this.props,{style:l={},focused:r=!1,hover:n=!1,value:c,placeholder:a,disabled:d,parsedColor:u}=this.state,m={class:t.classnames(["elf--input-paint",{focused:r,hover:n,disabled:d,icon:e}]),style:{...g(l,mt)}},p={onInput:this.props.onInput,onChange:this.props.onChange,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp,onKeyPress:this.props.onKeyPress,onSelect:this.props.onSelect,onPaste:this.props.onPaste,onCut:this.props.onCut,onCopy:this.props.onCopy},{r:y,g:b,b:C}=u,x={disabled:d,placeholder:a||"",value:f.format({r:y,g:b,b:C},"hex")};return t.createElementJsx("div",{...m},s?void 0:t.createElementJsx("div",{class:"elf--input-paint-icon"},t.createElementJsx(V,{color:c})),t.createElementJsx("div",{class:"elf--input-area"},t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",{class:"color",ref:"$input",...x,...p}))),this.state.hasOpacity&&t.createElementJsx("div",{class:"elf--input-opacity"},t.createElementJsx("input",{class:"opacity",value:`${u.a*100}%`,onKeyUp:this.keyup})))}updateOpacity(e){this.setState({parsedColor:{...this.state.parsedColor,a:this.state.parsedColor.a+e}})}increaseOpacity(){this.updateOpacity(.01)}decreaseOpacity(){this.updateOpacity(-.01)}onMounted(){super.onMounted(),this.state.autoFocus&&setTimeout(()=>{this.refs.$input.focus(),this.refs.$input.select()},10)}runCallback(e,s){t.isFunction(e)&&e(s,this)}[t.CLICK("$el .elf--input-paint-icon")](e){var s,l;(l=(s=this.props).onClickColorView)==null||l.call(s,e)}[t.FOCUSIN("$el input")](e){this.setState({focused:!0}),e.target.select(),this.runCallback(this.props.onFocus,e)}[t.FOCUSOUT("$el input")](e){this.setState({focused:!1}),this.runCallback(this.props.onBlur,e)}get value(){return this.refs.$input.value}set value(e){this.refs.$input.value=e}get selectedValue(){return document.getSelection().toString()}}const ft=v("--elf--input-paint",{borderColor:!0,backgroundColor:!0,disabledColor:!0,color:!0,fontSize:!0,fontWeight:!0,height:!0,padding:!0,borderRadius:!0,placeholderColor:!0,emptyColor:!0});class he extends t.UIElement{constructor(){super(...arguments);E(this,"keydownColor",e=>{const s=Math.floor(e.target.selectionStart/2)*2;let l="";switch(s<2?l="r":s<4?l="g":l="b",e.key){case"ArrowUp":e.preventDefault(),this.increaseColor(l),e.target.setSelectionRange(s,s+2);break;case"ArrowDown":e.preventDefault(),this.decreaseColor(l),e.target.setSelectionRange(s,s+2);break}});E(this,"keyupColor",e=>{if(!(e.key==="ArrowUp"||e.key==="ArrowDown")){if(e.target.value.length===3||e.target.value.length===6){const s=f.parse("#"+e.target.value);s.type==="hex"&&this.isInvalidColor(s)===!1&&this.updateFullColor(s)}}});E(this,"keydown",e=>{switch(e.preventDefault(),e.stopPropagation(),e.key){case"ArrowUp":this.increaseOpacity(e),e.target.select();break;case"ArrowDown":this.decreaseOpacity(e),e.target.select();break}})}initState(){const{style:e={},autoFocus:s=!1,focused:l,hover:r=!1,value:n,placeholder:c,disabled:a,hasOpacity:d=!0}=this.props,u=f.parse(n);return{style:e,autoFocus:s,hover:r||!1,focused:l||!1,placeholder:c,value:n,parsedColor:u,disabled:a,hasOpacity:d}}template(){const{icon:e,value:s}=this.props,{style:l={},focused:r=!1,hover:n=!1,placeholder:c,disabled:a}=this.state,{r:d,g:u,b:m,a:p}=f.parse(s),y={class:t.classnames(["elf--input-paint",{focused:r,hover:n,disabled:a,icon:e,invalid:this.isInvalidColor({r:d,g:u,b:m,a:p})}]),style:{...g(l,ft)}},b={onInput:this.props.onInput,onChange:this.props.onChange,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp,onKeyPress:this.props.onKeyPress,onSelect:this.props.onSelect,onPaste:this.props.onPaste,onCut:this.props.onCut,onCopy:this.props.onCopy},C={disabled:a,placeholder:c||"",value:f.format({r:d,g:u,b:m},"hex").replace("#","")};return this.setState({parsedColor:{r:d,g:u,b:m,a:p}},!1),t.createElementJsx("div",{...y},t.createElementJsx("div",{class:"elf--input-area"},t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",{class:"color",type:"text","data-type":"hex",maxlength:6,...C,...b,onKeyDown:this.keydownColor,onKeyUp:this.keyupColor}))),this.state.hasOpacity&&t.createElementJsx("div",{class:"elf--input-opacity"},t.createElementJsx("input",{class:"opacity",value:`${Math.round(p*100*100)/100}%`,onKeyDown:this.keydown})))}updateOpacity(e){this.setState({parsedColor:{...this.state.parsedColor,a:Math.max(0,Math.min(1,Math.round((this.state.parsedColor.a+e)*100)/100))}},!1),this.runCallback(this.props.onChange)}updateFullColor(e){this.setState({parsedColor:e},!1),this.runCallback(this.props.onChange)}updateColor(e,s){const l=Math.max(0,Math.min(255,this.state.parsedColor[e]+s));this.state.parsedColor[e]!==l&&(this.setState({parsedColor:{...this.state.parsedColor,[e]:Math.max(0,Math.min(255,this.state.parsedColor[e]+s))}},!1),this.runCallback(this.props.onChange))}increaseColor(e){this.updateColor(e,1)}decreaseColor(e){this.updateColor(e,-1)}increaseOpacity(){this.updateOpacity(.01)}decreaseOpacity(){this.updateOpacity(-.01)}isInvalidColor(e){return isNaN(e.r)||isNaN(e.g)||isNaN(e.b)||isNaN(e.a)||t.isUndefined(e.r)||t.isUndefined(e.g)||t.isUndefined(e.b)||t.isUndefined(e.a)}onMounted(){this.state.autoFocus&&setTimeout(()=>{const e=this.$el.$("input[data-type='hex']");e.focus(),e.select()},10)}runCallback(e,s){t.isFunction(e)&&e(this.value,this)}[t.CLICK("$el .elf--input-paint-icon")](e){var s,l;(l=(s=this.props).onClickColorView)==null||l.call(s,e)}[t.FOCUSIN("$el input")](e){this.setState({focused:!0}),e.target.select(),this.runCallback(this.props.onFocus,e)}[t.FOCUSOUT("$el input")](e){this.setState({focused:!1}),this.runCallback(this.props.onBlur,e)}get value(){const{parsedColor:e}=this.state,{r:s,g:l,b:r,a:n}=e;return f.format({r:s,g:l,b:r,a:n},"hex")}set value(e){this.refs.$input.value=e}get selectedValue(){return document.getSelection().toString()}}const pt=v("--elf--input-paint",{borderColor:!0,backgroundColor:!0,disabledColor:!0,color:!0,fontSize:!0,fontWeight:!0,height:!0,padding:!0,borderRadius:!0,placeholderColor:!0,emptyColor:!0});class me extends t.UIElement{constructor(){super(...arguments);E(this,"keydownColor",e=>{switch(e.key){case"ArrowUp":e.preventDefault(),this.increaseColor(e.target.getAttribute("data-type")),e.target.select();break;case"ArrowDown":e.preventDefault(),this.decreaseColor(e.target.getAttribute("data-type")),e.target.select();break}});E(this,"keydown",e=>{switch(e.key){case"ArrowUp":e.preventDefault(),this.increaseOpacity(e),e.target.select();break;case"ArrowDown":e.preventDefault(),this.decreaseOpacity(e),e.target.select();break;case"Tab":e.preventDefault();var s=this.$el.$("input[data-type='r']");s.focus(),s.select();break}})}initState(){const{style:e={},autoFocus:s=!1,focused:l,hover:r=!1,placeholder:n,disabled:c,hasOpacity:a=!0}=this.props;return{style:e,autoFocus:s,hover:r||!1,focused:l||!1,placeholder:n,disabled:c,hasOpacity:a}}template(){const{icon:e,value:s}=this.props,{style:l={},focused:r=!1,hover:n=!1,placeholder:c,disabled:a}=this.state,d={class:t.classnames(["elf--input-paint",{focused:r,hover:n,disabled:a,icon:e}]),style:{...g(l,pt)}},{r:u,g:m,b:p,a:y}=f.parse(s),b={disabled:a,placeholder:c||"",min:0,max:255};return this.setState({parsedColor:{r:u,g:m,b:p,a:y}},!1),t.createElementJsx("div",{...d},t.createElementJsx("div",{class:"elf--input-area"},t.createElementJsx(D,{columns:3},t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",{class:"color","data-type":"r",tabIndex:1,value:u,...b,onKeyDown:this.keydownColor})),t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",{class:"color","data-type":"g",tabIndex:2,value:m,...b,onKeyDown:this.keydownColor})),t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",{class:"color","data-type":"b",tabIndex:3,value:p,...b,onKeyDown:this.keydownColor})))),this.state.hasOpacity&&t.createElementJsx("div",{class:"elf--input-opacity"},t.createElementJsx("input",{type:"text",tabIndex:4,class:"opacity",value:`${Math.round(y*100*100)/100}%`,onKeyDown:this.keydown})))}updateOpacity(e){this.setState({parsedColor:{...this.state.parsedColor,a:Math.max(0,Math.min(1,Math.round((this.state.parsedColor.a+e)*100)/100))}},!1),this.runCallback(this.props.onChange)}updateColor(e,s){this.setState({parsedColor:{...this.state.parsedColor,[e]:Math.max(0,Math.min(255,this.state.parsedColor[e]+s))}},!1),this.runCallback(this.props.onChange)}increaseColor(e){this.updateColor(e,1)}decreaseColor(e){this.updateColor(e,-1)}increaseOpacity(){this.updateOpacity(.01)}decreaseOpacity(){this.updateOpacity(-.01)}onMounted(){this.state.autoFocus&&setTimeout(()=>{const e=this.$el.$("input[data-type='r']");e.focus(),e.select()},10)}runCallback(e){t.isFunction(e)&&e(this.value,this)}[t.CLICK("$el .elf--input-paint-icon")](e){var s,l;(l=(s=this.props).onClickColorView)==null||l.call(s,e)}[t.FOCUSIN("$el input")](e){this.setState({focused:!0}),e.target.select(),this.runCallback(this.props.onFocus,e)}[t.FOCUSOUT("$el input")](e){this.setState({focused:!1}),this.runCallback(this.props.onBlur,e)}get value(){const{parsedColor:e}=this.state,{r:s,g:l,b:r,a:n}=e;return f.format({r:s,g:l,b:r,a:n},"rgb")}set value(e){this.refs.$input.value=e}get selectedValue(){return document.getSelection().toString()}}const gt=v("--elf--input-editor",{borderColor:!0,backgroundColor:!0,disabledColor:!0,color:!0,fontSize:!0,fontWeight:!0,height:!0,padding:!0,borderRadius:!0,placeholderColor:!0,emptyColor:!0});class bt extends t.UIElement{initState(){const{style:o={},focused:e,hover:s=!1,value:l,placeholder:r,disabled:n}=this.props;return{style:o,hover:s||!1,focused:e||!1,placeholder:r,value:l,disabled:n}}template(){const{icon:o}=this.props,{style:e={},focused:s=!1,hover:l=!1,value:r,placeholder:n,disabled:c}=this.state,a={class:t.classnames(["elf--input-editor","multiline",{focused:s,hover:l,disabled:c,icon:o}]),style:{...g(e,gt)}},d={onInput:this.props.onInput,onChange:this.props.onChange,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp,onKeyPress:this.props.onKeyPress,onSelect:this.props.onSelect,onPaste:this.props.onPaste,onCut:this.props.onCut,onCopy:this.props.onCopy},u={disabled:c,placeholder:n,value:r};return t.createElementJsx("div",{...a},t.createElementJsx("div",{class:"elf--input-area"},t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("textarea",{ref:"$input",...u,...d},r))))}onMounted(){this.state.autoFocus&&setTimeout(()=>{this.refs.$input.focus(),this.refs.$input.select()},10)}runCallback(o,e){t.isFunction(o)&&o(e,this)}[t.FOCUSIN("$input")](o){this.setState({focused:!0}),this.runCallback(this.props.onFocus,o)}[t.FOCUSOUT("$input")](o){this.setState({focused:!1}),this.runCallback(this.props.onBlur,o)}get value(){return this.refs.$input.value}set value(o){this.refs.$input.value=o}}const yt=v("--elf--virtual-scroll",{backgroundColor:!0,color:!0,height:!0,hoverColor:!0,borderColor:!0,boxShadow:!0,toolsBorderColor:!0,toolsBorderRadius:!0,hgap:!0,vgap:!0});class vt extends t.UIElement{initState(){return{scrollHeight:32}}template(){const{style:o={},itemHeight:e=32,items:s=[]}=this.props,l=s.length,r={class:t.classnames("elf--virtual-scroll",this.props.class),style:{...g(o,yt),"--elf--virtual-scroll-item-width":"100%","--elf--virtual-scroll-item-height":`${e}px`,"--elf--virtual-scroll-item-count":l,"--elf--virtual-scroll-panel-height":`${l*e}px`}};return t.createElementJsx("div",{...r},t.createElementJsx("div",{class:"elf--virtual-scroll-panel"},t.createElementJsx("div",{class:"elf--virtual-scroll-content-area","data-scrolling":this.state.scrolling?"true":"false"},this.makeItemView())))}refreshSize(){var e;const o=(e=this.$el)==null?void 0:e.offsetRect();o&&this.setState({width:o.width,height:o.height},!1)}onMounted(){window.setTimeout(()=>{const o=this.$el.offsetRect();this.setState({width:o.width,height:o.height})},20)}filterItems(o,e,s){return o.filter((l,r)=>r>=e&&r<=s)}makeItemView(){const{itemHeight:o,items:e,overscanRowCount:s=10}=this.props,{width:l,height:r,isRenderingItems:n}=this.state;if(!n){if(!l)return[];const c=e.length*o,a=Math.floor(r/o),d=e.length;this.setState({scrollHeight:c,itemCount:a},!1);const u=Math.max(Math.floor((this.state.scrollTop||0)/32)-s,0),m=Math.min(Math.floor(u+a+2*s),d-1);this.state.renderItems=this.filterItems(e,u,m)}return this.state.renderItems.map((c,a)=>{var d,u;return(u=(d=this.props).itemRenderer)==null?void 0:u.call(d,c,c.index*o,a,e,this)})}checkScrollTop(){const{scrollTop:o,height:e,scrollHeight:s}=this.state;return this.setState({scrollTop:this.$el.scrollTop},!1),o>s-e?(this.setState({scrolling:!1}),!1):!0}[t.SCROLL("$el")+t.IF("checkScrollTop")](){this.trigger("reloadItems")}[t.SUBSCRIBE_SELF("checkScrolling")+t.DEBOUNCE(100)](){this.setState({scrolling:!1})}[t.SUBSCRIBE_SELF("reloadItems")+t.FRAME](){this.setState({scrolling:!0}),this.trigger("checkScrolling")}refresh(){this.setState({isRenderingItems:!1},!1),this.render()}refreshItems(){this.setState({isRenderingItems:!0},!1),this.render()}scrollIntoView(o){const{itemHeight:e}=this.props,s=o*e;this.$el.scrollTop=s,this.setState({scrollTop:this.$el.scrollTop},!1),this.refreshItems()}}class Ct extends t.UIElement{template(){const{top:o,id:e,topLevel:s,group:l,selected:r,icon:n,content:c,lock:a,visible:d,lockIcon:u,lockOpenIcon:m,visibleIcon:p,isComponent:y=!1,number:b=10,onClick:C,onDoubleClick:x,onContextMenu:I,onMouseDown:S,onMouseUp:K,onMouseMove:T,onMouseEnter:N,onMouseLeave:j}=this.props;return t.createElementJsx("div",{class:"elf--virtual-scroll-item elf--layer",style:{"--elf--virtual-scroll-item-top":`${o}px`},"data-id":e,"data-number":b},t.createElementJsx("div",{class:"container","data-top-level":s?"true":void 0,"data-hidden":d?void 0:"true","data-component":y?"true":void 0,"data-selected":r?"true":void 0},t.createElementJsx("div",{class:"group"},l),n&&t.createElementJsx("div",{class:"icon"},n),t.createElementJsx("div",{class:"text",ref:"$text",onClick:C,onDoubleClick:x,onContextMenu:I,onMouseDown:S,onMouseUp:K,onMouseMove:T,onMouseEnter:N,onMouseLeave:j},c),t.createElementJsx("div",{class:"tools"},t.createElementJsx("div",{class:"lock"},a?u:m),t.createElementJsx("div",{class:"visible"},p))))}}const xt=v("--elf--input-paint",{borderColor:!0,backgroundColor:!0,disabledColor:!0,color:!0,fontSize:!0,fontWeight:!0,height:!0,padding:!0,borderRadius:!0,placeholderColor:!0,emptyColor:!0});class Et extends t.UIElement{constructor(){super(...arguments);E(this,"keydownColor",e=>{switch(e.key){case"ArrowUp":e.preventDefault(),this.increaseColor(e.target.getAttribute("data-type")),e.target.select();break;case"ArrowDown":e.preventDefault(),this.decreaseColor(e.target.getAttribute("data-type")),e.target.select();break}});E(this,"keydown",e=>{switch(e.key){case"ArrowUp":e.preventDefault(),this.increaseOpacity(e),e.target.select();break;case"ArrowDown":e.preventDefault(),this.decreaseOpacity(e),e.target.select();break;case"Tab":e.preventDefault();const s=this.$el.$("input[data-type='h']");s.focus(),s.select();break}})}initState(){const{style:e={},autoFocus:s=!1,focused:l,hover:r=!1,placeholder:n,disabled:c,hasOpacity:a=!0}=this.props;return{style:e,autoFocus:s,hover:r||!1,focused:l||!1,placeholder:n,disabled:c,hasOpacity:a}}template(){const{icon:e,value:s}=this.props,{style:l={},focused:r=!1,hover:n=!1,placeholder:c,disabled:a}=this.state,{r:d,g:u,b:m,a:p}=f.parse(s),{h:y,s:b,l:C}=f.RGBtoHSL(d,u,m),x={class:t.classnames(["elf--input-paint",{focused:r,hover:n,disabled:a,icon:e}]),style:{...g(l,xt)}},I={disabled:a,placeholder:c||"",min:0,max:255};return this.setState({parsedColor:{h:y,s:b,l:C,a:p}},!1),t.createElementJsx("div",{...x},t.createElementJsx("div",{class:"elf--input-area"},t.createElementJsx(D,{columns:3},t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",{class:"color",type:"text",tabIndex:1,"data-type":"h",value:y,...I,onKeyDown:this.keydownColor})),t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",{class:"color",type:"text",tabIndex:2,"data-type":"s",value:b,...I,onKeyDown:this.keydownColor})),t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",{class:"color",type:"text",tabIndex:3,"data-type":"l",value:C,...I,onKeyDown:this.keydownColor})))),this.state.hasOpacity&&t.createElementJsx("div",{class:"elf--input-opacity"},t.createElementJsx("input",{type:"text",tabIndex:4,class:"opacity",value:`${Math.round(p*100*100)/100}%`,onKeyDown:this.keydown})))}updateOpacity(e){this.setState({parsedColor:{...this.state.parsedColor,a:Math.max(0,Math.min(1,Math.round((this.state.parsedColor.a+e)*100)/100))}}),this.runCallback(this.props.onChange)}updateColor(e,s){const l={};e==="h"?l[e]=Math.max(0,Math.min(360,this.state.parsedColor[e]+s)):e==="s"?l[e]=Math.max(0,Math.min(100,this.state.parsedColor[e]+s)):e==="l"&&(l[e]=Math.max(0,Math.min(100,this.state.parsedColor[e]+s))),this.setState({parsedColor:{...this.state.parsedColor,...l}},!1),this.runCallback(this.props.onChange)}increaseColor(e){this.updateColor(e,1)}decreaseColor(e){this.updateColor(e,-1)}increaseOpacity(){this.updateOpacity(.01)}decreaseOpacity(){this.updateOpacity(-.01)}onMounted(){this.state.autoFocus&&setTimeout(()=>{const e=this.$el.$("input[data-type='h']");e.focus(),e.select()},10)}runCallback(e){t.isFunction(e)&&e(this.value,this)}[t.CLICK("$el .elf--input-paint-icon")](e){var s,l;(l=(s=this.props).onClickColorView)==null||l.call(s,e)}[t.FOCUSIN("$el input")](e){this.setState({focused:!0}),e.target.select(),this.runCallback(this.props.onFocus,e)}[t.FOCUSOUT("$el input")](e){this.setState({focused:!1}),this.runCallback(this.props.onBlur,e)}get value(){const{parsedColor:e}=this.state,{h:s,s:l,l:r,a:n}=e;return f.format({h:s,s:l,l:r,a:n},"hsl")}set value(e){this.refs.$input.value=e}get selectedValue(){return document.getSelection().toString()}}const kt=["hex","rgb","hsl"];function St(i){return t.createElementJsx("div",{class:"eye-dropper"},t.createElementJsx(O,{onClick:async()=>{const o=new window.EyeDropper;try{const e=await o.open();t.isFunction(i.onChange)&&i.onChange(e.sRGBHex)}catch(e){console.warn(e)}}},t.createElementJsx("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElementJsx("path",{d:"M13.4473 0.6C12.6473 -0.2 11.4473 -0.2 10.6473 0.6L7.84725 3.4L7.04725 2.7C6.64725 2.3 6.04725 2.3 5.64725 2.7C5.24725 3.1 5.24725 3.7 5.64725 4.1L6.34725 4.8L0.547255 10.6C0.147255 11 -0.452745 12.5 0.547255 13.5C1.54725 14.5 3.04725 13.9 3.44725 13.5L9.24725 7.7L9.94725 8.4C10.3473 8.8 10.9473 8.8 11.3473 8.4C11.7473 8 11.7473 7.4 11.3473 7L10.6473 6.3L13.4473 3.5C14.2473 2.6 14.2473 1.4 13.4473 0.6ZM2.54725 12.5H1.54725V11.5L7.34725 5.7L8.34725 6.7C8.24725 6.7 2.54725 12.5 2.54725 12.5Z",fill:"black","fill-opacity":"0.8"}))))}class fe extends t.UIElement{template(){const{value:o,containerClass:e,slideClass:s}=this.props;return t.createElementJsx("div",{class:`${e} slide-view`},t.createElementJsx("div",{class:`${s} slide-bg`},t.createElementJsx("div",{class:"drag-pointer",style:{"--drag-point-left":o}})))}[t.POINTERSTART("$el .slide-bg")](){this.setState({clicked:!0,rect:this.$el.$(".slide-bg").rect()},!1)}checkClicked(){return this.state.clicked}[t.POINTERMOVE("document")+t.IF("checkClicked")](o){const{onChange:e}=this.props,{x:s,width:l}=this.state.rect,r=s,n=r+l,a=(Math.min(Math.max(r,o.clientX),n)-r)/l;t.isFunction(e)&&e(a)}[t.POINTEREND("document")+t.IF("checkClicked")](){this.setState({clicked:!1},!1)}}class It extends t.UIElement{template(){const{value:o,onChange:e}=this.props;return t.createElementJsx(fe,{value:o,containerClass:"hue-slide",slideClass:"hue-slide-bg",onChange:e})}}class Jt extends t.UIElement{template(){const{value:o,onChange:e}=this.props;return t.createElementJsx(fe,{value:o,containerClass:"opacity-slide",slideClass:"opacity-slide-bg",onChange:e})}}class wt extends t.UIElement{initState(){const{type:o}=this.props;return{type:o}}makeTypedColorInput(){const{r:o,g:e,b:s,a:l,onChange:r}=this.props,{type:n}=this.state,{h:c,s:a,l:d}=f.RGBtoHSL(o,e,s);switch(n){case"hex":return t.createElementJsx("div",null,t.createElementJsx(he,{autoFocus:!0,value:f.format({r:o,g:e,b:s,a:l},"hex"),onChange:r}));case"rgb":return t.createElementJsx("div",null,t.createElementJsx(me,{autoFocus:!0,value:f.format({r:o,g:e,b:s,a:l},"rgb"),onChange:r}));case"hsl":return t.createElementJsx("div",null,t.createElementJsx(Et,{autoFocus:!0,value:f.format({h:c,s:a,l:d,a:l},"hsl"),onChange:r}))}}template(){const{type:o}=this.state,e=this.makeTypedColorInput();return t.createElementJsx("div",{class:"color-input"},t.createElementJsx(A,{autoPosition:!0,menuStyle:{width:80,itemPadding:"10px"},items:kt.map(s=>({title:s.toUpperCase(),selectable:!0,closable:!0,selected:o===s,onClick:()=>{this.setState({type:s})}}))},o.toUpperCase()),e)}}class Ot extends t.UIElement{constructor(){super(...arguments);E(this,"updateOpacity",e=>{this.setState({a:e}),this.changeColor()});E(this,"updateHueColor",e=>{e=e*360;const{s,v:l,a:r}=this.state,{r:n,g:c,b:a}=f.HSVtoRGB(e,s,l);this.setState({color:f.format({r:n,g:c,b:a},"rgb"),r:n,g:c,b:a,a:r,hueColor:f.checkHueColor(e/360),h:e,s,v:l}),this.changeColor()});E(this,"updateColor",e=>{const s=f.parse(e),{r:l,g:r,b:n,a:c}=s,{h:a,s:d,v:u}=f.RGBtoHSV(l,r,n);this.setState({color:f.format({r:l,g:r,b:n},"rgb"),r:l,g:r,b:n,a:c,hueColor:f.checkHueColor(a/360),h:a,s:d,v:u}),this.changeColor()})}initState(){const{color:e}=this.props,s=f.parse(e),{r:l,g:r,b:n,a:c}=s,{h:a,s:d,v:u}=f.RGBtoHSV(l,r,n);return{type:s.type,color:f.format({r:l,g:r,b:n},"rgb"),width:240,height:240,r:l,g:r,b:n,a:c,hueColor:f.checkHueColor(a),h:a,s:d,v:u}}template(){const{type:e,h:s,s:l,v:r,width:n,height:c,r:a,g:d,b:u,a:m,hueColor:p,color:y}=this.state,b=n*l,C=c*(1-r);return t.createElementJsx("div",{class:"elf--color-mixer"},t.createElementJsx("div",{class:"elf--color-area",style:{backgroundColor:p}},t.createElementJsx("div",{class:"saturation"},t.createElementJsx("div",{class:"value"},t.createElementJsx("div",{class:"drag-pointer",style:{backgroundColor:y,left:b,top:C}})))),t.createElementJsx("div",{class:"elf--color-slide-area"},window.EyeDropper?t.createElementJsx(St,{onChange:this.updateColor}):void 0,t.createElementJsx("div",{class:"slide"},t.createElementJsx(It,{value:s/360,onChange:this.updateHueColor}),t.createElementJsx(Jt,{r:a,g:d,b:u,value:m,onChange:this.updateOpacity}))),t.createElementJsx("div",{class:"elf--color-input-area"},t.createElementJsx(wt,{type:e,h:s,s:l,v:r,r:a,g:d,b:u,a:m,onChange:this.updateColor})))}formatedColor(){const{type:e,r:s,g:l,b:r,h:n,s:c,v:a,a:d}=this.state;let u="";switch(e){case"hex":case"rgb":u=f.format({r:s,g:l,b:r,a:d},e);break;case"hsl":var{h:m,s:p,l:y}=f.HSVtoHSL(n,c,a);u=f.format({h:m,s:p,l:y,a:d},e);break;case"hsv":u=f.format({h:n,s:c,v:a,a:d},e);break}return u}changeColor(){const{onChange:e}=this.props;let s=this.formatedColor();t.isFunction(e)&&e(s)}lastChangeColor(){const{onLastChange:e}=this.props;let s=this.formatedColor();t.isFunction(e)&&e(s)}async openEyeDropper(){const e=new window.EyeDropper;try{const s=await e.open();this.updateColor(s.sRGBHex)}catch(s){console.warn(s)}}[t.POINTERSTART("$el .elf--color-area")](e){this.setState({clicked:!0,rect:this.$el.$(".elf--color-area").rect(),clientX:e.clientX,clientY:e.clientY},!1)}checkClicked(){return this.state.clicked}[t.POINTERMOVE("document")+t.IF("checkClicked")](e){const{x:s,y:l,width:r,height:n}=this.state.rect,c=s,a=c+r,d=l,u=d+n,m=Math.min(Math.max(c,e.clientX),a),p=Math.min(Math.max(d,e.clientY),u),y=(m-c)/r,b=1-(p-d)/n;this.updateSaturationValue(y,b)}[t.POINTEREND("document")+t.IF("checkClicked")](e){this.setState({clicked:!1},!1),!(this.state.clientX===e.clientX&&this.state.clientY===e.clientY)&&this.lastChangeColor()}updateSaturationValue(e,s){const{r:l,g:r,b:n}=f.HSVtoRGB(this.state.h,e,s);this.setState({r:l,g:r,b:n,s:e,v:s,color:f.format({r:l,g:r,b:n},"rgb")}),this.changeColor()}}class Mt extends t.UIElement{initState(){return{selectedValue:this.props.selectedValue}}makeItems(){const{items:o}=this.props,{selectedValue:e}=this.state;return o.map(s=>({title:s.title,selectable:!0,closable:!0,selected:s.value===e,onClick:()=>{this.setState({selectedValue:s.value})}}))}template(){const{items:o}=this.props,{selectedValue:e}=this.state,s=o.find(l=>l.value===e)||o[0]||{title:""};return t.createElementJsx("div",{class:"elf--color-grid"},t.createElementJsx("div",{class:"elf--color-grid-header"},t.createElementJsx(A,{items:this.makeItems()},s.title)),t.createElementJsx("div",{class:"elf--color-grid-list"},s.colors.map(l=>t.createElementJsx("div",{class:"elf--color-grid-item",onClick:()=>this.selectColor(l)},t.createElementJsx(V,{color:l})))))}selectColor(o){this.setState({selectedColor:o},!1),this.props.onSelect&&this.props.onSelect(o)}}class pe extends t.UIElement{template(){const{as:o="div",style:e={},content:s,...l}=this.props,{style:r,noneStyle:n}=w(l),c={style:g({...e,...r},{}),...n};return t.createElementJsx(o,c,s)}}const $t={boxSizing:"border-box"};function Tt({item:{value:i}}){return t.createElementJsx(de,{type:"text",value:i,width:"100%",display:"block",style:$t})}function Ut({item:{value:i,key:o}}){return t.createElementJsx(pe,{as:"div",key:o},i)}function Rt({item:{gap:i,rowGap:o,columnGap:e,style:s,columns:l=[],items:r=[]},root:n}){return t.createElementJsx(D,{columns:l,gap:i,rowGap:o,columnGap:e,style:s},r.map((c,a)=>n.makeEditorItem(c,a)))}var Yt="";function Dt({item:i}){return t.createElementJsx(O,{onClick:i.onClick},i.title)}function Ft({item:{value:i,autoFocus:o}}){return t.createElementJsx(ue,{value:i,autoFocus:o})}function Bt({item:i}){return t.createElementJsx(G,{onChange:i.onChange},i.icon)}const Pt=v("--elf--data-editor",{backgroundColor:!0,color:!0,height:!0,width:!0,hoverColor:!0,borderColor:!0}),_t={title:Ut,text:Tt,grid:Rt,button:Dt,color:Ft,"toggle-button":Bt};class At extends t.UIElement{initState(){const{data:o=()=>({}),items:e=()=>[],plugins:s={}}=this.props,l=o();return{plugins:{..._t,...s},data:l,items:e(l)}}makeEditorItem(o,e){const{plugins:s}=this.state;if(typeof o=="string"){const l=s.title;return t.createElementJsx(l,{key:e,item:{value:o}})}else{const l=s[o.type];if(l)return t.createElementJsx(l,{key:o.key||e,item:o,root:this})}}template(){const{style:o={}}=this.props,{items:e}=this.state,s={class:t.classnames("elf--data-editor"),style:g(o,Pt)};return t.createElementJsx("div",{...s},e.map((l,r)=>{const n=typeof l=="string";return t.createElementJsx("div",{class:t.classnames("elf--data-editor-item",{string:n})},l.title?t.createElementJsx("div",{class:"title"},l.title):null,t.createElementJsx("div",{class:"editor"},this.makeEditorItem(l,r)))}))}}const ge={x:0,y:0},Lt={x:Number.MAX_SAFE_INTEGER,y:Number.MAX_SAFE_INTEGER},be=0;function ye(i,o){return Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2))}class Vt extends t.UIElement{initialize(){super.initialize(),this.__initBodyMoves()}__initBodyMoves(){this.__firstMove=new Set,this.__moves=new Set,this.__ends=new Set,this.__modifyBodyMoveSecond(be)}__modifyBodyMoveSecond(o=be){const e=o===0?this.__loopBodyMoves.bind(this):t.debounce(this.__loopBodyMoves.bind(this),o);this.__funcBodyMoves=e}__loopBodyMoves(){var o=this.pos,e=this.$store.get(J),s=this.lastPos||Lt,l=!(s.x===o.x&&s.y===o.y);if(l&&this.__firstMove.size){let r=0;this.__firstMove.forEach(n=>{const c=ye(o,n.xy);if(Math.abs(c)>0){var a=o.x-n.xy.x,d=o.y-n.xy.y;n.func.call(n.context,a,d,"move",e.pressure),r++}}),r>0&&this.__firstMove.clear()}l&&this.__moves.size&&(this.__moves.forEach(r=>{const n=ye(o,r.xy);if(Math.abs(n)>.5){var c=o.x-r.xy.x,a=o.y-r.xy.y;r.func.call(r.context,c,a,"move",e.pressure)}}),this.lastPos=o),window.requestAnimationFrame(this.__funcBodyMoves)}__removeBodyMoves(){var o=this.lastPos,e=this.$store.get(J);o&&this.__ends.forEach(s=>{s.func.call(s.context,o.x-s.xy.x,o.y-s.xy.y,"end",e.pressure)}),this.__firstMove.clear(),this.__moves.clear(),this.__ends.clear()}[t.SUBSCRIBE_ALL(F)](o,e,s){this.__firstMove.add({func:o,context:e,xy:s})}[t.SUBSCRIBE_ALL(B)](o,e,s){this.__moves.add({func:o,context:e,xy:s})}[t.SUBSCRIBE_ALL(P)](o,e,s){this.__ends.add({func:o,context:e,xy:s})}[t.POINTERSTART()](o){var e=o.xy||ge;this.$store.init(J,o),this.pos=e}[t.POINTERMOVE()](o){var e=o.xy||ge;this.$store.init(J,o),this.pos=e,this.__requestId||(this.__requestId=window.requestAnimationFrame(this.__funcBodyMoves))}[t.POINTEREND()](o){this.$store.set(J,o),this.__removeBodyMoves(),window.cancelAnimationFrame(this.__requestId),this.__requestId=null}}class Kt extends t.UIElement{bodyMouseFirstMove(o,e){this[e]&&this.emit(F,this[e],this,o.xy)}bodyMouseMove(o,e){this[e]&&this.emit(B,this[e],this,o.xy)}bodyMouseUp(o,e){this[e]&&this.emit(P,this[e],this,o.xy)}}class ve extends t.UIElement{template(){const o={class:"elf--app-layout-resize-bar"};return t.createElementJsx("div",{...o})}[t.POINTERSTART()](o){this.startXY=o.xy}isMoved(o){if(!this.startXY)return!1;const{xy:e}=o,s=e.x-this.startXY.x,l=e.y-this.startXY.y;return s!==0||l!==0}[t.POINTERMOVE("document")+t.IF("isMoved")](o){const{xy:e}=o,s=e.x-this.startXY.x,l=e.y-this.startXY.y;t.isFunction(this.props.onResize)&&this.props.onResize(s,l)}[t.POINTEREND("document")+t.IF("isMoved")](o){const{xy:e}=o,s=e.x-this.startXY.x,l=e.y-this.startXY.y;t.isFunction(this.props.onResizeEnd)&&this.props.onResizeEnd(s,l),this.startXY=void 0}}function Nt({direction:i,content:o,width:e="auto",height:s="auto",maxWidth:l=500,minWidth:r=0,maxHeight:n=500,minHeight:c=0,resizable:a=!1,style:d,onResize:u,onResizeEnd:m}){const[p,y]=t.useState(e),[b,C]=t.useState(s),[x,I]=t.useState(p),[S,K]=t.useState(b),T=t.useCallback(U=>{if(i==="left"||i==="right"){const k=Math.min(Math.max(r,U),l);I(k),x!=k&&t.isFunction(u)&&u(k,S)}else if(i==="top"||i==="bottom"){const k=Math.min(Math.max(c,U),n);K(k),S!=k&&t.isFunction(u)&&u(x,k)}},[x,S]),N=t.useCallback((U,k)=>{T(i==="left"||i==="right"?i==="left"?p+U:p-U:i==="top"?b+k:b-k)},[i,p,b,T]),j=t.useCallback(()=>{y(x),C(S),t.isFunction(m)&&m(x,S)},[x,S,y,C]);return t.createElementJsx("div",{class:"elf--app-layout-item","data-direction":i,"data-resizable":a,style:{...d,width:x,height:S}},o,a?t.createElementJsx(ve,{onResize:N,onResizeEnd:j}):void 0)}const jt=v("--elf--toolbar",{backgroundColor:!0,color:!0,height:!0,align:!0});class Ht extends t.UIElement{getItem(o){return this.props.content.find(e=>e.props.direction===o)}template(){const{style:o={}}=this.props,e={class:"elf--app-layout",style:g(o,jt)},s=this.getItem("top"),l=this.getItem("bottom"),r=this.getItem("left"),n=this.getItem("right"),c=this.getItem("center");return t.createElementJsx("div",{...e},s||void 0,t.createElementJsx("div",{class:"elf--app-layout-body"},r||void 0,c||void 0,n||void 0),l||void 0)}}h.ADD_BODY_FIRST_MOUSEMOVE=F,h.ADD_BODY_MOUSEMOVE=B,h.ADD_BODY_MOUSEUP=P,h.Alert=H,h.AppLayout=Ht,h.AppLayoutItem=Nt,h.AppResizeBar=ve,h.BODY_MOVE_EVENT=J,h.Button=O,h.ButtonGroup=Te,h.Checkbox=q,h.CheckboxGroup=_e,h.ColorGrid=Mt,h.ColorMixer=Ot,h.ColorView=V,h.DataEditor=At,h.Dialog=Ge,h.Divider=Le,h.END=Ee,h.EventControlPanel=Kt,h.EventPanel=Vt,h.FIRSTMOVE=Ce,h.Flex=$,h.Grid=D,h.HexColorEditor=he,h.IconButton=G,h.InputEditor=de,h.InputPaint=ue,h.Layer=Ct,h.Layout=ut,h.LinkButton=Re,h.MOVE=xe,h.Menu=R,h.Notification=tt,h.OptionMenu=A,h.OptionStrip=He,h.Panel=it,h.RGBColorEditor=me,h.Radio=Y,h.RadioGroup=Pe,h.Tab=dt,h.TabItem=ce,h.TabStrip=ie,h.TextAreaEditor=bt,h.ToggleButton=Be,h.Toolbar=Qe,h.ToolbarItem=re,h.Tools=le,h.ToolsCustomItem=oe,h.ToolsMenuItem=se,h.Tooltip=rt,h.VBox=We,h.View=pe,h.VirtualScroll=vt,h.VisualBell=ne,h.alert=Je,h.bell=st,Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
