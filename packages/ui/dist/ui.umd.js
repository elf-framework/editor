(function(h,t){typeof exports=="object"&&typeof module!="undefined"?t(exports,require("@elf-framework/sapa"),require("@elf-framework/color")):typeof define=="function"&&define.amd?define(["exports","@elf-framework/sapa","@elf-framework/color"],t):(h=typeof globalThis!="undefined"?globalThis:h||self,t(h.ui={},h.sapa,h.color))})(this,function(h,t,f){"use strict";var et=Object.defineProperty,tt=Object.defineProperties;var st=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var ot=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;var D=(h,t,f)=>t in h?et(h,t,{enumerable:!0,configurable:!0,writable:!0,value:f}):h[t]=f,c=(h,t)=>{for(var f in t||(t={}))ot.call(t,f)&&D(h,f,t[f]);if(q)for(var f of q(t))lt.call(t,f)&&D(h,f,t[f]);return h},g=(h,t)=>tt(h,st(t));var E=(h,t,f)=>(D(h,typeof t!="symbol"?t+"":t,f),f);const Q={width:!0,height:!0,top:!0,left:!0,right:!0,bottom:!0,maxWidth:!0,maxHeight:!0,minWidth:!0,minHeight:!0,margin:!0,marginTop:!0,marginRight:!0,marginBottom:!0,marginLeft:!0,padding:!0,paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,border:!0,borderTop:!0,borderRight:!0,borderBottom:!0,borderLeft:!0,borderWidth:!0,borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0,gap:!0};function ee(a,s){return typeof s=="number"&&Q[a]&&(s=s+"px"),s}function b(a,s={}){const e={};return Object.keys(a).forEach(o=>{e[s[o]||o]=ee(o,a[o])}),e}const te={borderColor:"--elf--button-border-color",backgroundColor:"--elf--button-background",disabledColor:"--elf--button-disabled-color",color:"--elf--button-color",fontSize:"--elf--button-font-size",fontWeight:"--elf--button-font-weight",height:"--elf--button-height",padding:"--elf--button-padding",borderRadius:"--elf--button-border-radius"};class S extends t.UIElement{template(){const{type:s,size:e,disabled:o,shape:l,destructive:r=!1,style:n={}}=this.props,i={class:t.classnames(["elf--button",{primary:s==="primary",secondary:s==="secondary",outline:s==="outline"},r?"destructive":"",{"elf--button-lg":e==="large","elf--button-sm":e==="small"},{"elf--button-shape-circle":l==="circle","elf--button-shape-round":l==="round"}]),disabled:o?"disabled":void 0,style:c({},b(n,te))};return t.createElementJsx("button",g(c({},i),{onClick:this.props.onClick}),t.createElementJsx("span",null,this.props.content||""))}}const se={borderColor:"--elf--link-button-border-color",backgroundColor:"--elf--link-button-background",disabledColor:"--elf--link-button-disabled-color",color:"--elf--link-button-color",fontSize:"--elf--link-button-font-size",fontWeight:"--elf--link-button-font-weight",padding:"--elf--link-button-padding"};class oe extends t.UIElement{template(){const{disabled:s,style:e={},content:o,onClick:l,href:r}=this.props,n={class:t.classnames(["elf--link-button"]),disabled:s?"disabled":void 0,style:c({},b(e,se))};return t.createElementJsx("a",g(c({},n),{onClick:l,href:r||"#"}),t.createElementJsx("span",null,o||""))}}const le={borderColor:"--elf--icon-button-border-color",backgroundColor:"--elf--icon-button-background",disabledColor:"--elf--icon-button-disabled-color",color:"--elf--icon-button-color",fontSize:"--elf--icon-button-font-size",fontWeight:"--elf--icon-button-font-weight",height:"--elf--icon-button-height",padding:"--elf--icon-button-padding",borderRadius:"--elf--icon-button-border-radius"};class re extends t.UIElement{template(){const{type:s,icon:e,content:o="",size:l,disabled:r,shape:n,style:i={}}=this.props,u={class:t.classnames(["elf--icon-button",{primary:s==="primary",secondary:s==="secondary",outline:s==="outline"},{"elf--icon-button-lg":l==="large","elf--icon-button-sm":l==="small"},{"elf--icon-button-shape-circle":n==="circle","elf--icon-button-shape-round":n==="round"}]),disabled:r?"disabled":void 0,style:c({},b(i,le))};return t.createElementJsx("button",g(c({type:"button"},u),{onClick:this.props.onClick}),e||o||"")}}const P={borderColor:"--elf--radio-border-color",backgroundColor:"--elf--radio-background",disabledColor:"--elf--radio-disabled-color",color:"--elf--radio-color",fontSize:"--elf--radio-font-size",fontWeight:"--elf--radio-font-weight",height:"--elf--radio-height",padding:"--elf--radio-padding",borderRadius:"--elf--radio-border-radius"};class V extends t.UIElement{template(){const{disabled:s,style:e={},value:o,content:l,name:r,checked:n=!1,onChange:i}=this.props,u={class:t.classnames(["elf--radio",{disabled:s}]),style:c({},b(e,P))};return t.createElementJsx("div",c({},u),t.createElementJsx("label",null,t.createElementJsx("input",{ref:"$input",type:"radio",value:o,name:r,disabled:s?"disabled":void 0,checked:n?"checked":void 0,onChange:d=>i==null?void 0:i(d,o)}),l))}}class ne extends t.UIElement{template(){const{disabled:s,style:e={},name:o,value:l,onChange:r,content:n,contentChildren:i}=this.props,u={class:t.classnames(["elf--radio-group"]),disabled:s?"disabled":void 0,style:c({},b(e,P))};return t.createElementJsx("div",c({},u),i.map((d,m)=>t.createElementJsx(V,{ref:`$${m}`,name:o,value:d.props.value,onChange:(p,C)=>{this.setState({value:C},!1),r(p,C)},checked:d.props.value===l,disabled:s},d.props.content)))}get value(){return this.state.value||this.props.value}set value(s){this.setState({value:s})}}const K={borderColor:"--elf--checkbox-border-color",backgroundColor:"--elf--checkbox-background",disabledColor:"--elf--checkbox-disabled-color",color:"--elf--checkbox-color",fontSize:"--elf--checkbox-font-size",fontWeight:"--elf--checkbox-font-weight",height:"--elf--checkbox-height",padding:"--elf--checkbox-padding",borderRadius:"--elf--checkbox-border-radius"};class L extends t.UIElement{template(){const{disabled:s,style:e={},value:o,content:l,name:r,checked:n=!1,onChange:i}=this.props,u={class:t.classnames(["elf--checkbox",{disabled:s}]),style:c({},b(e,K))};return t.createElementJsx("div",c({},u),t.createElementJsx("label",null,t.createElementJsx("input",{ref:"$input",type:"checkbox",value:o,name:r,disabled:s?"disabled":void 0,checked:n?"checked":void 0,onChange:d=>i==null?void 0:i(d,o)}),l))}get checked(){return this.refs.$input.checked()}get value(){return this.props.value}}class ie extends t.UIElement{initState(){return{value:this.props.value||[]}}template(){const{disabled:s,style:e={},value:o,options:l=[],onChange:r}=this.props,n={class:t.classnames(["elf--check-group"]),disabled:s?"disabled":void 0,style:c({},b(e,K))};return t.createElementJsx("div",c({},n),l.map((i,u)=>t.createElementJsx(L,{ref:`$${u}`,value:i.value,onChange:d=>{r(d,this.getValues())},checked:o.includes(i.value),disabled:s},i.label)))}getValues(){const s=[];return this.eachChildren(e=>{e.checked&&s.push(e.value)}),s}get disabled(){return this.props.disabled}get value(){return this.getValues()}set value(s=[]){this.setState({values:s})}}const J={DIVIDER:"divider",GROUP:"group",MENU:"menu",ITEM:"item",CUSTOM:"custom"};function ce(a=[],s){return a.map((e,o)=>{const l=`${e.type||"item"}${o}`;return t.isString(e)&&e==="-"?t.createElementJsx(B,{ref:l,rootClose:s}):t.isFunction(e)?t.createElementJsx(N,{ref:`custom${o}`,render:e,rootClose:s}):e.type===J.CUSTOM?t.createElementJsx(N,g(c({ref:l},e),{rootClose:s})):e.type===J.GROUP?t.createElementJsx(ae,g(c({ref:l},e),{rootClose:s})):e.type===J.DIVIDER?t.createElementJsx(B,g(c({ref:l},e),{rootClose:s})):t.createElementJsx(ue,g(c({ref:l},e),{rootClose:s}))})}function B({dashed:a=!1}){return t.createElementJsx("li",{class:"divider",dashed:a})}function N({render:a,rootClose:s}){return t.createElementJsx("li",{class:"custom"},a==null?void 0:a({rootClose:s}))}function ae({title:a=""}){return t.createElementJsx("li",{class:"section-title"},a)}class ue extends t.UIElement{initState(){const{title:s="",hover:e=!1,shortcut:o,icon:l,items:r=[],disabled:n=!1,selectable:i,selected:u,selectedIcon:d="\u2713",closable:m=!0,rootClose:p}=this.props;return{title:s,hover:e,shortcut:o,icon:l,items:r,selectable:i,selected:u,selectedIcon:d,disabled:n,closable:m,rootClose:p}}template(){const{title:s="",shortcut:e,icon:o="\u25B6",items:l=[],hover:r,selected:n,selectable:i,selectedIcon:u,disabled:d,rootClose:m}=this.state,p=l.length>0;return t.createElementJsx("li",{class:t.classnames({hover:r}),disabled:d?!0:void 0},i?t.createElementJsx("span",{class:"selected-icon"},n?u:void 0):null,s?t.createElementJsx("div",{class:"menu-title"},s):void 0,e?t.createElementJsx("div",{class:"shortcut"},e):void 0,o&&p?t.createElementJsx("div",{class:"icon"},o):void 0,l.length>0?t.createElementJsx(w,{items:l,rootClose:m}):void 0)}checkClickable(){if(this.state.disabled)return!1;const{type:s=J.ITEM,items:e=[]}=this.props;return s===J.ITEM&&e.length===0}[t.CLICK("$el")+t.IF("checkClickable")+t.PREVENT+t.STOP](s){var r,n;const{selectable:e=!1,onClick:o,closable:l=!0}=this.props;e&&this.setSelected(!this.selected),t.isFunction(o)&&o(s,this),l&&((n=(r=this.props).rootClose)==null||n.call(r))}setSelected(s=!1){this.setState({selected:s})}get selected(){return this.state.selected}}const de={left:"--elf--menu-left",top:"--elf--menu-top",backgroundColor:"--elf--menu-background",color:"--elf--menu-color",fontSize:"--elf--menu-font-size",fontWeight:"--elf--menu-font-weight",height:"--elf--menu-height",padding:"--elf--menu-padding",borderRadius:"--elf--menu-border-radius",borderColor:"--elf--menu-border-color",boxShadow:"--elf--menu-box-shadow",width:"--elf--menu-width",maxWidth:"--elf--menu-max-width",sectionTitleColor:"--elf--menu-section-title-color",sectionTitleBackgroundColor:"--elf--menu-section-title-background-color",dividerColor:"--elf--menu-divider-color",directionLeft:"--elf--menu-direction-left",itemPadding:"--elf--menu-item-padding"};class w extends t.UIElement{initState(){return{intersectionLeft:0}}template(){let{style:s={},type:e="menu",x:o=0,y:l=0,direction:r="left",items:n=[],rootClose:i,autoPosition:u=!1}=this.props,d=c({},s);if(o!==0&&(d=g(c({},d),{left:o})),l!==0&&(d=g(c({},d),{top:l})),u){const p=n.findIndex(C=>C.selectable&&C.selected);d=g(c({},d),{top:-1*(p*24+8)})}const m={"data-direction":r,class:t.classnames("elf--menu",{"elf--menu-contextmenu":e==="contextmenu"}),style:c({},b(d,de))};return t.createElementJsx("menu",g(c({},m),{onContextMenu:p=>p.preventDefault()}),ce(n,i))}[t.OBSERVER("intersection")+t.PARAMS({root:document.body})](s=[]){const e=s.find(o=>o.isIntersecting&&o.intersectionRatio<1);if(e){const{left:o,right:l}=e.boundingClientRect,{left:r,right:n}=e.intersectionRect;let i="left";n!=l&&r!=o?i="center":n!=l&&(i="right"),this.$el.attr("data-direction",i)}}}function j(){return t.createElementJsx("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},t.createElementJsx("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}))}class I extends t.UIElement{template(){const{icon:s,content:e,items:o,menuStyle:l={},disabled:r=void 0,autoPosition:n=!1}=this.props,{isOpen:i}=this.state,u=i&&o;return t.createElementJsx("div",{class:"elf--option-menu",disabled:r},t.createElementJsx("div",{class:"content",onClick:()=>{this.setState({isOpen:!this.state.isOpen})}},s?t.createElementJsx("div",{class:"elf--option-menu-icon"},s):void 0,t.createElementJsx("div",{class:"text"},e),t.createElementJsx("div",{class:"arrow"},t.createElementJsx(j,null))),u?t.createElementJsx("div",{class:"menu-area"},t.createElementJsx(w,{autoPosition:n,rootClose:()=>{this.close()},style:l,items:o})):void 0)}close(){this.setState({isOpen:!1})}checkClickable(s){return!t.Dom.create(s.target).closest("menu-area")}checkNotInMenu(s){const e=t.Dom.create(s.target).closest("elf--option-menu");return e?this.$el.is(e)===!1:!0}[t.CLICK("document")+t.IF("checkClickable")+t.IF("checkNotInMenu")](){this.close()}}class he extends t.UIElement{initState(){return{value:this.props.value}}template(){const{disabled:s,style:e={},selectedValue:o,options:l=[],onChange:r}=this.props,n={class:"elf--option-strip",disabled:s?"disabled":void 0,style:c({},b(e,{}))};return t.createElementJsx("div",c({},n),l.map(i=>t.createElementJsx("button",{type:"button",class:t.classnames("elf--option-strip-item",{selected:o===i.value}),onClick:()=>r==null?void 0:r(i.value)},i.icon)))}}const fe={position:"--elf--dialog-position",backgroundColor:"--elf--dialog-background",color:"--elf--dialog-color",fontSize:"--elf--dialog-font-size",fontWeight:"--elf--dialog-font-weight",height:"--elf--dialog-height",padding:"--elf--dialog-padding",borderRadius:"--elf--dialog-border-radius",borderColor:"--elf--dialog-border-color",boxShadow:"--elf--dialog-box-shadow",width:"--elf--dialog-width"};class me extends t.UIElement{initState(){const{visible:s=!1,style:e={},center:o}=this.props;return{visible:s,style:e,center:o}}close(){const{onClose:s}=this.props;t.isFunction(s)&&s(this)}ok(){const{onOk:s}=this.props;t.isFunction(s)&&s(this)}cancel(){const{onCancel:s}=this.props;t.isFunction(s)&&s(this)}makeDefaultTools(){const{footer:s,cancelText:e="Cancel",okText:o="OK"}=this.props;return s?"":[t.createElementJsx(S,{onClick:()=>this.cancel()},e),t.createElementJsx(S,{type:"primary",onClick:()=>this.ok()},o)]}template(){const{style:s={},visible:e,center:o}=this.state,l={class:t.classnames("elf--dialog",{visible:e,center:o}),style:c({},b(s,fe))};return t.createElementJsx("div",c({},l),t.createElementJsx("div",{class:"elf--dialog-title"},t.createElementJsx("div",{class:"elf--dialog-title-text"},"Dialog"),t.createElementJsx("div",{class:"elf--dialog-title-tools",ref:"$tools"},this.props.tools||void 0),t.createElementJsx("div",{class:"elf--dialog-title-close",ref:"$close"},"\xD7")),t.createElementJsx("div",{class:"elf--dialog-content"},t.createElementJsx("div",{class:"elf--dialog-text"},this.props.content||""),t.createElementJsx("div",{class:"elf--dialog-content-tools"},this.props.footer?this.props.footer:this.makeDefaultTools())))}[t.CLICK("$close")](){this.close()}}const $={},pe=/([A-Z])/g,ge=a=>{if($[a])return $[a];const s=a.replace(pe,"-$1").toLowerCase();return $[a]=s,s};function y(a,s){Object.keys(s).forEach(e=>{a+""+ge(e)})}const A={MENU:"menu",ITEM:"item",CUSTOM:"custom"};function be(a=[]){return a.map((s,e)=>{const o=`${s.type}-${e}`;return s.type===A.CUSTOM?t.createElementJsx(H,c({ref:o},s)):s.type===A.MENU?t.createElementJsx(z,c({ref:o},s)):t.createElementJsx(O,c({ref:o},s))})}class O extends t.UIElement{initialize(){super.initialize();const s=this.props.events||[];s.length&&s.forEach(e=>{this.on(e,()=>{this.refresh()})})}initState(){const{title:s="",icon:e,selected:o}=this.props;return{title:s,icon:e,selected:o}}template(){const{title:s="",icon:e}=this.state;return t.createElementJsx("div",{class:t.classnames("elf--tools-item",{selected:this.selected?!0:void 0}),onClick:this.props.onClick},t.createElementJsx("button",{type:"button"},e?t.createElementJsx("span",{class:"icon"},e):s?t.createElementJsx("span",{class:"menu-title"},s):void 0))}setSelected(s=!1){this.setState({selected:s})}get selected(){return t.isFunction(this.state.selected)?this.state.selected():this.state.selected}set selected(s){this.setSelected(s)}}class H extends O{template(){var s,e;return t.createElementJsx("div",{class:"elf--tools-item custom"},(e=(s=this.props).render)==null?void 0:e.call(s))}}class z extends O{initState(){const{title:s="",icon:e,selected:o,disabled:l,opened:r,items:n,direction:i,menuStyle:u}=this.props;return{title:s,icon:e,selected:o,opened:r,items:n,direction:i,disabled:l,menuStyle:u,rootClose:this.close.bind(this)}}template(){const{title:s="",icon:e,disabled:o,items:l=[],opened:r=!1,direction:n="left",menuStyle:i}=this.state,u=l.length>0;return t.createElementJsx("div",{class:t.classnames("elf--tools-item",{selected:this.selected?!0:void 0,"has-items":u}),disabled:o},t.createElementJsx("button",{type:"button"},e?t.createElementJsx("span",{class:"icon"},e):s?t.createElementJsx("span",{class:"menu-title"},s):void 0,u?t.createElementJsx("span",{class:t.classnames("arrow",{opened:r})},t.createElementJsx(j,null)):void 0),r&&!o?t.createElementJsx("div",{class:"menu-area"},t.createElementJsx("div",{class:"arrow"}),t.createElementJsx(w,{ref:"$menu",items:l,direction:n,rootClose:this.state.rootClose,style:g(c({},i||{}),{top:"calc(100% + 5px)"})})):void 0)}runCallback(s,e){t.isFunction(s)&&s(e,this)}open(){this.setState({rect:this.$el.rect(),opened:!0})}close(){this.setState({opened:!1})}toggle(){this.state.opened||this.setState({rect:this.$el.rect()},!1),this.setState({opened:!this.state.opened})}checkClickable(s){return!t.Dom.create(s.target).closest("menu-area")}checkTriggerClick(){const{trigger:s="click"}=this.props;return s==="click"}checkTriggerOver(){return this.props.trigger==="hover"}[t.POINTEROVER("$el")+t.IF("checkTriggerOver")](){this.open()}checkNotInMenu(s){const e=t.Dom.create(s.target).closest("elf--tools-item");return e?this.$el.is(e)===!1:!0}[t.POINTERLEAVE("$el")+t.IF("checkTriggerOver")](){this.close()}[t.CLICK("document")+t.IF("checkClickable")+t.IF("checkNotInMenu")](){this.close()}[t.CLICK("$el")+t.IF("checkClickable")+t.IF("checkTriggerClick")](s){t.Dom.create(s.target).hasClass("arrow")?(this.toggle(),this.state.opened?this.runCallback(this.props.onOpen,s):this.runCallback(this.props.onClose,s)):(this.close(),this.runCallback(this.props.onClick,s))}}const Ce=y("--elf--tools",{backgroundColor:!0,color:!0,height:!0});class G extends t.UIElement{template(){const{style:s={}}=this.props,e={class:t.classnames("elf--tools"),style:c({},b(s,Ce))};return t.createElementJsx("div",g(c({},e),{onContextMenu:o=>o.preventDefault()}),be(this.props.items))}}function ve(a=[]){return a.map((s,e)=>{const o=`${s.type||"item"}${e}`;return t.createElementJsx(W,c({ref:o},s))})}class W extends t.UIElement{template(){const{items:s,style:e}=this.props;return t.createElementJsx("div",{class:"elf--toolbar-item"},t.createElementJsx(G,{ref:"$tools",items:s,style:e}))}}const xe=y("--elf--toolbar",{backgroundColor:!0,color:!0,height:!0,align:!0});class ye extends t.UIElement{template(){const{style:s={},align:e,items:o=[]}=this.props,l={class:t.classnames("elf--toolbar",{[e]:!0}),style:c({},b(s,xe))};return t.createElementJsx("div",g(c({},l),{onContextMenu:r=>r.preventDefault()}),ve(o))}}const Ee={backgroundColor:"--elf--notification-background",color:"--elf--notification-color",height:"--elf--notification-height",hoverColor:"--elf--notification-hover-color",borderColor:"--elf--notification-border-color",boxShadow:"--elf--notification-box-shadow",toolsBorderColor:"--elf--notification-tools-border-color",toolsBorderRadius:"--elf--notification-tools-border-radius"};class ke extends t.UIElement{template(){const{style:s={},icon:e,content:o,tools:l,direction:r="top-left"}=this.props,n={class:t.classnames("elf--notification",`elf--notification-direction-${r}`),style:c({},b(s,Ee))};return t.createElementJsx("div",g(c({},n),{onContextMenu:i=>i.preventDefault()}),e?t.createElementJsx("div",{class:"elf--notification-icon"},e):void 0,t.createElementJsx("div",{class:"elf--notification-content"},t.createElementJsx("div",{class:"elf--notification-text"},o)),t.createElementJsx("div",{class:"elf--notification-tools"},l||[]))}}const Je=y("--elf--visual-bell",{backgroundColor:!0,color:!0,height:!0,hoverColor:!0,borderColor:!0,boxShadow:!0,toolsBorderColor:!0,toolsBorderRadius:!0,hgap:!0,vgap:!0});class Se extends t.UIElement{template(){const{style:s={},content:e,direction:o="bottom"}=this.props,l={class:t.classnames("elf--visual-bell",`elf--visual-bell-direction-${o}`),style:c({},b(s,Je))};return t.createElementJsx("div",g(c({class:"elf--visual-bell"},l),{onContextMenu:r=>r.preventDefault()}),t.createElementJsx("div",{class:"elf--visual-bell-content"},t.createElementJsx("div",{class:"elf--visual-bell-text"},e)),t.createElementJsx("div",{class:"elf--visual-bell-tools"},this.props.tools||[]))}}const we=y("--elf--tooltip",{backgroundColor:!0,color:!0,height:!0,hoverColor:!0,borderColor:!0,boxShadow:!0,toolsBorderColor:!0,toolsBorderRadius:!0,hgap:!0,vgap:!0,delay:!0});class Ie extends t.UIElement{initState(){return{trigger:this.props.trigger||"hover",show:this.props.show||!1}}template(){const{style:s={},message:e="",content:o,position:l="bottom"}=this.props,{show:r}=this.state,n={class:t.classnames("elf--tooltip",`elf--tooltip-position-${l}`),style:c({},b(s,we))};return t.createElementJsx("div",c({class:"elf--tooltip"},n),t.createElementJsx("div",{class:"elf--tooltip-content"},o),r||this.props.show?t.createElementJsx("div",{class:"elf--tooltip-message"},t.createElementJsx("div",{class:"arrow"}),t.createElementJsx("div",{class:"elf--toolltip-message-content"},e)):void 0)}open(){this.setState({show:!0})}close(){this.setState({show:!1})}toggle(){this.setState({show:!this.state.show})}checkClickable(s){return!t.Dom.create(s.target).closest("elf--tooltip")}checkTriggerClick(){return this.state.trigger==="click"}checkTriggerOver(){return this.state.trigger==="hover"}[t.POINTERENTER("$el")+t.IF("checkTriggerOver")](){this.open()}checkNotInTooltip(s){const e=t.Dom.create(s.target).closest("elf--tooltip");return e?this.$el.is(e)===!1:!0}[t.POINTERLEAVE("$el")+t.IF("checkTriggerOver")](){this.close()}[t.CLICK("$el")+t.IF("checkClickable")+t.IF("checkTriggerClick")](){this.toggle()}}const $e={backgroundColor:"--elf--panel-background",color:"--elf--panel-color",height:"--elf--panel-height",hoverColor:"--elf--panel-hover-color",borderColor:"--elf--panel-border-color",boxShadow:"--elf--panel-box-shadow",padding:"--elf--panel-padding",borderRadius:"--elf--panel-border-radius"};class Oe extends t.UIElement{template(){const{style:s={},content:e,theme:o,title:l="",tools:r=[],mode:n,footer:i}=this.props,u={class:t.classnames("elf--panel",`elf--panel-mode-${n}`),"data-theme":o,style:c({},b(s,$e))};return t.createElementJsx("div",c({},u),l?t.createElementJsx("div",{class:"elf--panel-title"},t.createElementJsx("div",{class:"elf--panel-title-text"},l),r?t.createElementJsx("div",{class:"elf--panel-title-tools"},r||[]):void 0):void 0,t.createElementJsx("div",{class:"elf--panel-content"},e),i?t.createElementJsx("div",{class:"elf--panel-footer"},i):void 0)}}const Te=y("--elf--tabstrip",{backgroundColor:!0,color:!0,height:!0,width:!0,hoverColor:!0,borderColor:!0,hgap:!0,vgap:!0,delay:!0});class Ue extends t.UIElement{initState(){return{items:this.props.items||[]}}template(){var l;const{style:s={}}=this.props,{items:e=[]}=this.state,o={class:t.classnames("elf--tabstrip"),style:c({},b(s,Te))};return t.createElementJsx("div",c({class:"elf--tabstrip"},o),t.createElementJsx("div",{class:"elf--tabstrip-content"},e.map(r=>t.createElementJsx("div",{class:t.classnames("elf--tabstrip-item",{selected:!!r.selected}),onClick:n=>this.setSelectedValue(n,r.value)},r.title))),(l=this.props.tools)!=null&&l.length?t.createElementJsx("div",{class:"elf--tabstrip-tools"},this.props.tools.map(r=>t.createElementJsx("div",{class:"elf--tabstrip-tool"},r))):void 0)}get selectedValue(){var s;return(s=this.state.items.find(e=>e.selected))==null?void 0:s.value}setSelectedValue(s,e){const o=this.selectedValue;this.setState({items:this.state.items.map(l=>(l.selected=l.value===e,l))}),o!==e&&this.props.onChange&&this.props.onChange(s,this)}}class Me extends t.UIElement{template(){const{style:s={},content:e,wrap:o=!1}=this.props,l={class:t.classnames("elf--layout",{stack:this.props.stack,wrap:o}),style:c({},b(s,{backgroundColor:"--elf--layout-background-color",gap:"--elf--layout-gap"}))};return t.createElementJsx("div",c({},l),e)}}class T extends t.UIElement{template(){const{style:s={},content:e,stack:o,wrap:l=!1}=this.props,r={class:t.classnames("elf--flex",{stack:o,wrap:l}),style:c({},b(s,{}))};return t.createElementJsx("div",c({},r),e)}}class Re extends T{template(){const{style:s={},content:e}=this.props;return t.createElementJsx(T,{stack:!0,style:s},e)}}function X(a){return typeof a=="number"?a=Array.from({length:a},()=>1):Array.isArray(a)===!1&&(a=[a]),a.map(s=>t.isNumber(s)?`${s}fr`:s).join(" ")}class U extends t.UIElement{template(){const{style:s={},columns:e=[1],rows:o=[1],gap:l,columnGap:r,rowGap:n,content:i}=this.props,u={class:"elf--grid",style:c({gridTemplateColumns:X(e),gridTemplateRows:X(o),gap:l,columnGap:r,rowGap:n},b(s,{}))};return t.createElementJsx("div",c({},u),i)}}const Fe=y("--elf--input-editor",{borderColor:!0,backgroundColor:!0,disabledColor:!0,color:!0,fontSize:!0,fontWeight:!0,height:!0,padding:!0,borderRadius:!0,placeholderColor:!0,emptyColor:!0});class De extends t.UIElement{initState(){const{style:s={},type:e="text",autoFocus:o=!1,focused:l,hover:r=!1,value:n,placeholder:i,disabled:u}=this.props;return{style:s,type:e,autoFocus:o,hover:r||!1,focused:l||!1,placeholder:i,value:n,disabled:u}}template(){const{icon:s,tools:e}=this.props,{style:o={},type:l="text",focused:r=!1,hover:n=!1,value:i,placeholder:u,disabled:d}=this.state,m={class:t.classnames(["elf--input-editor",{focused:r,hover:n,disabled:d,icon:s}]),style:c({},b(o,Fe))},p={onInput:this.props.onInput,onChange:this.props.onChange,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp,onKeyPress:this.props.onKeyPress,onSelect:this.props.onSelect,onPaste:this.props.onPaste,onCut:this.props.onCut,onCopy:this.props.onCopy},C={type:l,disabled:d,placeholder:u||"",value:i||""};return t.createElementJsx("div",c({},m),s?t.createElementJsx("div",{class:"elf--input-editor-icon"},s):void 0,t.createElementJsx("div",{class:"elf--input-area"},t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",c(c({ref:"$input"},C),p)))),e||void 0)}onMounted(){this.state.autoFocus&&setTimeout(()=>{this.refs.$input.focus(),this.refs.$input.select()},10)}runCallback(s,e){t.isFunction(s)&&s(e,this)}[t.FOCUSIN("$input")](s){this.setState({focused:!0}),this.runCallback(this.props.onFocus,s)}[t.FOCUSOUT("$input")](s){this.setState({focused:!1}),this.runCallback(this.props.onBlur,s)}get value(){return this.refs.$input.value}set value(s){this.refs.$input.value=s}get selectedValue(){return document.getSelection().toString()}}function M({color:a}){const s=f.parse(a),{r:e,g:o,b:l}=s;return t.createElementJsx("div",{class:"elf--color-view"},t.createElementJsx("div",{class:"elf--color-view-color",style:{backgroundColor:f.format({r:e,g:o,b:l},"rgb")}}),t.createElementJsx("div",{class:"elf--color-view-opacity-pattern"},t.createElementJsx("div",{class:"elf--color-view-opacity",style:{backgroundColor:f.format(s,"rgb")}})))}const Pe=y("--elf--input-paint",{borderColor:!0,backgroundColor:!0,disabledColor:!0,color:!0,fontSize:!0,fontWeight:!0,height:!0,padding:!0,borderRadius:!0,placeholderColor:!0,emptyColor:!0});class Ve extends t.UIElement{constructor(){super(...arguments);E(this,"keyup",e=>{switch(e.preventDefault(),e.key){case"ArrowUp":this.increaseOpacity(e);break;case"ArrowDown":this.decreaseOpacity(e);break}})}initState(){const{style:e={},autoFocus:o=!1,focused:l,hover:r=!1,value:n,placeholder:i,disabled:u,hasOpacity:d=!0}=this.props,m=f.parse(n);return{style:e,autoFocus:o,hover:r||!1,focused:l||!1,placeholder:i,value:n,parsedColor:m,disabled:u,hasOpacity:d}}template(){const{icon:e,hideColorView:o=!1}=this.props,{style:l={},focused:r=!1,hover:n=!1,value:i,placeholder:u,disabled:d,parsedColor:m}=this.state,p={class:t.classnames(["elf--input-paint",{focused:r,hover:n,disabled:d,icon:e}]),style:c({},b(l,Pe))},C={onInput:this.props.onInput,onChange:this.props.onChange,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp,onKeyPress:this.props.onKeyPress,onSelect:this.props.onSelect,onPaste:this.props.onPaste,onCut:this.props.onCut,onCopy:this.props.onCopy},{r:v,g:x,b:k}=m,R={disabled:d,placeholder:u||"",value:f.format({r:v,g:x,b:k},"hex")};return t.createElementJsx("div",c({},p),o?void 0:t.createElementJsx("div",{class:"elf--input-paint-icon"},t.createElementJsx(M,{color:i})),t.createElementJsx("div",{class:"elf--input-area"},t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",c(c({class:"color"},R),C)))),this.state.hasOpacity&&t.createElementJsx("div",{class:"elf--input-opacity"},t.createElementJsx("input",{class:"opacity",value:`${m.a*100}%`,onKeyUp:this.keyup})))}updateOpacity(e){this.setState({parsedColor:g(c({},this.state.parsedColor),{a:this.state.parsedColor.a+e})})}increaseOpacity(){this.updateOpacity(.01)}decreaseOpacity(){this.updateOpacity(-.01)}onMounted(){this.state.autoFocus&&setTimeout(()=>{this.refs.$input.focus(),this.refs.$input.select()},10)}runCallback(e,o){t.isFunction(e)&&e(o,this)}[t.CLICK("$el .elf--input-paint-icon")](e){var o,l;(l=(o=this.props).onClickColorView)==null||l.call(o,e)}[t.FOCUSIN("$el input")](e){this.setState({focused:!0}),this.runCallback(this.props.onFocus,e)}[t.FOCUSOUT("$el input")](e){this.setState({focused:!1}),this.runCallback(this.props.onBlur,e)}get value(){return this.refs.$input.value}set value(e){this.refs.$input.value=e}get selectedValue(){return document.getSelection().toString()}}const Ke=y("--elf--input-paint",{borderColor:!0,backgroundColor:!0,disabledColor:!0,color:!0,fontSize:!0,fontWeight:!0,height:!0,padding:!0,borderRadius:!0,placeholderColor:!0,emptyColor:!0});class Y extends t.UIElement{constructor(){super(...arguments);E(this,"keydownColor",e=>{const o=Math.floor(e.target.selectionStart/2)*2;let l="";switch(o<2?l="r":o<4?l="g":l="b",e.key){case"ArrowUp":e.preventDefault(),this.increaseColor(l),e.target.setSelectionRange(o,o+2);break;case"ArrowDown":e.preventDefault(),this.decreaseColor(l),e.target.setSelectionRange(o,o+2);break}});E(this,"keyupColor",e=>{if(!(e.key==="ArrowUp"||e.key==="ArrowDown")){if(e.target.value.length===3||e.target.value.length===6){const o=f.parse("#"+e.target.value);o.type==="hex"&&this.isInvalidColor(o)===!1&&this.updateFullColor(o)}}});E(this,"keydown",e=>{switch(e.preventDefault(),e.stopPropagation(),e.key){case"ArrowUp":this.increaseOpacity(e),e.target.select();break;case"ArrowDown":this.decreaseOpacity(e),e.target.select();break}})}initState(){const{style:e={},autoFocus:o=!1,focused:l,hover:r=!1,value:n,placeholder:i,disabled:u,hasOpacity:d=!0}=this.props,m=f.parse(n);return{style:e,autoFocus:o,hover:r||!1,focused:l||!1,placeholder:i,value:n,parsedColor:m,disabled:u,hasOpacity:d}}template(){const{icon:e,value:o}=this.props,{style:l={},focused:r=!1,hover:n=!1,placeholder:i,disabled:u}=this.state,{r:d,g:m,b:p,a:C}=f.parse(o),v={class:t.classnames(["elf--input-paint",{focused:r,hover:n,disabled:u,icon:e,invalid:this.isInvalidColor({r:d,g:m,b:p,a:C})}]),style:c({},b(l,Ke))},x={onInput:this.props.onInput,onChange:this.props.onChange,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp,onKeyPress:this.props.onKeyPress,onSelect:this.props.onSelect,onPaste:this.props.onPaste,onCut:this.props.onCut,onCopy:this.props.onCopy},k={disabled:u,placeholder:i||"",value:f.format({r:d,g:m,b:p},"hex").replace("#","")};return this.setState({parsedColor:{r:d,g:m,b:p,a:C}},!1),t.createElementJsx("div",c({},v),t.createElementJsx("div",{class:"elf--input-area"},t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",g(c(c({class:"color",type:"text","data-type":"hex",maxlength:6},k),x),{onKeyDown:this.keydownColor,onKeyUp:this.keyupColor})))),this.state.hasOpacity&&t.createElementJsx("div",{class:"elf--input-opacity"},t.createElementJsx("input",{class:"opacity",value:`${Math.round(C*100*100)/100}%`,onKeyDown:this.keydown})))}updateOpacity(e){this.setState({parsedColor:g(c({},this.state.parsedColor),{a:Math.max(0,Math.min(1,Math.round((this.state.parsedColor.a+e)*100)/100))})},!1),this.runCallback(this.props.onChange)}updateFullColor(e){this.setState({parsedColor:e},!1),this.runCallback(this.props.onChange)}updateColor(e,o){const l=Math.max(0,Math.min(255,this.state.parsedColor[e]+o));this.state.parsedColor[e]!==l&&(this.setState({parsedColor:g(c({},this.state.parsedColor),{[e]:Math.max(0,Math.min(255,this.state.parsedColor[e]+o))})},!1),this.runCallback(this.props.onChange))}increaseColor(e){this.updateColor(e,1)}decreaseColor(e){this.updateColor(e,-1)}increaseOpacity(){this.updateOpacity(.01)}decreaseOpacity(){this.updateOpacity(-.01)}isInvalidColor(e){return isNaN(e.r)||isNaN(e.g)||isNaN(e.b)||isNaN(e.a)||t.isUndefined(e.r)||t.isUndefined(e.g)||t.isUndefined(e.b)||t.isUndefined(e.a)}onMounted(){this.state.autoFocus&&setTimeout(()=>{const e=this.$el.$("input[data-type='hex']");e.focus(),e.select()},10)}runCallback(e,o){t.isFunction(e)&&e(this.value,this)}[t.CLICK("$el .elf--input-paint-icon")](e){var o,l;(l=(o=this.props).onClickColorView)==null||l.call(o,e)}[t.FOCUSIN("$el input")](e){this.setState({focused:!0}),e.target.select(),this.runCallback(this.props.onFocus,e)}[t.FOCUSOUT("$el input")](e){this.setState({focused:!1}),this.runCallback(this.props.onBlur,e)}get value(){const{parsedColor:e}=this.state,{r:o,g:l,b:r,a:n}=e;return f.format({r:o,g:l,b:r,a:n},"hex")}set value(e){this.refs.$input.value=e}get selectedValue(){return document.getSelection().toString()}}const Le=y("--elf--input-paint",{borderColor:!0,backgroundColor:!0,disabledColor:!0,color:!0,fontSize:!0,fontWeight:!0,height:!0,padding:!0,borderRadius:!0,placeholderColor:!0,emptyColor:!0});class _ extends t.UIElement{constructor(){super(...arguments);E(this,"keydownColor",e=>{switch(e.key){case"ArrowUp":e.preventDefault(),this.increaseColor(e.target.getAttribute("data-type")),e.target.select();break;case"ArrowDown":e.preventDefault(),this.decreaseColor(e.target.getAttribute("data-type")),e.target.select();break}});E(this,"keydown",e=>{switch(e.key){case"ArrowUp":e.preventDefault(),this.increaseOpacity(e),e.target.select();break;case"ArrowDown":e.preventDefault(),this.decreaseOpacity(e),e.target.select();break;case"Tab":e.preventDefault();var o=this.$el.$("input[data-type='r']");o.focus(),o.select();break}})}initState(){const{style:e={},autoFocus:o=!1,focused:l,hover:r=!1,placeholder:n,disabled:i,hasOpacity:u=!0}=this.props;return{style:e,autoFocus:o,hover:r||!1,focused:l||!1,placeholder:n,disabled:i,hasOpacity:u}}template(){const{icon:e,value:o}=this.props,{style:l={},focused:r=!1,hover:n=!1,placeholder:i,disabled:u}=this.state,d={class:t.classnames(["elf--input-paint",{focused:r,hover:n,disabled:u,icon:e}]),style:c({},b(l,Le))},{r:m,g:p,b:C,a:v}=f.parse(o),x={disabled:u,placeholder:i||"",min:0,max:255};return this.setState({parsedColor:{r:m,g:p,b:C,a:v}},!1),t.createElementJsx("div",c({},d),t.createElementJsx("div",{class:"elf--input-area"},t.createElementJsx(U,{columns:3},t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",g(c({class:"color","data-type":"r",tabIndex:1,value:m},x),{onKeyDown:this.keydownColor}))),t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",g(c({class:"color","data-type":"g",tabIndex:2,value:p},x),{onKeyDown:this.keydownColor}))),t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",g(c({class:"color","data-type":"b",tabIndex:3,value:C},x),{onKeyDown:this.keydownColor}))))),this.state.hasOpacity&&t.createElementJsx("div",{class:"elf--input-opacity"},t.createElementJsx("input",{type:"text",tabIndex:4,class:"opacity",value:`${Math.round(v*100*100)/100}%`,onKeyDown:this.keydown})))}updateOpacity(e){this.setState({parsedColor:g(c({},this.state.parsedColor),{a:Math.max(0,Math.min(1,Math.round((this.state.parsedColor.a+e)*100)/100))})},!1),this.runCallback(this.props.onChange)}updateColor(e,o){this.setState({parsedColor:g(c({},this.state.parsedColor),{[e]:Math.max(0,Math.min(255,this.state.parsedColor[e]+o))})},!1),this.runCallback(this.props.onChange)}increaseColor(e){this.updateColor(e,1)}decreaseColor(e){this.updateColor(e,-1)}increaseOpacity(){this.updateOpacity(.01)}decreaseOpacity(){this.updateOpacity(-.01)}onMounted(){this.state.autoFocus&&setTimeout(()=>{const e=this.$el.$("input[data-type='r']");e.focus(),e.select()},10)}runCallback(e){t.isFunction(e)&&e(this.value,this)}[t.CLICK("$el .elf--input-paint-icon")](e){var o,l;(l=(o=this.props).onClickColorView)==null||l.call(o,e)}[t.FOCUSIN("$el input")](e){this.setState({focused:!0}),e.target.select(),this.runCallback(this.props.onFocus,e)}[t.FOCUSOUT("$el input")](e){this.setState({focused:!1}),this.runCallback(this.props.onBlur,e)}get value(){const{parsedColor:e}=this.state,{r:o,g:l,b:r,a:n}=e;return f.format({r:o,g:l,b:r,a:n},"rgb")}set value(e){this.refs.$input.value=e}get selectedValue(){return document.getSelection().toString()}}const Be=y("--elf--input-editor",{borderColor:!0,backgroundColor:!0,disabledColor:!0,color:!0,fontSize:!0,fontWeight:!0,height:!0,padding:!0,borderRadius:!0,placeholderColor:!0,emptyColor:!0});class Ne extends t.UIElement{initState(){const{style:s={},focused:e,hover:o=!1,value:l,placeholder:r,disabled:n}=this.props;return{style:s,hover:o||!1,focused:e||!1,placeholder:r,value:l,disabled:n}}template(){const{icon:s}=this.props,{style:e={},focused:o=!1,hover:l=!1,value:r,placeholder:n,disabled:i}=this.state,u={class:t.classnames(["elf--input-editor","multiline",{focused:o,hover:l,disabled:i,icon:s}]),style:c({},b(e,Be))},d={onInput:this.props.onInput,onChange:this.props.onChange,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp,onKeyPress:this.props.onKeyPress,onSelect:this.props.onSelect,onPaste:this.props.onPaste,onCut:this.props.onCut,onCopy:this.props.onCopy},m={disabled:i,placeholder:n,value:r};return t.createElementJsx("div",c({},u),t.createElementJsx("div",{class:"elf--input-area"},t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("textarea",c(c({ref:"$input"},m),d),r))))}onMounted(){this.state.autoFocus&&setTimeout(()=>{this.refs.$input.focus(),this.refs.$input.select()},10)}runCallback(s,e){t.isFunction(s)&&s(e,this)}[t.FOCUSIN("$input")](s){this.setState({focused:!0}),this.runCallback(this.props.onFocus,s)}[t.FOCUSOUT("$input")](s){this.setState({focused:!1}),this.runCallback(this.props.onBlur,s)}get value(){return this.refs.$input.value}set value(s){this.refs.$input.value=s}}const je=y("--elf--virtual-scroll",{backgroundColor:!0,color:!0,height:!0,hoverColor:!0,borderColor:!0,boxShadow:!0,toolsBorderColor:!0,toolsBorderRadius:!0,hgap:!0,vgap:!0});class Ae extends t.UIElement{initState(){return{scrollHeight:32}}template(){const{style:s={},itemHeight:e=32,items:o=[]}=this.props,l=o.length,r={class:t.classnames("elf--virtual-scroll",this.props.class),style:g(c({},b(s,je)),{"--elf--virtual-scroll-item-width":this.state.width?`${this.state.width}px`:"100%","--elf--virtual-scroll-item-height":`${e}px`,"--elf--virtual-scroll-item-count":l,"--elf--virtual-scroll-panel-height":`${l*e}px`})};return t.createElementJsx("div",c({},r),t.createElementJsx("div",{class:"elf--virtual-scroll-panel"},t.createElementJsx("div",{class:"elf--virtual-scroll-content-area","data-scrolling":this.state.scrolling?"true":"false"},this.makeItemView())))}refreshSize(){var e;const s=(e=this.$el)==null?void 0:e.offsetRect();s&&this.setState({width:s.width,height:s.height},!1)}onMounted(){window.setTimeout(()=>{const s=this.$el.offsetRect();this.setState({width:s.width,height:s.height})},20)}filterItems(s,e,o){return s.filter((l,r)=>r>=e&&r<=o)}makeItemView(){const{itemHeight:s,items:e,overscanRowCount:o=10}=this.props,{width:l,height:r,isRenderingItems:n}=this.state;if(!n){if(!l)return[];const i=e.length*s,u=Math.floor(r/s),d=e.length;this.setState({scrollHeight:i,itemCount:u},!1);const m=Math.max(Math.floor((this.state.scrollTop||0)/32)-o,0),p=Math.min(Math.floor(m+u+2*o),d-1);this.state.renderItems=this.filterItems(e,m,p)}return this.state.renderItems.map((i,u)=>{var d,m;return(m=(d=this.props).itemRenderer)==null?void 0:m.call(d,i,i.index*s,u,e,this)})}checkScrollTop(){const{scrollTop:s,height:e,scrollHeight:o}=this.state;return this.setState({scrollTop:this.$el.scrollTop},!1),s>o-e?(this.setState({scrolling:!1}),!1):!0}[t.SCROLL("$el")+t.IF("checkScrollTop")](){this.trigger("reloadItems")}[t.SUBSCRIBE_SELF("checkScrolling")+t.DEBOUNCE(100)](){this.setState({scrolling:!1})}[t.SUBSCRIBE_SELF("reloadItems")+t.FRAME](){this.setState({scrolling:!0}),this.trigger("checkScrolling")}refresh(){this.setState({isRenderingItems:!1},!1),this.render()}refreshItems(){this.setState({isRenderingItems:!0},!1),this.render()}scrollIntoView(s){const{itemHeight:e}=this.props,o=s*e;this.$el.scrollTop=o,this.setState({scrollTop:this.$el.scrollTop},!1),this.refreshItems()}}class He extends t.UIElement{template(){const{top:s,id:e,topLevel:o,group:l,selected:r,icon:n,content:i,lock:u,visible:d,lockIcon:m,lockOpenIcon:p,visibleIcon:C,isComponent:v=!1,number:x=10}=this.props;return t.createElementJsx("div",{class:"elf--virtual-scroll-item elf--layer",style:{"--elf--virtual-scroll-item-top":`${s}px`},"data-id":e,"data-number":x},t.createElementJsx("div",{class:"container","data-top-level":o?"true":void 0,"data-hidden":d?void 0:"true","data-component":v?"true":void 0,"data-selected":r?"true":void 0},t.createElementJsx("div",{class:"group"},l),n&&t.createElementJsx("div",{class:"icon"},n),t.createElementJsx("div",{class:"text",ref:"$text"},i),t.createElementJsx("div",{class:"tools"},t.createElementJsx("div",{class:"lock"},u?m:p),t.createElementJsx("div",{class:"visible"},C))))}}const ze=y("--elf--input-paint",{borderColor:!0,backgroundColor:!0,disabledColor:!0,color:!0,fontSize:!0,fontWeight:!0,height:!0,padding:!0,borderRadius:!0,placeholderColor:!0,emptyColor:!0});class Ge extends t.UIElement{constructor(){super(...arguments);E(this,"keydownColor",e=>{switch(e.key){case"ArrowUp":e.preventDefault(),this.increaseColor(e.target.getAttribute("data-type")),e.target.select();break;case"ArrowDown":e.preventDefault(),this.decreaseColor(e.target.getAttribute("data-type")),e.target.select();break}});E(this,"keydown",e=>{switch(e.key){case"ArrowUp":e.preventDefault(),this.increaseOpacity(e),e.target.select();break;case"ArrowDown":e.preventDefault(),this.decreaseOpacity(e),e.target.select();break;case"Tab":e.preventDefault();const o=this.$el.$("input[data-type='h']");o.focus(),o.select();break}})}initState(){const{style:e={},autoFocus:o=!1,focused:l,hover:r=!1,placeholder:n,disabled:i,hasOpacity:u=!0}=this.props;return{style:e,autoFocus:o,hover:r||!1,focused:l||!1,placeholder:n,disabled:i,hasOpacity:u}}template(){const{icon:e,value:o}=this.props,{style:l={},focused:r=!1,hover:n=!1,placeholder:i,disabled:u}=this.state,{r:d,g:m,b:p,a:C}=f.parse(o),{h:v,s:x,l:k}=f.RGBtoHSL(d,m,p),R={class:t.classnames(["elf--input-paint",{focused:r,hover:n,disabled:u,icon:e}]),style:c({},b(l,ze))},F={disabled:u,placeholder:i||"",min:0,max:255};return this.setState({parsedColor:{h:v,s:x,l:k,a:C}},!1),t.createElementJsx("div",c({},R),t.createElementJsx("div",{class:"elf--input-area"},t.createElementJsx(U,{columns:3},t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",g(c({class:"color",type:"text",tabIndex:1,"data-type":"h",value:v},F),{onKeyDown:this.keydownColor}))),t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",g(c({class:"color",type:"text",tabIndex:2,"data-type":"s",value:x},F),{onKeyDown:this.keydownColor}))),t.createElementJsx("div",{class:"elf--input-item"},t.createElementJsx("input",g(c({class:"color",type:"text",tabIndex:3,"data-type":"l",value:k},F),{onKeyDown:this.keydownColor}))))),this.state.hasOpacity&&t.createElementJsx("div",{class:"elf--input-opacity"},t.createElementJsx("input",{type:"text",tabIndex:4,class:"opacity",value:`${Math.round(C*100*100)/100}%`,onKeyDown:this.keydown})))}updateOpacity(e){this.setState({parsedColor:g(c({},this.state.parsedColor),{a:Math.max(0,Math.min(1,Math.round((this.state.parsedColor.a+e)*100)/100))})}),this.runCallback(this.props.onChange)}updateColor(e,o){const l={};e==="h"?l[e]=Math.max(0,Math.min(360,this.state.parsedColor[e]+o)):e==="s"?l[e]=Math.max(0,Math.min(100,this.state.parsedColor[e]+o)):e==="l"&&(l[e]=Math.max(0,Math.min(100,this.state.parsedColor[e]+o))),this.setState({parsedColor:c(c({},this.state.parsedColor),l)},!1),this.runCallback(this.props.onChange)}increaseColor(e){this.updateColor(e,1)}decreaseColor(e){this.updateColor(e,-1)}increaseOpacity(){this.updateOpacity(.01)}decreaseOpacity(){this.updateOpacity(-.01)}onMounted(){this.state.autoFocus&&setTimeout(()=>{const e=this.$el.$("input[data-type='h']");e.focus(),e.select()},10)}runCallback(e){t.isFunction(e)&&e(this.value,this)}[t.CLICK("$el .elf--input-paint-icon")](e){var o,l;(l=(o=this.props).onClickColorView)==null||l.call(o,e)}[t.FOCUSIN("$el input")](e){this.setState({focused:!0}),e.target.select(),this.runCallback(this.props.onFocus,e)}[t.FOCUSOUT("$el input")](e){this.setState({focused:!1}),this.runCallback(this.props.onBlur,e)}get value(){const{parsedColor:e}=this.state,{h:o,s:l,l:r,a:n}=e;return f.format({h:o,s:l,l:r,a:n},"hsl")}set value(e){this.refs.$input.value=e}get selectedValue(){return document.getSelection().toString()}}const We=["hex","rgb","hsl"];function Xe(a){return t.createElementJsx("div",{class:"eye-dropper"},t.createElementJsx(S,{onClick:async()=>{const s=new window.EyeDropper;try{const e=await s.open();t.isFunction(a.onChange)&&a.onChange(e.sRGBHex)}catch(e){console.warn(e)}}},t.createElementJsx("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElementJsx("path",{d:"M13.4473 0.6C12.6473 -0.2 11.4473 -0.2 10.6473 0.6L7.84725 3.4L7.04725 2.7C6.64725 2.3 6.04725 2.3 5.64725 2.7C5.24725 3.1 5.24725 3.7 5.64725 4.1L6.34725 4.8L0.547255 10.6C0.147255 11 -0.452745 12.5 0.547255 13.5C1.54725 14.5 3.04725 13.9 3.44725 13.5L9.24725 7.7L9.94725 8.4C10.3473 8.8 10.9473 8.8 11.3473 8.4C11.7473 8 11.7473 7.4 11.3473 7L10.6473 6.3L13.4473 3.5C14.2473 2.6 14.2473 1.4 13.4473 0.6ZM2.54725 12.5H1.54725V11.5L7.34725 5.7L8.34725 6.7C8.24725 6.7 2.54725 12.5 2.54725 12.5Z",fill:"black","fill-opacity":"0.8"}))))}class Z extends t.UIElement{template(){const{value:s,containerClass:e,slideClass:o}=this.props;return t.createElementJsx("div",{class:`${e} slide-view`},t.createElementJsx("div",{class:`${o} slide-bg`},t.createElementJsx("div",{class:"drag-pointer",style:{"--drag-point-left":s}})))}[t.POINTERSTART("$el .slide-bg")](){this.setState({clicked:!0,rect:this.$el.$(".slide-bg").rect()},!1)}checkClicked(){return this.state.clicked}[t.POINTERMOVE("document")+t.IF("checkClicked")](s){const{onChange:e}=this.props,{x:o,width:l}=this.state.rect,r=o,n=r+l,u=(Math.min(Math.max(r,s.clientX),n)-r)/l;t.isFunction(e)&&e(u)}[t.POINTEREND("document")+t.IF("checkClicked")](){this.setState({clicked:!1},!1)}}class Ye extends t.UIElement{template(){const{value:s,onChange:e}=this.props;return t.createElementJsx(Z,{value:s,containerClass:"hue-slide",slideClass:"hue-slide-bg",onChange:e})}}class _e extends t.UIElement{template(){const{value:s,onChange:e}=this.props;return t.createElementJsx(Z,{value:s,containerClass:"opacity-slide",slideClass:"opacity-slide-bg",onChange:e})}}class Ze extends t.UIElement{initState(){const{type:s}=this.props;return{type:s}}makeTypedColorInput(){const{r:s,g:e,b:o,a:l,onChange:r}=this.props,{type:n}=this.state,{h:i,s:u,l:d}=f.RGBtoHSL(s,e,o);switch(n){case"hex":return t.createElementJsx("div",null,t.createElementJsx(Y,{autoFocus:!0,value:f.format({r:s,g:e,b:o,a:l},"hex"),onChange:r}));case"rgb":return t.createElementJsx("div",null,t.createElementJsx(_,{autoFocus:!0,value:f.format({r:s,g:e,b:o,a:l},"rgb"),onChange:r}));case"hsl":return t.createElementJsx("div",null,t.createElementJsx(Ge,{autoFocus:!0,value:f.format({h:i,s:u,l:d,a:l},"hsl"),onChange:r}))}}template(){const{type:s}=this.state,e=this.makeTypedColorInput();return t.createElementJsx("div",{class:"color-input"},t.createElementJsx(I,{autoPosition:!0,menuStyle:{width:80,itemPadding:"10px"},items:We.map(o=>({title:o.toUpperCase(),selectable:!0,closable:!0,selected:s===o,onClick:()=>{this.setState({type:o})}}))},s.toUpperCase()),e)}}class qe extends t.UIElement{constructor(){super(...arguments);E(this,"updateOpacity",e=>{this.setState({a:e}),this.changeColor()});E(this,"updateHueColor",e=>{e=e*360;const{s:o,v:l,a:r}=this.state,{r:n,g:i,b:u}=f.HSVtoRGB(e,o,l);this.setState({color:f.format({r:n,g:i,b:u},"rgb"),r:n,g:i,b:u,a:r,hueColor:f.checkHueColor(e/360),h:e,s:o,v:l}),this.changeColor()});E(this,"updateColor",e=>{const o=f.parse(e),{r:l,g:r,b:n,a:i}=o,{h:u,s:d,v:m}=f.RGBtoHSV(l,r,n);this.setState({color:f.format({r:l,g:r,b:n},"rgb"),r:l,g:r,b:n,a:i,hueColor:f.checkHueColor(u/360),h:u,s:d,v:m}),this.changeColor()})}initState(){const{color:e}=this.props,o=f.parse(e),{r:l,g:r,b:n,a:i}=o,{h:u,s:d,v:m}=f.RGBtoHSV(l,r,n);return{type:o.type,color:f.format({r:l,g:r,b:n},"rgb"),width:240,height:240,r:l,g:r,b:n,a:i,hueColor:f.checkHueColor(u),h:u,s:d,v:m}}template(){const{type:e,h:o,s:l,v:r,width:n,height:i,r:u,g:d,b:m,a:p,hueColor:C,color:v}=this.state,x=n*l,k=i*(1-r);return t.createElementJsx("div",{class:"elf--color-mixer"},t.createElementJsx("div",{class:"elf--color-area",style:{backgroundColor:C}},t.createElementJsx("div",{class:"saturation"},t.createElementJsx("div",{class:"value"},t.createElementJsx("div",{class:"drag-pointer",style:{backgroundColor:v,left:x,top:k}})))),t.createElementJsx("div",{class:"elf--color-slide-area"},window.EyeDropper?t.createElementJsx(Xe,{onChange:this.updateColor}):void 0,t.createElementJsx("div",{class:"slide"},t.createElementJsx(Ye,{value:o/360,onChange:this.updateHueColor}),t.createElementJsx(_e,{r:u,g:d,b:m,value:p,onChange:this.updateOpacity}))),t.createElementJsx("div",{class:"elf--color-input-area"},t.createElementJsx(Ze,{type:e,h:o,s:l,v:r,r:u,g:d,b:m,a:p,onChange:this.updateColor})))}formatedColor(){const{type:e,r:o,g:l,b:r,h:n,s:i,v:u,a:d}=this.state;let m="";switch(e){case"hex":case"rgb":m=f.format({r:o,g:l,b:r,a:d},e);break;case"hsl":var{h:p,s:C,l:v}=f.HSVtoHSL(n,i,u);m=f.format({h:p,s:C,l:v,a:d},e);break;case"hsv":m=f.format({h:n,s:i,v:u,a:d},e);break}return m}changeColor(){const{onChange:e}=this.props;let o=this.formatedColor();t.isFunction(e)&&e(o)}lastChangeColor(){const{onLastChange:e}=this.props;let o=this.formatedColor();t.isFunction(e)&&e(o)}async openEyeDropper(){const e=new window.EyeDropper;try{const o=await e.open();this.updateColor(o.sRGBHex)}catch(o){console.warn(o)}}[t.POINTERSTART("$el .elf--color-area")](e){this.setState({clicked:!0,rect:this.$el.$(".elf--color-area").rect(),clientX:e.clientX,clientY:e.clientY},!1)}checkClicked(){return this.state.clicked}[t.POINTERMOVE("document")+t.IF("checkClicked")](e){const{x:o,y:l,width:r,height:n}=this.state.rect,i=o,u=i+r,d=l,m=d+n,p=Math.min(Math.max(i,e.clientX),u),C=Math.min(Math.max(d,e.clientY),m),v=(p-i)/r,x=1-(C-d)/n;this.updateSaturationValue(v,x)}[t.POINTEREND("document")+t.IF("checkClicked")](e){this.setState({clicked:!1},!1),!(this.state.clientX===e.clientX&&this.state.clientY===e.clientY)&&this.lastChangeColor()}updateSaturationValue(e,o){const{r:l,g:r,b:n}=f.HSVtoRGB(this.state.h,e,o);this.setState({r:l,g:r,b:n,s:e,v:o,color:f.format({r:l,g:r,b:n},"rgb")}),this.changeColor()}}class Qe extends t.UIElement{initState(){return{selectedValue:this.props.selectedValue}}makeItems(){const{items:s}=this.props,{selectedValue:e}=this.state;return s.map(o=>({title:o.title,selectable:!0,closable:!0,selected:o.value===e,onClick:()=>{this.setState({selectedValue:o.value})}}))}template(){const{items:s}=this.props,{selectedValue:e}=this.state,o=s.find(l=>l.value===e)||s[0]||{title:""};return t.createElementJsx("div",{class:"elf--color-grid"},t.createElementJsx("div",{class:"elf--color-grid-header"},t.createElementJsx(I,{items:this.makeItems()},o.title)),t.createElementJsx("div",{class:"elf--color-grid-list"},o.colors.map(l=>t.createElementJsx("div",{class:"elf--color-grid-item",onClick:()=>this.selectColor(l)},t.createElementJsx(M,{color:l})))))}selectColor(s){this.setState({selectedColor:s},!1),this.props.onSelect&&this.props.onSelect(s)}}h.Button=S,h.Checkbox=L,h.CheckboxGroup=ie,h.ColorGrid=Qe,h.ColorMixer=qe,h.ColorView=M,h.Dialog=me,h.Flex=T,h.Grid=U,h.HexColorEditor=Y,h.IconButton=re,h.InputEditor=De,h.InputPaint=Ve,h.Layer=He,h.Layout=Me,h.LinkButton=oe,h.Menu=w,h.Notification=ke,h.OptionMenu=I,h.OptionStrip=he,h.Panel=Oe,h.RGBColorEditor=_,h.Radio=V,h.RadioGroup=ne,h.TabStrip=Ue,h.TextAreaEditor=Ne,h.Toolbar=ye,h.ToolbarItem=W,h.Tools=G,h.ToolsCustomItem=H,h.ToolsMenuItem=z,h.Tooltip=Ie,h.VBox=Re,h.VirtualScroll=Ae,h.VisualBell=Se,Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
