---
title: Magic Method
layout: SapaLayout
filename: pages/sapa/dom/page.mdx
---

import { Grid } from "@elf-framework/ui";
import { Diagram } from "../../../utils/Diagram";


# {title}

How to specify using magic methods.

Magic methods can be used under class components. To be made available for use in perfume functional types.

Magic methods extend method functionality similar to decorators.

```jsx
import { CLICK } from "@elf-framework/sapa";

class A extends UIElement {
  template () {
    return <div>Simple Text</div>
  }

  [CLICK('$el')] (nativeDomEvent) {
    console.log(nativeDomEvent);
  }
}

```

If you use a magic method, you can create a template more easily.

## Checker

Magic methods have some special features.

### How to use Checkers
```jsx

import {CLICK, ALT, SHIFT, CONTROL, META} from "@elf-framework/sapa";

class A extends UIElement {
  [CLICK('$el') + ALT] (nativeDomEvent) {
    console.log(nativeDomEvent);
  }

  [CLICK('$el') + SHIFT] (nativeDomEvent) {
    console.log(nativeDomEvent);
  }

  [CLICK('$el') + CONTROL] (nativeDomEvent) {
    console.log(nativeDomEvent);
  }

  [CLICK('$el') + META] (nativeDomEvent) {
    console.log(nativeDomEvent);
  }
}
  
```

### How to sum Checkers 

```jsx
class A extends UIElement {
  [CLICK('$el') + ALT + SHIFT] (nativeDomEvent) {
    console.log(nativeDomEvent);
  }

  [CLICK('$el') + SHIFT + META] (nativeDomEvent) {
    console.log(nativeDomEvent);
  }
}
  
```

### How to run by `IF`

```jsx
class A extends UIElement {

  // check whether control key is pressed
  checkEvent(nativeDomEvent) {
    return nativeDomEvent.ctrlKey;
  }

  [CLICK('$el') + ALT + IF("checkEvent")] (nativeDomEvent) {
    // run if ctrlKey and altKey are pressed
    console.log(nativeDomEvent);
  }

}
  
```

### DOM Event MagicMethod 

Magic methods for some DOM Events are defined.

| Magic Method  | DOM Event  | 
| ------------- | ------------- |
| CLICK | click | 
| DOUBLECLICK | dblclick | 
| MOUSEDOWN | mousedown | 
| MOUSEUP | mouseup | 
| MOUSEMOVE | mousemove | 
| MOUSEOVER | mouseover | 
| MOUSEOUT | mouseout | 
| MOUSEENTER | mouseenter | 
| MOUSELEAVE | mouseleave | 
| TOUCHSTART | touchstart | 
| TOUCHMOVE | touchmove | 
| TOUCHEND | touchend | 
| KEYDOWN | keydown | 
| KEYUP | keyup | 
| KEYPRESS | keypress | 
| DRAG | drag | 
| DRAGSTART | dragstart | 
| DROP | drop | 
| DRAGOVER | dragover | 
| DRAGENTER | dragenter | 
| DRAGLEAVE | dragleave | 
| DRAGEXIT | dragexit | 
| DRAGOUT | dragout | 
| DRAGEND | dragend | 
| CONTEXTMENU | contextmenu | 
| CHANGE | change | 
| INPUT | input | 
| FOCUS | focus | 
| FOCUSIN | focusin | 
| FOCUSOUT | focusout | 
| BLUR | blur | 
| PASTE | paste | 
| RESIZE | resize | 
| SCROLL | scroll | 
| SUBMIT | submit | 
| POINTERSTART | pointdown + LEFT_BUTTON | 
| POINTEROVER  |  pointerover | 
| POINTERENTER  |  pointerenter | 
| POINTEROUT  |  pointerout | 
| POINTERLEAVE  |  pointerleave | 
| POINTERMOVE  |  pointermove | 
| POINTEREND  |  pointerup | 
| CHANGEINPUT | change, input | 
| WHEEL | wheel, mousewheel, DOMMouseScroll | 
| ANIMATIONSTART | animationstart | 
| ANIMATIONEND | animationend | 
| ANIMATIONITERATION | animationiteration | 
| TRANSITIONSTART | transitionstart | 
| TRANSITIONEND | transitionend | 
| TRANSITIONRUN | transitionrun | 
| TRANSITIONCANCEL | transitioncancel | 
| DOUBLETAB | doubletab | 

#### DOM Event Usage 

```js
class A extends UIElement {

  template () {
    return (
      <div>
        <div class="test">Test Code</div>
      </div>
    )
  }

  [CLICK()] (e) {
    console.log("root element this.$el is clicked", e);
  }

  // It can use a selector 
  [CLICK("$el .test")] (e)  {
    console.log(".test element is clicked");
  }

  [CLICK("$el .test") + ALT] (e) {
    console.log(".test element is clicked with altKey.");
  }

  [CLICK("$el .test") + ALT + SHIFT] (e) {
    console.log(".test element is clicked with altKey and shiftKey.");
  }

  isElementType (e) {
    return e.target.nodeType === 1; // ndoeType 1 is ELEMENT_TYPE
  }

  [CLICK("$el .test") + ALT + SHIFT + IF("isElementType")] (e) {
    console.log(".test element is clicked with altKey and shiftKey.");
  }

  [CLICK("$el") + PREVENT] (e) {
    console.log("e.preventDefault is fired with click event").
  }
}

```

### Window Event Magic Method

| Magic Method  | Window Event | 
| ------------- | ------------- | 
| POPSTATE  |  popstate | 
| ORIENTATIONCHANGE  |  orientationchange | 
| HASHCHANGE  |  hashchange | 

#### Using window event 

```js
import { HASHCHANGE } from "@elf-framework/sapa";

class A extends UIElement {
  [HASHCHANGE("window")] (e) {
    console.log("hashchange event is fired");
  }
}
```

## Custom MagicMethod 

```jsx
import { CUSTOM } from "@elf-framework/sapa";
class A extends UIElement {
  [CUSTOM("click")("$el .test")] (e) {
    console.log(e.target, " is clicked");
  }
}
```

Through the `CUSTOM` function, it is possible to designate an event other than the predetermined event.

## Checker List 

A magic method extends the method through several Checkers.

### key event checker 

| Checker  | Description | Usage | 
| ------------- | ------------- | ----- |
| ALT  | if `alt` key is pressed  |       |
| SHIFT  | if `shift` key is pressed  |       |
| CONTROL  | if `control` key is pressed  |       |
| META  | if `meta` key is pressed  |       |
| MOUSE | if event device is `mouse` |  |
| TOUCH | if event device is `touch` |  |
| PEN |  if event device is `pen` |  |
| ARROW_UP |  if `ArrowUp` key is pressed  |       |
| ARROW_DOWN |  if `ArrowDown` key is pressed  |       |
| ARROW_LEFT |  if `ArrowLeft` key is pressed  |       |
| ARROW_RIGHT |  if `ArrowRight` key is pressed  |       |
| ENTER |  if `Enter` key is pressed  |       |
| SPACE |  if `Space` key is pressed  |       |
| ESCAPE |  if `Escape` key is pressed  |       |
| BACKSPACE |  if `Backspace` key is pressed  |       |
| DELETE |  if `Delete` key is pressed  |       |
| EQUAL |  if `Equal` key is pressed  |       |
| MINUS |  if `Minus` key is pressed  |       |
| BRACKET_RIGHT |  if `BracketRight` key is pressed  |       | 
| BRACKET_LEFT | if `BracketLeft` key is pressed  |       | 

### event checker 

| Checker  | Description | Usage | 
| ------------- | ------------- | ----- |
| CAPTURE  | `capture` options for addEventListener   |       |
| PREVENT  | Execute `e.preventDefault()`   |       |
| STOP  | Execute `e.stopPropagation()`  |       |

### control checker 

| Checker  | Description | Usage | 
| ------------- | ------------- | ----- |
| IF  | Executed when check function is true  |  [CLICK('$el') + IF('checkTargetElement')] () \{\}      |
| DEBOUNCE  | Apply debounce to a function  |  [CLICK() + DEBOUNCE(100)] () \{\}      |
| THROTTLE  | Apply throttle to a function  | [CLICK() + THROTTLE(100)] () \{\}      |